{
  "version": 3,
  "sources": ["../../../src/lib/pdf-parser.ts"],
  "sourcesContent": ["import { generateText } from 'ai'\nimport { openai } from '@ai-sdk/openai'\n\n/**\n * Fetches PDF and extracts text using GPT-4o vision\n * This is the fallback/primary method since pdf-parse has bundler issues\n */\nexport async function extractTextFromPdfUrl(pdfUrl: string): Promise<string | null> {\n    try {\n        console.log(`üìÑ Fetching PDF from: ${pdfUrl}`)\n\n        const response = await fetch(pdfUrl)\n        if (!response.ok) {\n            console.error(`‚ùå Failed to fetch PDF: ${response.status} ${response.statusText}`)\n            return null\n        }\n\n        const arrayBuffer = await response.arrayBuffer()\n        const buffer = Buffer.from(arrayBuffer)\n        const base64 = buffer.toString('base64')\n\n        console.log(`üìÑ PDF downloaded, size: ${buffer.length} bytes`)\n        console.log(`üìÑ Sending to GPT-4o for text extraction...`)\n\n        // Use GPT-4o to extract text from the PDF using data URL format\n        const dataUrl = `data:application/pdf;base64,${base64}`\n\n        const { text } = await generateText({\n            model: openai('gpt-4o'),\n            messages: [\n                {\n                    role: 'user',\n                    content: [\n                        {\n                            type: 'text',\n                            text: 'Please extract and return ALL the text content from this PDF document. Return ONLY the extracted text, nothing else. Maintain the original structure and formatting as much as possible.'\n                        },\n                        {\n                            type: 'file',\n                            data: dataUrl,\n                        }\n                    ]\n                }\n            ]\n        })\n\n        if (text && text.trim()) {\n            console.log(`‚úÖ Extracted ${text.length} characters from PDF via GPT-4o`)\n            return text\n        }\n\n        console.log('‚ö†Ô∏è GPT-4o returned empty text')\n        return null\n    } catch (error) {\n        console.error('‚ùå Error extracting PDF text:', error)\n        return null\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;AAAA;AAOA,eAAsB,sBAAsB,QAAwC;AAChF,MAAI;AACA,YAAQ,IAAI,yBAAyB,MAAM,EAAE;AAE7C,UAAM,WAAW,MAAM,MAAM,MAAM;AACnC,QAAI,CAAC,SAAS,IAAI;AACd,cAAQ,MAAM,0BAA0B,SAAS,MAAM,IAAI,SAAS,UAAU,EAAE;AAChF,aAAO;AAAA,IACX;AAEA,UAAM,cAAc,MAAM,SAAS,YAAY;AAC/C,UAAM,SAAS,OAAO,KAAK,WAAW;AACtC,UAAM,SAAS,OAAO,SAAS,QAAQ;AAEvC,YAAQ,IAAI,4BAA4B,OAAO,MAAM,QAAQ;AAC7D,YAAQ,IAAI,6CAA6C;AAGzD,UAAM,UAAU,+BAA+B,MAAM;AAErD,UAAM,EAAE,KAAK,IAAI,MAAM,aAAa;AAAA,MAChC,OAAO,OAAO,QAAQ;AAAA,MACtB,UAAU;AAAA,QACN;AAAA,UACI,MAAM;AAAA,UACN,SAAS;AAAA,YACL;AAAA,cACI,MAAM;AAAA,cACN,MAAM;AAAA,YACV;AAAA,YACA;AAAA,cACI,MAAM;AAAA,cACN,MAAM;AAAA,YACV;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,CAAC;AAED,QAAI,QAAQ,KAAK,KAAK,GAAG;AACrB,cAAQ,IAAI,eAAe,KAAK,MAAM,iCAAiC;AACvE,aAAO;AAAA,IACX;AAEA,YAAQ,IAAI,+BAA+B;AAC3C,WAAO;AAAA,EACX,SAAS,OAAO;AACZ,YAAQ,MAAM,gCAAgC,KAAK;AACnD,WAAO;AAAA,EACX;AACJ;AAlDsB;",
  "names": []
}
