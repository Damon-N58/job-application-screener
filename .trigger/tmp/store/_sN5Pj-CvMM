{
  "version": 3,
  "sources": ["../../../node_modules/pdf-parse/node_modules/pdfjs-dist/legacy/build/pdf.mjs", "../../../node_modules/pdf-parse/src/pdf-parse/Exception.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/Shape.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/Point.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/Line.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/TableData.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/Table.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/LineStore.ts", "../../../node_modules/pdf-parse/src/pdf-parse/geometry/Rectangle.ts", "../../../node_modules/pdf-parse/src/pdf-parse/ImageResult.ts", "../../../node_modules/pdf-parse/src/pdf-parse/InfoResult.ts", "../../../node_modules/pdf-parse/src/pdf-parse/ParseParameters.ts", "../../../node_modules/pdf-parse/src/pdf-parse/PathGeometry.ts", "../../../node_modules/pdf-parse/src/pdf-parse/ScreenshotResult.ts", "../../../node_modules/pdf-parse/src/pdf-parse/TableResult.ts", "../../../node_modules/pdf-parse/src/pdf-parse/TextResult.ts", "../../../node_modules/pdf-parse/src/pdf-parse/PDFParse.ts", "../../../src/lib/pdf-parser.ts"],
  "sourcesContent": ["/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.4.296\n * pdfjsBuild = f56dc8601\n */\n/******/ var __webpack_modules__ = ({\n\n/***/ 34:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(4901);\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n\n\n/***/ }),\n\n/***/ 81:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar tryToString = __webpack_require__(6823);\nvar getIteratorMethod = __webpack_require__(851);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n\n\n/***/ }),\n\n/***/ 116:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar iterate = __webpack_require__(2652);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n\n\n/***/ }),\n\n/***/ 283:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar fails = __webpack_require__(9039);\nvar isCallable = __webpack_require__(4901);\nvar hasOwn = __webpack_require__(9297);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(350).CONFIGURABLE);\nvar inspectSource = __webpack_require__(3706);\nvar InternalStateModule = __webpack_require__(1181);\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n\n\n/***/ }),\n\n/***/ 350:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar hasOwn = __webpack_require__(9297);\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\n\n/***/ }),\n\n/***/ 397:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(7751);\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n\n\n/***/ }),\n\n/***/ 421:\n/***/ ((module) => {\n\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 456:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar uncurryThis = __webpack_require__(9504);\nvar anUint8Array = __webpack_require__(4154);\nvar notDetached = __webpack_require__(5169);\n\nvar numberToString = uncurryThis(1.1.toString);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.toHex || !(function () {\n  try {\n    var target = new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255]);\n    return target.toHex() === 'ffffffffffffffff';\n  } catch (error) {\n    return false;\n  }\n})();\n\n// `Uint8Array.prototype.toHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  toHex: function toHex() {\n    anUint8Array(this);\n    notDetached(this.buffer);\n    var result = '';\n    for (var i = 0, length = this.length; i < length; i++) {\n      var hex = numberToString(this[i], 16);\n      result += hex.length === 1 ? '0' + hex : hex;\n    }\n    return result;\n  }\n});\n\n\n/***/ }),\n\n/***/ 507:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n\n\n/***/ }),\n\n/***/ 531:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorFlattenable = __webpack_require__(8646);\nvar createIteratorProxy = __webpack_require__(9462);\nvar iteratorClose = __webpack_require__(9539);\nvar IS_PURE = __webpack_require__(6395);\nvar iteratorHelperThrowsOnInvalidIterator = __webpack_require__(684);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE\n  && !iteratorHelperThrowsOnInvalidIterator('flatMap', function () { /* empty */ });\nvar flatMapWithoutClosingOnEarlyError = !IS_PURE && !FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('flatMap', TypeError);\n\nvar FORCED = IS_PURE || FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR || flatMapWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var mapper = this.mapper;\n  var result, inner;\n\n  while (true) {\n    if (inner = this.inner) try {\n      result = anObject(call(inner.next, inner.iterator));\n      if (!result.done) return result.value;\n      this.inner = null;\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n\n    result = anObject(call(this.next, iterator));\n\n    if (this.done = !!result.done) return;\n\n    try {\n      this.inner = getIteratorFlattenable(mapper(result.value, this.counter++), false);\n    } catch (error) { iteratorClose(iterator, 'throw', error); }\n  }\n});\n\n// `Iterator.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.flatmap\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  flatMap: function flatMap(mapper) {\n    anObject(this);\n    try {\n      aCallable(mapper);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (flatMapWithoutClosingOnEarlyError) return call(flatMapWithoutClosingOnEarlyError, this, mapper);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper,\n      inner: null\n    });\n  }\n});\n\n\n/***/ }),\n\n/***/ 616:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\n\n/***/ }),\n\n/***/ 655:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(6955);\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n\n\n/***/ }),\n\n/***/ 679:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isPrototypeOf = __webpack_require__(1625);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n\n\n/***/ }),\n\n/***/ 684:\n/***/ ((module) => {\n\n\n// Should throw an error on invalid iterator\n// https://issues.chromium.org/issues/336839115\nmodule.exports = function (methodName, argument) {\n  // eslint-disable-next-line es/no-iterator -- required for testing\n  var method = typeof Iterator == 'function' && Iterator.prototype[methodName];\n  if (method) try {\n    method.call({ next: null }, argument).next();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 741:\n/***/ ((module) => {\n\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n\n\n/***/ }),\n\n/***/ 757:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(7751);\nvar isCallable = __webpack_require__(4901);\nvar isPrototypeOf = __webpack_require__(1625);\nvar USE_SYMBOL_AS_UID = __webpack_require__(7040);\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n\n\n/***/ }),\n\n/***/ 851:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(6955);\nvar getMethod = __webpack_require__(5966);\nvar isNullOrUndefined = __webpack_require__(4117);\nvar Iterators = __webpack_require__(6269);\nvar wellKnownSymbol = __webpack_require__(8227);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n\n\n/***/ }),\n\n/***/ 944:\n/***/ ((module) => {\n\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (options) {\n  var alphabet = options && options.alphabet;\n  if (alphabet === undefined || alphabet === 'base64' || alphabet === 'base64url') return alphabet || 'base64';\n  throw new $TypeError('Incorrect `alphabet` option');\n};\n\n\n/***/ }),\n\n/***/ 1072:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar internalObjectKeys = __webpack_require__(1828);\nvar enumBugKeys = __webpack_require__(8727);\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n\n\n/***/ }),\n\n/***/ 1103:\n/***/ ((module) => {\n\n\nmodule.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n\n\n/***/ }),\n\n/***/ 1108:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(6955);\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n\n\n/***/ }),\n\n/***/ 1148:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar iterate = __webpack_require__(2652);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar everyWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('every', TypeError);\n\n// `Iterator.prototype.every` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.every\n$({ target: 'Iterator', proto: true, real: true, forced: everyWithoutClosingOnEarlyError }, {\n  every: function every(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (everyWithoutClosingOnEarlyError) return call(everyWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return !iterate(record, function (value, stop) {\n      if (!predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n\n\n/***/ }),\n\n/***/ 1181:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_WEAK_MAP = __webpack_require__(8622);\nvar globalThis = __webpack_require__(4576);\nvar isObject = __webpack_require__(34);\nvar createNonEnumerableProperty = __webpack_require__(6699);\nvar hasOwn = __webpack_require__(9297);\nvar shared = __webpack_require__(7629);\nvar sharedKey = __webpack_require__(6119);\nvar hiddenKeys = __webpack_require__(421);\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n/***/ }),\n\n/***/ 1291:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar trunc = __webpack_require__(741);\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n\n\n/***/ }),\n\n/***/ 1385:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar iteratorClose = __webpack_require__(9539);\n\nmodule.exports = function (iters, kind, value) {\n  for (var i = iters.length - 1; i >= 0; i--) {\n    if (iters[i] === undefined) continue;\n    try {\n      value = iteratorClose(iters[i].iterator, kind, value);\n    } catch (error) {\n      kind = 'throw';\n      value = error;\n    }\n  }\n  if (kind === 'throw') throw value;\n  return value;\n};\n\n\n/***/ }),\n\n/***/ 1548:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar fails = __webpack_require__(9039);\nvar V8 = __webpack_require__(9519);\nvar ENVIRONMENT = __webpack_require__(4215);\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n\n\n/***/ }),\n\n/***/ 1549:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(6632);\n\n\n/***/ }),\n\n/***/ 1625:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n\n\n/***/ }),\n\n/***/ 1689:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar apply = __webpack_require__(8745);\nvar slice = __webpack_require__(7680);\nvar newPromiseCapabilityModule = __webpack_require__(6043);\nvar aCallable = __webpack_require__(9306);\nvar perform = __webpack_require__(1103);\n\nvar Promise = globalThis.Promise;\n\nvar ACCEPT_ARGUMENTS = false;\n// Avoiding the use of polyfills of the previous iteration of this proposal\n// that does not accept arguments of the callback\nvar FORCED = !Promise || !Promise['try'] || perform(function () {\n  Promise['try'](function (argument) {\n    ACCEPT_ARGUMENTS = argument === 8;\n  }, 8);\n}).error || !ACCEPT_ARGUMENTS;\n\n// `Promise.try` method\n// https://tc39.es/ecma262/#sec-promise.try\n$({ target: 'Promise', stat: true, forced: FORCED }, {\n  'try': function (callbackfn /* , ...args */) {\n    var args = arguments.length > 1 ? slice(arguments, 1) : [];\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    var result = perform(function () {\n      return apply(aCallable(callbackfn), undefined, args);\n    });\n    (result.error ? promiseCapability.reject : promiseCapability.resolve)(result.value);\n    return promiseCapability.promise;\n  }\n});\n\n\n/***/ }),\n\n/***/ 1698:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar union = __webpack_require__(4204);\nvar setMethodGetKeysBeforeCloning = __webpack_require__(9835);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar FORCED = !setMethodAcceptSetLike('union') || !setMethodGetKeysBeforeCloning('union');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  union: union\n});\n\n\n/***/ }),\n\n/***/ 1701:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createIteratorProxy = __webpack_require__(9462);\nvar callWithSafeIterationClosing = __webpack_require__(6319);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperThrowsOnInvalidIterator = __webpack_require__(684);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\nvar IS_PURE = __webpack_require__(6395);\n\nvar MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('map', function () { /* empty */ });\nvar mapWithoutClosingOnEarlyError = !IS_PURE && !MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('map', TypeError);\n\nvar FORCED = IS_PURE || MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR || mapWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  map: function map(mapper) {\n    anObject(this);\n    try {\n      aCallable(mapper);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (mapWithoutClosingOnEarlyError) return call(mapWithoutClosingOnEarlyError, this, mapper);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      mapper: mapper\n    });\n  }\n});\n\n\n/***/ }),\n\n/***/ 1767:\n/***/ ((module) => {\n\n\n// `GetIteratorDirect(obj)` abstract operation\n// https://tc39.es/ecma262/#sec-getiteratordirect\nmodule.exports = function (obj) {\n  return {\n    iterator: obj,\n    next: obj.next,\n    done: false\n  };\n};\n\n\n/***/ }),\n\n/***/ 1828:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar hasOwn = __webpack_require__(9297);\nvar toIndexedObject = __webpack_require__(5397);\nvar indexOf = (__webpack_require__(9617).indexOf);\nvar hiddenKeys = __webpack_require__(421);\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 2106:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar makeBuiltIn = __webpack_require__(283);\nvar defineProperty = __webpack_require__(4913);\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n\n\n/***/ }),\n\n/***/ 2140:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar wellKnownSymbol = __webpack_require__(8227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n/***/ }),\n\n/***/ 2195:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n\n\n/***/ }),\n\n/***/ 2211:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n\n\n/***/ }),\n\n/***/ 2303:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar uncurryThis = __webpack_require__(9504);\n\nvar Uint8Array = globalThis.Uint8Array;\nvar SyntaxError = globalThis.SyntaxError;\nvar parseInt = globalThis.parseInt;\nvar min = Math.min;\nvar NOT_HEX = /[^\\da-f]/i;\nvar exec = uncurryThis(NOT_HEX.exec);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (string, into) {\n  var stringLength = string.length;\n  if (stringLength % 2 !== 0) throw new SyntaxError('String should be an even number of characters');\n  var maxLength = into ? min(into.length, stringLength / 2) : stringLength / 2;\n  var bytes = into || new Uint8Array(maxLength);\n  var read = 0;\n  var written = 0;\n  while (written < maxLength) {\n    var hexits = stringSlice(string, read, read += 2);\n    if (exec(NOT_HEX, hexits)) throw new SyntaxError('String should only contain hex characters');\n    bytes[written++] = parseInt(hexits, 16);\n  }\n  return { bytes: bytes, read: read };\n};\n\n\n/***/ }),\n\n/***/ 2360:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* global ActiveXObject -- old IE, WSH */\nvar anObject = __webpack_require__(8551);\nvar definePropertiesModule = __webpack_require__(6801);\nvar enumBugKeys = __webpack_require__(8727);\nvar hiddenKeys = __webpack_require__(421);\nvar html = __webpack_require__(397);\nvar documentCreateElement = __webpack_require__(4055);\nvar sharedKey = __webpack_require__(6119);\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n\n\n/***/ }),\n\n/***/ 2475:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar isSupersetOf = __webpack_require__(8527);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n\n\n/***/ }),\n\n/***/ 2489:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar createIteratorProxy = __webpack_require__(9462);\nvar callWithSafeIterationClosing = __webpack_require__(6319);\nvar IS_PURE = __webpack_require__(6395);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperThrowsOnInvalidIterator = __webpack_require__(684);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('filter', function () { /* empty */ });\nvar filterWithoutClosingOnEarlyError = !IS_PURE && !FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('filter', TypeError);\n\nvar FORCED = IS_PURE || FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR || filterWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (filterWithoutClosingOnEarlyError) return call(filterWithoutClosingOnEarlyError, this, predicate);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n\n\n/***/ }),\n\n/***/ 2529:\n/***/ ((module) => {\n\n\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n\n\n/***/ }),\n\n/***/ 2603:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toString = __webpack_require__(655);\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n\n\n/***/ }),\n\n/***/ 2652:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar bind = __webpack_require__(6080);\nvar call = __webpack_require__(9565);\nvar anObject = __webpack_require__(8551);\nvar tryToString = __webpack_require__(6823);\nvar isArrayIteratorMethod = __webpack_require__(4209);\nvar lengthOfArrayLike = __webpack_require__(6198);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getIterator = __webpack_require__(81);\nvar getIteratorMethod = __webpack_require__(851);\nvar iteratorClose = __webpack_require__(9539);\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal');\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n\n\n/***/ }),\n\n/***/ 2777:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar isObject = __webpack_require__(34);\nvar isSymbol = __webpack_require__(757);\nvar getMethod = __webpack_require__(5966);\nvar ordinaryToPrimitive = __webpack_require__(4270);\nvar wellKnownSymbol = __webpack_require__(8227);\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\n\n/***/ }),\n\n/***/ 2787:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar hasOwn = __webpack_require__(9297);\nvar isCallable = __webpack_require__(4901);\nvar toObject = __webpack_require__(8981);\nvar sharedKey = __webpack_require__(6119);\nvar CORRECT_PROTOTYPE_GETTER = __webpack_require__(2211);\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n\n\n/***/ }),\n\n/***/ 2796:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\nvar isCallable = __webpack_require__(4901);\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n/***/ }),\n\n/***/ 2804:\n/***/ ((module) => {\n\n\nvar commonAlphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nvar base64Alphabet = commonAlphabet + '+/';\nvar base64UrlAlphabet = commonAlphabet + '-_';\n\nvar inverse = function (characters) {\n  // TODO: use `Object.create(null)` in `core-js@4`\n  var result = {};\n  var index = 0;\n  for (; index < 64; index++) result[characters.charAt(index)] = index;\n  return result;\n};\n\nmodule.exports = {\n  i2c: base64Alphabet,\n  c2i: inverse(base64Alphabet),\n  i2cUrl: base64UrlAlphabet,\n  c2iUrl: inverse(base64UrlAlphabet)\n};\n\n\n/***/ }),\n\n/***/ 2812:\n/***/ ((module) => {\n\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n\n\n/***/ }),\n\n/***/ 2839:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n\n\n/***/ }),\n\n/***/ 2967:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = __webpack_require__(6706);\nvar isObject = __webpack_require__(34);\nvar requireObjectCoercible = __webpack_require__(7750);\nvar aPossiblePrototype = __webpack_require__(3506);\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n\n\n/***/ }),\n\n/***/ 3068:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// based on Shewchuk's algorithm for exactly floating point addition\n// adapted from https://github.com/tc39/proposal-math-sum/blob/3513d58323a1ae25560e8700aa5294500c6c9287/polyfill/polyfill.mjs\nvar $ = __webpack_require__(6518);\nvar uncurryThis = __webpack_require__(9504);\nvar iterate = __webpack_require__(2652);\n\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar $Infinity = Infinity;\nvar $NaN = NaN;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar push = uncurryThis([].push);\n\nvar POW_2_1023 = pow(2, 1023);\nvar MAX_SAFE_INTEGER = pow(2, 53) - 1; // 2 ** 53 - 1 === 9007199254740992\nvar MAX_DOUBLE = Number.MAX_VALUE; // 2 ** 1024 - 2 ** (1023 - 52) === 1.79769313486231570815e+308\nvar MAX_ULP = pow(2, 971); // 2 ** (1023 - 52) === 1.99584030953471981166e+292\n\nvar NOT_A_NUMBER = {};\nvar MINUS_INFINITY = {};\nvar PLUS_INFINITY = {};\nvar MINUS_ZERO = {};\nvar FINITE = {};\n\n// prerequisite: abs(x) >= abs(y)\nvar twosum = function (x, y) {\n  var hi = x + y;\n  var lo = y - (hi - x);\n  return { hi: hi, lo: lo };\n};\n\n// `Math.sumPrecise` method\n// https://github.com/tc39/proposal-math-sum\n$({ target: 'Math', stat: true }, {\n  // eslint-disable-next-line max-statements -- ok\n  sumPrecise: function sumPrecise(items) {\n    var numbers = [];\n    var count = 0;\n    var state = MINUS_ZERO;\n\n    iterate(items, function (n) {\n      if (++count >= MAX_SAFE_INTEGER) throw new $RangeError('Maximum allowed index exceeded');\n      if (typeof n != 'number') throw new $TypeError('Value is not a number');\n      if (state !== NOT_A_NUMBER) {\n        // eslint-disable-next-line no-self-compare -- NaN check\n        if (n !== n) state = NOT_A_NUMBER;\n        else if (n === $Infinity) state = state === MINUS_INFINITY ? NOT_A_NUMBER : PLUS_INFINITY;\n        else if (n === -$Infinity) state = state === PLUS_INFINITY ? NOT_A_NUMBER : MINUS_INFINITY;\n        else if ((n !== 0 || (1 / n) === $Infinity) && (state === MINUS_ZERO || state === FINITE)) {\n          state = FINITE;\n          push(numbers, n);\n        }\n      }\n    });\n\n    switch (state) {\n      case NOT_A_NUMBER: return $NaN;\n      case MINUS_INFINITY: return -$Infinity;\n      case PLUS_INFINITY: return $Infinity;\n      case MINUS_ZERO: return -0;\n    }\n\n    var partials = [];\n    var overflow = 0; // conceptually 2 ** 1024 times this value; the final partial is biased by this amount\n    var x, y, sum, hi, lo, tmp;\n\n    for (var i = 0; i < numbers.length; i++) {\n      x = numbers[i];\n      var actuallyUsedPartials = 0;\n      for (var j = 0; j < partials.length; j++) {\n        y = partials[j];\n        if (abs(x) < abs(y)) {\n          tmp = x;\n          x = y;\n          y = tmp;\n        }\n        sum = twosum(x, y);\n        hi = sum.hi;\n        lo = sum.lo;\n        if (abs(hi) === $Infinity) {\n          var sign = hi === $Infinity ? 1 : -1;\n          overflow += sign;\n\n          x = (x - (sign * POW_2_1023)) - (sign * POW_2_1023);\n          if (abs(x) < abs(y)) {\n            tmp = x;\n            x = y;\n            y = tmp;\n          }\n          sum = twosum(x, y);\n          hi = sum.hi;\n          lo = sum.lo;\n        }\n        if (lo !== 0) partials[actuallyUsedPartials++] = lo;\n        x = hi;\n      }\n      partials.length = actuallyUsedPartials;\n      if (x !== 0) push(partials, x);\n    }\n\n    // compute the exact sum of partials, stopping once we lose precision\n    var n = partials.length - 1;\n    hi = 0;\n    lo = 0;\n\n    if (overflow !== 0) {\n      var next = n >= 0 ? partials[n] : 0;\n      n--;\n      if (abs(overflow) > 1 || (overflow > 0 && next > 0) || (overflow < 0 && next < 0)) {\n        return overflow > 0 ? $Infinity : -$Infinity;\n      }\n      // here we actually have to do the arithmetic\n      // drop a factor of 2 so we can do it without overflow\n      // assert(abs(overflow) === 1)\n      sum = twosum(overflow * POW_2_1023, next / 2);\n      hi = sum.hi;\n      lo = sum.lo;\n      lo *= 2;\n      if (abs(2 * hi) === $Infinity) {\n        // rounding to the maximum value\n        if (hi > 0) {\n          return (hi === POW_2_1023 && lo === -(MAX_ULP / 2) && n >= 0 && partials[n] < 0) ? MAX_DOUBLE : $Infinity;\n        } return (hi === -POW_2_1023 && lo === (MAX_ULP / 2) && n >= 0 && partials[n] > 0) ? -MAX_DOUBLE : -$Infinity;\n      }\n\n      if (lo !== 0) {\n        partials[++n] = lo;\n        lo = 0;\n      }\n\n      hi *= 2;\n    }\n\n    while (n >= 0) {\n      sum = twosum(hi, partials[n--]);\n      hi = sum.hi;\n      lo = sum.lo;\n      if (lo !== 0) break;\n    }\n\n    if (n >= 0 && ((lo < 0 && partials[n] < 0) || (lo > 0 && partials[n] > 0))) {\n      y = lo * 2;\n      x = hi + y;\n      if (y === x - hi) hi = x;\n    }\n\n    return hi;\n  }\n});\n\n\n/***/ }),\n\n/***/ 3167:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(4901);\nvar isObject = __webpack_require__(34);\nvar setPrototypeOf = __webpack_require__(2967);\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n\n\n/***/ }),\n\n/***/ 3238:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(7811);\nvar arrayBufferByteLength = __webpack_require__(7394);\n\nvar DataView = globalThis.DataView;\n\nmodule.exports = function (O) {\n  if (!NATIVE_ARRAY_BUFFER || arrayBufferByteLength(O) !== 0) return false;\n  try {\n    // eslint-disable-next-line no-new -- thrower\n    new DataView(O);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 3392:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.1.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n\n\n/***/ }),\n\n/***/ 3440:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar SetHelpers = __webpack_require__(4402);\nvar clone = __webpack_require__(9286);\nvar size = __webpack_require__(5170);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSet = __webpack_require__(8469);\nvar iterateSimple = __webpack_require__(507);\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(result, e)) remove(result, e);\n  });\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 3463:\n/***/ ((module) => {\n\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'string') return argument;\n  throw new $TypeError('Argument is not a string');\n};\n\n\n/***/ }),\n\n/***/ 3506:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isPossiblePrototype = __webpack_require__(3925);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n\n\n/***/ }),\n\n/***/ 3579:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar iterate = __webpack_require__(2652);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar someWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('some', TypeError);\n\n// `Iterator.prototype.some` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.some\n$({ target: 'Iterator', proto: true, real: true, forced: someWithoutClosingOnEarlyError }, {\n  some: function some(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (someWithoutClosingOnEarlyError) return call(someWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n\n\n/***/ }),\n\n/***/ 3650:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar SetHelpers = __webpack_require__(4402);\nvar clone = __webpack_require__(9286);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSimple = __webpack_require__(507);\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 3706:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar isCallable = __webpack_require__(4901);\nvar store = __webpack_require__(7629);\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n/***/ }),\n\n/***/ 3717:\n/***/ ((__unused_webpack_module, exports) => {\n\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n\n/***/ 3724:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n\n\n/***/ }),\n\n/***/ 3789:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar call = __webpack_require__(9565);\nvar toIntegerOrInfinity = __webpack_require__(1291);\nvar getIteratorDirect = __webpack_require__(1767);\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n\n\n/***/ }),\n\n/***/ 3838:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar size = __webpack_require__(5170);\nvar iterate = __webpack_require__(8469);\nvar getSetRecord = __webpack_require__(3789);\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n\n\n/***/ }),\n\n/***/ 3853:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar isDisjointFrom = __webpack_require__(4449);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n\n\n/***/ }),\n\n/***/ 3925:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isObject = __webpack_require__(34);\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n\n\n/***/ }),\n\n/***/ 3972:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isObject = __webpack_require__(34);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (argument === undefined || isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object or undefined');\n};\n\n\n/***/ }),\n\n/***/ 4055:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar isObject = __webpack_require__(34);\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n\n/***/ 4114:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar toObject = __webpack_require__(8981);\nvar lengthOfArrayLike = __webpack_require__(6198);\nvar setArrayLength = __webpack_require__(4527);\nvar doesNotExceedSafeInteger = __webpack_require__(6837);\nvar fails = __webpack_require__(9039);\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n\n\n/***/ }),\n\n/***/ 4117:\n/***/ ((module) => {\n\n\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n\n\n/***/ }),\n\n/***/ 4149:\n/***/ ((module) => {\n\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (it === it) return it;\n  throw new $RangeError('NaN is not allowed');\n};\n\n\n/***/ }),\n\n/***/ 4154:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(6955);\n\nvar $TypeError = TypeError;\n\n// Perform ? RequireInternalSlot(argument, [[TypedArrayName]])\n// If argument.[[TypedArrayName]] is not \"Uint8Array\", throw a TypeError exception\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Uint8Array') return argument;\n  throw new $TypeError('Argument is not an Uint8Array');\n};\n\n\n/***/ }),\n\n/***/ 4204:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar add = (__webpack_require__(4402).add);\nvar clone = __webpack_require__(9286);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSimple = __webpack_require__(507);\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 4209:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar wellKnownSymbol = __webpack_require__(8227);\nvar Iterators = __webpack_require__(6269);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n\n\n/***/ }),\n\n/***/ 4215:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* global Bun, Deno -- detection */\nvar globalThis = __webpack_require__(4576);\nvar userAgent = __webpack_require__(2839);\nvar classof = __webpack_require__(2195);\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n\n\n/***/ }),\n\n/***/ 4226:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar aString = __webpack_require__(3463);\nvar anUint8Array = __webpack_require__(4154);\nvar notDetached = __webpack_require__(5169);\nvar $fromHex = __webpack_require__(2303);\n\n// `Uint8Array.prototype.setFromHex` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (globalThis.Uint8Array) $({ target: 'Uint8Array', proto: true }, {\n  setFromHex: function setFromHex(string) {\n    anUint8Array(this);\n    aString(string);\n    notDetached(this.buffer);\n    var read = $fromHex(string, this).read;\n    return { read: read, written: read / 2 };\n  }\n});\n\n\n/***/ }),\n\n/***/ 4235:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(3068);\n\n\n/***/ }),\n\n/***/ 4270:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar isCallable = __webpack_require__(4901);\nvar isObject = __webpack_require__(34);\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n\n/***/ 4376:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classof = __webpack_require__(2195);\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n\n\n/***/ }),\n\n/***/ 4402:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n\n\n/***/ }),\n\n/***/ 4449:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar has = (__webpack_require__(4402).has);\nvar size = __webpack_require__(5170);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSet = __webpack_require__(8469);\nvar iterateSimple = __webpack_require__(507);\nvar iteratorClose = __webpack_require__(9539);\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n\n\n/***/ }),\n\n/***/ 4483:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar getBuiltInNodeModule = __webpack_require__(9429);\nvar PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(1548);\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n\n\n/***/ }),\n\n/***/ 4495:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = __webpack_require__(9519);\nvar fails = __webpack_require__(9039);\nvar globalThis = __webpack_require__(4576);\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n\n/***/ }),\n\n/***/ 4527:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar isArray = __webpack_require__(4376);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n\n\n/***/ }),\n\n/***/ 4549:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\n\n// https://github.com/tc39/ecma262/pull/3467\nmodule.exports = function (METHOD_NAME, ExpectedError) {\n  var Iterator = globalThis.Iterator;\n  var IteratorPrototype = Iterator && Iterator.prototype;\n  var method = IteratorPrototype && IteratorPrototype[METHOD_NAME];\n\n  var CLOSED = false;\n\n  if (method) try {\n    method.call({\n      next: function () { return { done: true }; },\n      'return': function () { CLOSED = true; }\n    }, -1);\n  } catch (error) {\n    // https://bugs.webkit.org/show_bug.cgi?id=291195\n    if (!(error instanceof ExpectedError)) CLOSED = false;\n  }\n\n  if (!CLOSED) return method;\n};\n\n\n/***/ }),\n\n/***/ 4576:\n/***/ (function(module) {\n\n\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n\n/***/ }),\n\n/***/ 4603:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar defineBuiltIn = __webpack_require__(6840);\nvar uncurryThis = __webpack_require__(9504);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(2812);\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n\n\n/***/ }),\n\n/***/ 4628:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar newPromiseCapabilityModule = __webpack_require__(6043);\n\n// `Promise.withResolvers` method\n// https://tc39.es/ecma262/#sec-promise.withResolvers\n$({ target: 'Promise', stat: true }, {\n  withResolvers: function withResolvers() {\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    return {\n      promise: promiseCapability.promise,\n      resolve: promiseCapability.resolve,\n      reject: promiseCapability.reject\n    };\n  }\n});\n\n\n/***/ }),\n\n/***/ 4644:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_ARRAY_BUFFER = __webpack_require__(7811);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar globalThis = __webpack_require__(4576);\nvar isCallable = __webpack_require__(4901);\nvar isObject = __webpack_require__(34);\nvar hasOwn = __webpack_require__(9297);\nvar classof = __webpack_require__(6955);\nvar tryToString = __webpack_require__(6823);\nvar createNonEnumerableProperty = __webpack_require__(6699);\nvar defineBuiltIn = __webpack_require__(6840);\nvar defineBuiltInAccessor = __webpack_require__(2106);\nvar isPrototypeOf = __webpack_require__(1625);\nvar getPrototypeOf = __webpack_require__(2787);\nvar setPrototypeOf = __webpack_require__(2967);\nvar wellKnownSymbol = __webpack_require__(8227);\nvar uid = __webpack_require__(3392);\nvar InternalStateModule = __webpack_require__(1181);\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n\n\n/***/ }),\n\n/***/ 4659:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar definePropertyModule = __webpack_require__(4913);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n\n\n/***/ }),\n\n/***/ 4901:\n/***/ ((module) => {\n\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n\n\n/***/ }),\n\n/***/ 4913:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar IE8_DOM_DEFINE = __webpack_require__(5917);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(8686);\nvar anObject = __webpack_require__(8551);\nvar toPropertyKey = __webpack_require__(6969);\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 4916:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(7751);\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17 implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      // also covered engines with\n      // https://bugs.webkit.org/show_bug.cgi?id=272679\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n\n\n/***/ }),\n\n/***/ 4972:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(4149);\nvar toPositiveInteger = __webpack_require__(9590);\nvar createIteratorProxy = __webpack_require__(9462);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\nvar IS_PURE = __webpack_require__(6395);\n\nvar takeWithoutClosingOnEarlyError = !IS_PURE && iteratorHelperWithoutClosingOnEarlyError('take', RangeError);\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  if (!this.remaining--) {\n    this.done = true;\n    return iteratorClose(iterator, 'normal', undefined);\n  }\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.take` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.take\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE || takeWithoutClosingOnEarlyError }, {\n  take: function take(limit) {\n    anObject(this);\n    var remaining;\n    try {\n      remaining = toPositiveInteger(notANaN(+limit));\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (takeWithoutClosingOnEarlyError) return call(takeWithoutClosingOnEarlyError, this, remaining);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n/***/ }),\n\n/***/ 4979:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar getBuiltIn = __webpack_require__(7751);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar defineProperty = (__webpack_require__(4913).f);\nvar hasOwn = __webpack_require__(9297);\nvar anInstance = __webpack_require__(679);\nvar inheritIfRequired = __webpack_require__(3167);\nvar normalizeStringArgument = __webpack_require__(2603);\nvar DOMExceptionConstants = __webpack_require__(5002);\nvar clearErrorStack = __webpack_require__(8574);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar IS_PURE = __webpack_require__(6395);\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n\n\n/***/ }),\n\n/***/ 5002:\n/***/ ((module) => {\n\n\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n\n\n/***/ }),\n\n/***/ 5024:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar symmetricDifference = __webpack_require__(3650);\nvar setMethodGetKeysBeforeCloning = __webpack_require__(9835);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar FORCED = !setMethodAcceptSetLike('symmetricDifference') || !setMethodGetKeysBeforeCloning('symmetricDifference');\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  symmetricDifference: symmetricDifference\n});\n\n\n/***/ }),\n\n/***/ 5031:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar getBuiltIn = __webpack_require__(7751);\nvar uncurryThis = __webpack_require__(9504);\nvar getOwnPropertyNamesModule = __webpack_require__(8480);\nvar getOwnPropertySymbolsModule = __webpack_require__(3717);\nvar anObject = __webpack_require__(8551);\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\n\n/***/ }),\n\n/***/ 5169:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isDetached = __webpack_require__(3238);\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 5170:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThisAccessor = __webpack_require__(6706);\nvar SetHelpers = __webpack_require__(4402);\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n\n\n/***/ }),\n\n/***/ 5213:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar arrayFromConstructorAndList = __webpack_require__(5370);\nvar $fromBase64 = __webpack_require__(9143);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.fromBase64 || !function () {\n  // Webkit not throw an error on odd length string\n  try {\n    Uint8Array.fromBase64('a');\n    return;\n  } catch (error) { /* empty */ }\n  try {\n    Uint8Array.fromBase64('', null);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `Uint8Array.fromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', stat: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  fromBase64: function fromBase64(string /* , options */) {\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, null, 0x1FFFFFFFFFFFFF);\n    return arrayFromConstructorAndList(Uint8Array, result.bytes);\n  }\n});\n\n\n/***/ }),\n\n/***/ 5370:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar lengthOfArrayLike = __webpack_require__(6198);\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 5397:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(7055);\nvar requireObjectCoercible = __webpack_require__(7750);\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n/***/ }),\n\n/***/ 5610:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(1291);\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n/***/ }),\n\n/***/ 5623:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(456);\n\n\n/***/ }),\n\n/***/ 5636:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar uncurryThis = __webpack_require__(9504);\nvar uncurryThisAccessor = __webpack_require__(6706);\nvar toIndex = __webpack_require__(7696);\nvar notDetached = __webpack_require__(5169);\nvar arrayBufferByteLength = __webpack_require__(7394);\nvar detachTransferable = __webpack_require__(4483);\nvar PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(1548);\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n\n\n/***/ }),\n\n/***/ 5745:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar store = __webpack_require__(7629);\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n\n\n/***/ }),\n\n/***/ 5781:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar getBuiltIn = __webpack_require__(7751);\nvar validateArgumentsLength = __webpack_require__(2812);\nvar toString = __webpack_require__(655);\nvar USE_NATIVE_URL = __webpack_require__(7416);\n\nvar URL = getBuiltIn('URL');\n\n// `URL.parse` method\n// https://url.spec.whatwg.org/#dom-url-canparse\n$({ target: 'URL', stat: true, forced: !USE_NATIVE_URL }, {\n  parse: function parse(url) {\n    var length = validateArgumentsLength(arguments.length, 1);\n    var urlString = toString(url);\n    var base = length < 2 || arguments[1] === undefined ? undefined : toString(arguments[1]);\n    try {\n      return new URL(urlString, base);\n    } catch (error) {\n      return null;\n    }\n  }\n});\n\n\n/***/ }),\n\n/***/ 5854:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toPrimitive = __webpack_require__(2777);\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n\n\n/***/ }),\n\n/***/ 5876:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar isSubsetOf = __webpack_require__(3838);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n\n\n/***/ }),\n\n/***/ 5917:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar fails = __webpack_require__(9039);\nvar createElement = __webpack_require__(4055);\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n\n\n/***/ }),\n\n/***/ 5966:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aCallable = __webpack_require__(9306);\nvar isNullOrUndefined = __webpack_require__(4117);\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n\n\n/***/ }),\n\n/***/ 6043:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aCallable = __webpack_require__(9306);\n\nvar $TypeError = TypeError;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw new $TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n/***/ }),\n\n/***/ 6080:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(7476);\nvar aCallable = __webpack_require__(9306);\nvar NATIVE_BIND = __webpack_require__(616);\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/***/ }),\n\n/***/ 6119:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar shared = __webpack_require__(5745);\nvar uid = __webpack_require__(3392);\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n/***/ }),\n\n/***/ 6193:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar ENVIRONMENT = __webpack_require__(4215);\n\nmodule.exports = ENVIRONMENT === 'NODE';\n\n\n/***/ }),\n\n/***/ 6198:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toLength = __webpack_require__(8014);\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n\n\n/***/ }),\n\n/***/ 6269:\n/***/ ((module) => {\n\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 6279:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar defineBuiltIn = __webpack_require__(6840);\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) defineBuiltIn(target, key, src[key], options);\n  return target;\n};\n\n\n/***/ }),\n\n/***/ 6319:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar anObject = __webpack_require__(8551);\nvar iteratorClose = __webpack_require__(9539);\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n\n\n/***/ }),\n\n/***/ 6395:\n/***/ ((module) => {\n\n\nmodule.exports = false;\n\n\n/***/ }),\n\n/***/ 6518:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar getOwnPropertyDescriptor = (__webpack_require__(7347).f);\nvar createNonEnumerableProperty = __webpack_require__(6699);\nvar defineBuiltIn = __webpack_require__(6840);\nvar defineGlobalProperty = __webpack_require__(9433);\nvar copyConstructorProperties = __webpack_require__(7740);\nvar isForced = __webpack_require__(2796);\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n\n\n/***/ }),\n\n/***/ 6573:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar defineBuiltInAccessor = __webpack_require__(2106);\nvar isDetached = __webpack_require__(3238);\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\n// `ArrayBuffer.prototype.detached` getter\n// https://tc39.es/ecma262/#sec-get-arraybuffer.prototype.detached\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n\n\n/***/ }),\n\n/***/ 6632:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar $fromBase64 = __webpack_require__(9143);\nvar anUint8Array = __webpack_require__(4154);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.setFromBase64 || !function () {\n  var target = new Uint8Array([255, 255, 255, 255, 255]);\n  try {\n    target.setFromBase64('', null);\n    return;\n  } catch (error) { /* empty */ }\n  // Webkit not throw an error on odd length string\n  try {\n    target.setFromBase64('a');\n    return;\n  } catch (error) { /* empty */ }\n  try {\n    target.setFromBase64('MjYyZg===');\n  } catch (error) {\n    return target[0] === 50 && target[1] === 54 && target[2] === 50 && target[3] === 255 && target[4] === 255;\n  }\n}();\n\n// `Uint8Array.prototype.setFromBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  setFromBase64: function setFromBase64(string /* , options */) {\n    anUint8Array(this);\n\n    var result = $fromBase64(string, arguments.length > 1 ? arguments[1] : undefined, this, this.length);\n\n    return { read: result.read, written: result.written };\n  }\n});\n\n\n/***/ }),\n\n/***/ 6699:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar definePropertyModule = __webpack_require__(4913);\nvar createPropertyDescriptor = __webpack_require__(6980);\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n\n/***/ 6706:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar aCallable = __webpack_require__(9306);\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n\n\n/***/ }),\n\n/***/ 6801:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(8686);\nvar definePropertyModule = __webpack_require__(4913);\nvar anObject = __webpack_require__(8551);\nvar toIndexedObject = __webpack_require__(5397);\nvar objectKeys = __webpack_require__(1072);\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 6823:\n/***/ ((module) => {\n\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\n\n/***/ }),\n\n/***/ 6837:\n/***/ ((module) => {\n\n\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 6840:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(4901);\nvar definePropertyModule = __webpack_require__(4913);\nvar makeBuiltIn = __webpack_require__(283);\nvar defineGlobalProperty = __webpack_require__(9433);\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n\n\n/***/ }),\n\n/***/ 6955:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(2140);\nvar isCallable = __webpack_require__(4901);\nvar classofRaw = __webpack_require__(2195);\nvar wellKnownSymbol = __webpack_require__(8227);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\n\n/***/ }),\n\n/***/ 6969:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toPrimitive = __webpack_require__(2777);\nvar isSymbol = __webpack_require__(757);\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\n\n/***/ }),\n\n/***/ 6980:\n/***/ ((module) => {\n\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n\n/***/ 7040:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\nmodule.exports = NATIVE_SYMBOL &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n\n\n/***/ }),\n\n/***/ 7055:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar fails = __webpack_require__(9039);\nvar classof = __webpack_require__(2195);\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n\n\n/***/ }),\n\n/***/ 7080:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar has = (__webpack_require__(4402).has);\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 7347:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar call = __webpack_require__(9565);\nvar propertyIsEnumerableModule = __webpack_require__(8773);\nvar createPropertyDescriptor = __webpack_require__(6980);\nvar toIndexedObject = __webpack_require__(5397);\nvar toPropertyKey = __webpack_require__(6969);\nvar hasOwn = __webpack_require__(9297);\nvar IE8_DOM_DEFINE = __webpack_require__(5917);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\n\n/***/ }),\n\n/***/ 7394:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar uncurryThisAccessor = __webpack_require__(6706);\nvar classof = __webpack_require__(2195);\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n\n\n/***/ }),\n\n/***/ 7416:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\nvar wellKnownSymbol = __webpack_require__(8227);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar IS_PURE = __webpack_require__(6395);\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'https://a');\n  var params = url.searchParams;\n  var params2 = new URLSearchParams('a=1&a=2&b=3');\n  var result = '';\n  url.pathname = 'c%20d';\n  params.forEach(function (value, key) {\n    params['delete']('b');\n    result += key + value;\n  });\n  params2['delete']('a', 2);\n  // `undefined` case is a Chromium 117 bug\n  // https://bugs.chromium.org/p/v8/issues/detail?id=14222\n  params2['delete']('b', undefined);\n  return (IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')))\n    || (!params.size && (IS_PURE || !DESCRIPTORS))\n    || !params.sort\n    || url.href !== 'https://a/c%20d?a=1&c=3'\n    || params.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !params[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('https://').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('https://a#').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('https://x', undefined).host !== 'x';\n});\n\n\n/***/ }),\n\n/***/ 7476:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar classofRaw = __webpack_require__(2195);\nvar uncurryThis = __webpack_require__(9504);\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n\n\n/***/ }),\n\n/***/ 7566:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar defineBuiltIn = __webpack_require__(6840);\nvar uncurryThis = __webpack_require__(9504);\nvar toString = __webpack_require__(655);\nvar validateArgumentsLength = __webpack_require__(2812);\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n\n\n/***/ }),\n\n/***/ 7588:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar iterate = __webpack_require__(2652);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\n\nvar forEachWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('forEach', TypeError);\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true, forced: forEachWithoutClosingOnEarlyError }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    try {\n      aCallable(fn);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (forEachWithoutClosingOnEarlyError) return call(forEachWithoutClosingOnEarlyError, this, fn);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n\n\n/***/ }),\n\n/***/ 7629:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar IS_PURE = __webpack_require__(6395);\nvar globalThis = __webpack_require__(4576);\nvar defineGlobalProperty = __webpack_require__(9433);\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.45.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2025 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\n\n/***/ }),\n\n/***/ 7642:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar difference = __webpack_require__(3440);\nvar fails = __webpack_require__(9039);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar SET_LIKE_INCORRECT_BEHAVIOR = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\nvar FORCED = SET_LIKE_INCORRECT_BEHAVIOR || fails(function () {\n  // https://bugs.webkit.org/show_bug.cgi?id=288595\n  var setLike = {\n    size: 1,\n    has: function () { return true; },\n    keys: function () {\n      var index = 0;\n      return {\n        next: function () {\n          var done = index++ > 1;\n          if (baseSet.has(1)) baseSet.clear();\n          return { done: done, value: 2 };\n        }\n      };\n    }\n  };\n  // eslint-disable-next-line es/no-set -- testing\n  var baseSet = new Set([1, 2, 3, 4]);\n  // eslint-disable-next-line es/no-set-prototype-difference -- testing\n  return baseSet.difference(setLike).size !== 3;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: FORCED }, {\n  difference: difference\n});\n\n\n/***/ }),\n\n/***/ 7657:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(9039);\nvar isCallable = __webpack_require__(4901);\nvar isObject = __webpack_require__(34);\nvar create = __webpack_require__(2360);\nvar getPrototypeOf = __webpack_require__(2787);\nvar defineBuiltIn = __webpack_require__(6840);\nvar wellKnownSymbol = __webpack_require__(8227);\nvar IS_PURE = __webpack_require__(6395);\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n\n\n/***/ }),\n\n/***/ 7680:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\nmodule.exports = uncurryThis([].slice);\n\n\n/***/ }),\n\n/***/ 7696:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(1291);\nvar toLength = __webpack_require__(8014);\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n\n\n/***/ }),\n\n/***/ 7740:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar hasOwn = __webpack_require__(9297);\nvar ownKeys = __webpack_require__(5031);\nvar getOwnPropertyDescriptorModule = __webpack_require__(7347);\nvar definePropertyModule = __webpack_require__(4913);\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\n\n/***/ }),\n\n/***/ 7750:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isNullOrUndefined = __webpack_require__(4117);\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 7751:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar isCallable = __webpack_require__(4901);\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n\n\n/***/ }),\n\n/***/ 7811:\n/***/ ((module) => {\n\n\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n\n\n/***/ }),\n\n/***/ 7936:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar $transfer = __webpack_require__(5636);\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n\n\n/***/ }),\n\n/***/ 8004:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar fails = __webpack_require__(9039);\nvar intersection = __webpack_require__(8750);\nvar setMethodAcceptSetLike = __webpack_require__(4916);\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n\n\n/***/ }),\n\n/***/ 8014:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(1291);\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n/***/ }),\n\n/***/ 8100:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar $transfer = __webpack_require__(5636);\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n\n\n/***/ }),\n\n/***/ 8111:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar anInstance = __webpack_require__(679);\nvar anObject = __webpack_require__(8551);\nvar isCallable = __webpack_require__(4901);\nvar getPrototypeOf = __webpack_require__(2787);\nvar defineBuiltInAccessor = __webpack_require__(2106);\nvar createProperty = __webpack_require__(4659);\nvar fails = __webpack_require__(9039);\nvar hasOwn = __webpack_require__(9297);\nvar wellKnownSymbol = __webpack_require__(8227);\nvar IteratorPrototype = (__webpack_require__(7657).IteratorPrototype);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar IS_PURE = __webpack_require__(6395);\n\nvar CONSTRUCTOR = 'constructor';\nvar ITERATOR = 'Iterator';\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\nvar NativeIterator = globalThis[ITERATOR];\n\n// FF56- have non-standard global helper `Iterator`\nvar FORCED = IS_PURE\n  || !isCallable(NativeIterator)\n  || NativeIterator.prototype !== IteratorPrototype\n  // FF44- non-standard `Iterator` passes previous tests\n  || !fails(function () { NativeIterator({}); });\n\nvar IteratorConstructor = function Iterator() {\n  anInstance(this, IteratorPrototype);\n  if (getPrototypeOf(this) === IteratorPrototype) throw new $TypeError('Abstract class Iterator not directly constructable');\n};\n\nvar defineIteratorPrototypeAccessor = function (key, value) {\n  if (DESCRIPTORS) {\n    defineBuiltInAccessor(IteratorPrototype, key, {\n      configurable: true,\n      get: function () {\n        return value;\n      },\n      set: function (replacement) {\n        anObject(this);\n        if (this === IteratorPrototype) throw new $TypeError(\"You can't redefine this property\");\n        if (hasOwn(this, key)) this[key] = replacement;\n        else createProperty(this, key, replacement);\n      }\n    });\n  } else IteratorPrototype[key] = value;\n};\n\nif (!hasOwn(IteratorPrototype, TO_STRING_TAG)) defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);\n\nif (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {\n  defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);\n}\n\nIteratorConstructor.prototype = IteratorPrototype;\n\n// `Iterator` constructor\n// https://tc39.es/ecma262/#sec-iterator\n$({ global: true, constructor: true, forced: FORCED }, {\n  Iterator: IteratorConstructor\n});\n\n\n/***/ }),\n\n/***/ 8227:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar shared = __webpack_require__(5745);\nvar hasOwn = __webpack_require__(9297);\nvar uid = __webpack_require__(3392);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\nvar USE_SYMBOL_AS_UID = __webpack_require__(7040);\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n\n\n/***/ }),\n\n/***/ 8235:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar hasOwn = __webpack_require__(9297);\n\nvar $SyntaxError = SyntaxError;\nvar $parseInt = parseInt;\nvar fromCharCode = String.fromCharCode;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\n\nvar codePoints = {\n  '\\\\\"': '\"',\n  '\\\\\\\\': '\\\\',\n  '\\\\/': '/',\n  '\\\\b': '\\b',\n  '\\\\f': '\\f',\n  '\\\\n': '\\n',\n  '\\\\r': '\\r',\n  '\\\\t': '\\t'\n};\n\nvar IS_4_HEX_DIGITS = /^[\\da-f]{4}$/i;\n// eslint-disable-next-line regexp/no-control-character -- safe\nvar IS_C0_CONTROL_CODE = /^[\\u0000-\\u001F]$/;\n\nmodule.exports = function (source, i) {\n  var unterminated = true;\n  var value = '';\n  while (i < source.length) {\n    var chr = at(source, i);\n    if (chr === '\\\\') {\n      var twoChars = slice(source, i, i + 2);\n      if (hasOwn(codePoints, twoChars)) {\n        value += codePoints[twoChars];\n        i += 2;\n      } else if (twoChars === '\\\\u') {\n        i += 2;\n        var fourHexDigits = slice(source, i, i + 4);\n        if (!exec(IS_4_HEX_DIGITS, fourHexDigits)) throw new $SyntaxError('Bad Unicode escape at: ' + i);\n        value += fromCharCode($parseInt(fourHexDigits, 16));\n        i += 4;\n      } else throw new $SyntaxError('Unknown escape sequence: \"' + twoChars + '\"');\n    } else if (chr === '\"') {\n      unterminated = false;\n      i++;\n      break;\n    } else {\n      if (exec(IS_C0_CONTROL_CODE, chr)) throw new $SyntaxError('Bad control character in string literal at: ' + i);\n      value += chr;\n      i++;\n    }\n  }\n  if (unterminated) throw new $SyntaxError('Unterminated string at: ' + i);\n  return { value: value, end: i };\n};\n\n\n/***/ }),\n\n/***/ 8237:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar iterate = __webpack_require__(2652);\nvar aCallable = __webpack_require__(9306);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\nvar apply = __webpack_require__(8745);\nvar fails = __webpack_require__(9039);\n\nvar $TypeError = TypeError;\n\n// https://bugs.webkit.org/show_bug.cgi?id=291651\nvar FAILS_ON_INITIAL_UNDEFINED = fails(function () {\n  // eslint-disable-next-line es/no-iterator-prototype-reduce, es/no-array-prototype-keys, array-callback-return -- required for testing\n  [].keys().reduce(function () { /* empty */ }, undefined);\n});\n\nvar reduceWithoutClosingOnEarlyError = !FAILS_ON_INITIAL_UNDEFINED && iteratorHelperWithoutClosingOnEarlyError('reduce', $TypeError);\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true, forced: FAILS_ON_INITIAL_UNDEFINED || reduceWithoutClosingOnEarlyError }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    try {\n      aCallable(reducer);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    if (reduceWithoutClosingOnEarlyError) {\n      return apply(reduceWithoutClosingOnEarlyError, this, noInitial ? [reducer] : [reducer, accumulator]);\n    }\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n\n\n/***/ }),\n\n/***/ 8335:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar DESCRIPTORS = __webpack_require__(3724);\nvar globalThis = __webpack_require__(4576);\nvar getBuiltIn = __webpack_require__(7751);\nvar uncurryThis = __webpack_require__(9504);\nvar call = __webpack_require__(9565);\nvar isCallable = __webpack_require__(4901);\nvar isObject = __webpack_require__(34);\nvar isArray = __webpack_require__(4376);\nvar hasOwn = __webpack_require__(9297);\nvar toString = __webpack_require__(655);\nvar lengthOfArrayLike = __webpack_require__(6198);\nvar createProperty = __webpack_require__(4659);\nvar fails = __webpack_require__(9039);\nvar parseJSONString = __webpack_require__(8235);\nvar NATIVE_SYMBOL = __webpack_require__(4495);\n\nvar JSON = globalThis.JSON;\nvar Number = globalThis.Number;\nvar SyntaxError = globalThis.SyntaxError;\nvar nativeParse = JSON && JSON.parse;\nvar enumerableOwnProperties = getBuiltIn('Object', 'keys');\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar at = uncurryThis(''.charAt);\nvar slice = uncurryThis(''.slice);\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis([].push);\n\nvar IS_DIGIT = /^\\d$/;\nvar IS_NON_ZERO_DIGIT = /^[1-9]$/;\nvar IS_NUMBER_START = /^[\\d-]$/;\nvar IS_WHITESPACE = /^[\\t\\n\\r ]$/;\n\nvar PRIMITIVE = 0;\nvar OBJECT = 1;\n\nvar $parse = function (source, reviver) {\n  source = toString(source);\n  var context = new Context(source, 0, '');\n  var root = context.parse();\n  var value = root.value;\n  var endIndex = context.skip(IS_WHITESPACE, root.end);\n  if (endIndex < source.length) {\n    throw new SyntaxError('Unexpected extra character: \"' + at(source, endIndex) + '\" after the parsed data at: ' + endIndex);\n  }\n  return isCallable(reviver) ? internalize({ '': value }, '', reviver, root) : value;\n};\n\nvar internalize = function (holder, name, reviver, node) {\n  var val = holder[name];\n  var unmodified = node && val === node.value;\n  var context = unmodified && typeof node.source == 'string' ? { source: node.source } : {};\n  var elementRecordsLen, keys, len, i, P;\n  if (isObject(val)) {\n    var nodeIsArray = isArray(val);\n    var nodes = unmodified ? node.nodes : nodeIsArray ? [] : {};\n    if (nodeIsArray) {\n      elementRecordsLen = nodes.length;\n      len = lengthOfArrayLike(val);\n      for (i = 0; i < len; i++) {\n        internalizeProperty(val, i, internalize(val, '' + i, reviver, i < elementRecordsLen ? nodes[i] : undefined));\n      }\n    } else {\n      keys = enumerableOwnProperties(val);\n      len = lengthOfArrayLike(keys);\n      for (i = 0; i < len; i++) {\n        P = keys[i];\n        internalizeProperty(val, P, internalize(val, P, reviver, hasOwn(nodes, P) ? nodes[P] : undefined));\n      }\n    }\n  }\n  return call(reviver, holder, name, val, context);\n};\n\nvar internalizeProperty = function (object, key, value) {\n  if (DESCRIPTORS) {\n    var descriptor = getOwnPropertyDescriptor(object, key);\n    if (descriptor && !descriptor.configurable) return;\n  }\n  if (value === undefined) delete object[key];\n  else createProperty(object, key, value);\n};\n\nvar Node = function (value, end, source, nodes) {\n  this.value = value;\n  this.end = end;\n  this.source = source;\n  this.nodes = nodes;\n};\n\nvar Context = function (source, index) {\n  this.source = source;\n  this.index = index;\n};\n\n// https://www.json.org/json-en.html\nContext.prototype = {\n  fork: function (nextIndex) {\n    return new Context(this.source, nextIndex);\n  },\n  parse: function () {\n    var source = this.source;\n    var i = this.skip(IS_WHITESPACE, this.index);\n    var fork = this.fork(i);\n    var chr = at(source, i);\n    if (exec(IS_NUMBER_START, chr)) return fork.number();\n    switch (chr) {\n      case '{':\n        return fork.object();\n      case '[':\n        return fork.array();\n      case '\"':\n        return fork.string();\n      case 't':\n        return fork.keyword(true);\n      case 'f':\n        return fork.keyword(false);\n      case 'n':\n        return fork.keyword(null);\n    } throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  },\n  node: function (type, value, start, end, nodes) {\n    return new Node(value, end, type ? null : slice(this.source, start, end), nodes);\n  },\n  object: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectKeypair = false;\n    var object = {};\n    var nodes = {};\n    while (i < source.length) {\n      i = this.until(['\"', '}'], i);\n      if (at(source, i) === '}' && !expectKeypair) {\n        i++;\n        break;\n      }\n      // Parsing the key\n      var result = this.fork(i).string();\n      var key = result.value;\n      i = result.end;\n      i = this.until([':'], i) + 1;\n      // Parsing value\n      i = this.skip(IS_WHITESPACE, i);\n      result = this.fork(i).parse();\n      createProperty(nodes, key, result);\n      createProperty(object, key, result.value);\n      i = this.until([',', '}'], result.end);\n      var chr = at(source, i);\n      if (chr === ',') {\n        expectKeypair = true;\n        i++;\n      } else if (chr === '}') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, object, this.index, i, nodes);\n  },\n  array: function () {\n    var source = this.source;\n    var i = this.index + 1;\n    var expectElement = false;\n    var array = [];\n    var nodes = [];\n    while (i < source.length) {\n      i = this.skip(IS_WHITESPACE, i);\n      if (at(source, i) === ']' && !expectElement) {\n        i++;\n        break;\n      }\n      var result = this.fork(i).parse();\n      push(nodes, result);\n      push(array, result.value);\n      i = this.until([',', ']'], result.end);\n      if (at(source, i) === ',') {\n        expectElement = true;\n        i++;\n      } else if (at(source, i) === ']') {\n        i++;\n        break;\n      }\n    }\n    return this.node(OBJECT, array, this.index, i, nodes);\n  },\n  string: function () {\n    var index = this.index;\n    var parsed = parseJSONString(this.source, this.index + 1);\n    return this.node(PRIMITIVE, parsed.value, index, parsed.end);\n  },\n  number: function () {\n    var source = this.source;\n    var startIndex = this.index;\n    var i = startIndex;\n    if (at(source, i) === '-') i++;\n    if (at(source, i) === '0') i++;\n    else if (exec(IS_NON_ZERO_DIGIT, at(source, i))) i = this.skip(IS_DIGIT, i + 1);\n    else throw new SyntaxError('Failed to parse number at: ' + i);\n    if (at(source, i) === '.') i = this.skip(IS_DIGIT, i + 1);\n    if (at(source, i) === 'e' || at(source, i) === 'E') {\n      i++;\n      if (at(source, i) === '+' || at(source, i) === '-') i++;\n      var exponentStartIndex = i;\n      i = this.skip(IS_DIGIT, i);\n      if (exponentStartIndex === i) throw new SyntaxError(\"Failed to parse number's exponent value at: \" + i);\n    }\n    return this.node(PRIMITIVE, Number(slice(source, startIndex, i)), startIndex, i);\n  },\n  keyword: function (value) {\n    var keyword = '' + value;\n    var index = this.index;\n    var endIndex = index + keyword.length;\n    if (slice(this.source, index, endIndex) !== keyword) throw new SyntaxError('Failed to parse value at: ' + index);\n    return this.node(PRIMITIVE, value, index, endIndex);\n  },\n  skip: function (regex, i) {\n    var source = this.source;\n    for (; i < source.length; i++) if (!exec(regex, at(source, i))) break;\n    return i;\n  },\n  until: function (array, i) {\n    i = this.skip(IS_WHITESPACE, i);\n    var chr = at(this.source, i);\n    for (var j = 0; j < array.length; j++) if (array[j] === chr) return i;\n    throw new SyntaxError('Unexpected character: \"' + chr + '\" at: ' + i);\n  }\n};\n\nvar NO_SOURCE_SUPPORT = fails(function () {\n  var unsafeInt = '9007199254740993';\n  var source;\n  nativeParse(unsafeInt, function (key, value, context) {\n    source = context.source;\n  });\n  return source !== unsafeInt;\n});\n\nvar PROPER_BASE_PARSE = NATIVE_SYMBOL && !fails(function () {\n  // Safari 9 bug\n  return 1 / nativeParse('-0 \\t') !== -Infinity;\n});\n\n// `JSON.parse` method\n// https://tc39.es/ecma262/#sec-json.parse\n// https://github.com/tc39/proposal-json-parse-with-source\n$({ target: 'JSON', stat: true, forced: NO_SOURCE_SUPPORT }, {\n  parse: function parse(text, reviver) {\n    return PROPER_BASE_PARSE && !isCallable(reviver) ? nativeParse(text) : $parse(text, reviver);\n  }\n});\n\n\n/***/ }),\n\n/***/ 8469:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar iterateSimple = __webpack_require__(507);\nvar SetHelpers = __webpack_require__(4402);\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n\n\n/***/ }),\n\n/***/ 8480:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\nvar internalObjectKeys = __webpack_require__(1828);\nvar enumBugKeys = __webpack_require__(8727);\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n/***/ }),\n\n/***/ 8527:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar has = (__webpack_require__(4402).has);\nvar size = __webpack_require__(5170);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSimple = __webpack_require__(507);\nvar iteratorClose = __webpack_require__(9539);\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n\n\n/***/ }),\n\n/***/ 8551:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isObject = __webpack_require__(34);\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n\n\n/***/ }),\n\n/***/ 8574:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable, sonarjs/slow-regex -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n\n\n/***/ }),\n\n/***/ 8622:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar isCallable = __webpack_require__(4901);\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n\n\n/***/ }),\n\n/***/ 8646:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar getIteratorMethod = __webpack_require__(851);\n\nmodule.exports = function (obj, stringHandling) {\n  if (!stringHandling || typeof obj !== 'string') anObject(obj);\n  var method = getIteratorMethod(obj);\n  return getIteratorDirect(anObject(method !== undefined ? call(method, obj) : obj));\n};\n\n\n/***/ }),\n\n/***/ 8686:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar fails = __webpack_require__(9039);\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n\n\n/***/ }),\n\n/***/ 8721:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar DESCRIPTORS = __webpack_require__(3724);\nvar uncurryThis = __webpack_require__(9504);\nvar defineBuiltInAccessor = __webpack_require__(2106);\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n\n\n/***/ }),\n\n/***/ 8727:\n/***/ ((module) => {\n\n\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n/***/ }),\n\n/***/ 8745:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_BIND = __webpack_require__(616);\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n\n\n/***/ }),\n\n/***/ 8750:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar aSet = __webpack_require__(7080);\nvar SetHelpers = __webpack_require__(4402);\nvar size = __webpack_require__(5170);\nvar getSetRecord = __webpack_require__(3789);\nvar iterateSet = __webpack_require__(8469);\nvar iterateSimple = __webpack_require__(507);\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 8773:\n/***/ ((__unused_webpack_module, exports) => {\n\n\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n\n/***/ }),\n\n/***/ 8981:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar requireObjectCoercible = __webpack_require__(7750);\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n\n\n/***/ }),\n\n/***/ 9039:\n/***/ ((module) => {\n\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 9143:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar uncurryThis = __webpack_require__(9504);\nvar anObjectOrUndefined = __webpack_require__(3972);\nvar aString = __webpack_require__(3463);\nvar hasOwn = __webpack_require__(9297);\nvar base64Map = __webpack_require__(2804);\nvar getAlphabetOption = __webpack_require__(944);\nvar notDetached = __webpack_require__(5169);\n\nvar base64Alphabet = base64Map.c2i;\nvar base64UrlAlphabet = base64Map.c2iUrl;\n\nvar SyntaxError = globalThis.SyntaxError;\nvar TypeError = globalThis.TypeError;\nvar at = uncurryThis(''.charAt);\n\nvar skipAsciiWhitespace = function (string, index) {\n  var length = string.length;\n  for (;index < length; index++) {\n    var chr = at(string, index);\n    if (chr !== ' ' && chr !== '\\t' && chr !== '\\n' && chr !== '\\f' && chr !== '\\r') break;\n  } return index;\n};\n\nvar decodeBase64Chunk = function (chunk, alphabet, throwOnExtraBits) {\n  var chunkLength = chunk.length;\n\n  if (chunkLength < 4) {\n    chunk += chunkLength === 2 ? 'AA' : 'A';\n  }\n\n  var triplet = (alphabet[at(chunk, 0)] << 18)\n    + (alphabet[at(chunk, 1)] << 12)\n    + (alphabet[at(chunk, 2)] << 6)\n    + alphabet[at(chunk, 3)];\n\n  var chunkBytes = [\n    (triplet >> 16) & 255,\n    (triplet >> 8) & 255,\n    triplet & 255\n  ];\n\n  if (chunkLength === 2) {\n    if (throwOnExtraBits && chunkBytes[1] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0]];\n  }\n\n  if (chunkLength === 3) {\n    if (throwOnExtraBits && chunkBytes[2] !== 0) {\n      throw new SyntaxError('Extra bits');\n    }\n    return [chunkBytes[0], chunkBytes[1]];\n  }\n\n  return chunkBytes;\n};\n\nvar writeBytes = function (bytes, elements, written) {\n  var elementsLength = elements.length;\n  for (var index = 0; index < elementsLength; index++) {\n    bytes[written + index] = elements[index];\n  }\n  return written + elementsLength;\n};\n\n/* eslint-disable max-statements, max-depth -- TODO */\nmodule.exports = function (string, options, into, maxLength) {\n  aString(string);\n  anObjectOrUndefined(options);\n  var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n  var lastChunkHandling = options ? options.lastChunkHandling : undefined;\n\n  if (lastChunkHandling === undefined) lastChunkHandling = 'loose';\n\n  if (lastChunkHandling !== 'loose' && lastChunkHandling !== 'strict' && lastChunkHandling !== 'stop-before-partial') {\n    throw new TypeError('Incorrect `lastChunkHandling` option');\n  }\n\n  if (into) notDetached(into.buffer);\n\n  var stringLength = string.length;\n  var bytes = into || [];\n  var written = 0;\n  var read = 0;\n  var chunk = '';\n  var index = 0;\n\n  if (maxLength) while (true) {\n    index = skipAsciiWhitespace(string, index);\n    if (index === stringLength) {\n      if (chunk.length > 0) {\n        if (lastChunkHandling === 'stop-before-partial') {\n          break;\n        }\n        if (lastChunkHandling === 'loose') {\n          if (chunk.length === 1) {\n            throw new SyntaxError('Malformed padding: exactly one additional character');\n          }\n          written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n        } else {\n          throw new SyntaxError('Missing padding');\n        }\n      }\n      read = stringLength;\n      break;\n    }\n    var chr = at(string, index);\n    ++index;\n    if (chr === '=') {\n      if (chunk.length < 2) {\n        throw new SyntaxError('Padding is too early');\n      }\n      index = skipAsciiWhitespace(string, index);\n      if (chunk.length === 2) {\n        if (index === stringLength) {\n          if (lastChunkHandling === 'stop-before-partial') {\n            break;\n          }\n          throw new SyntaxError('Malformed padding: only one =');\n        }\n        if (at(string, index) === '=') {\n          ++index;\n          index = skipAsciiWhitespace(string, index);\n        }\n      }\n      if (index < stringLength) {\n        throw new SyntaxError('Unexpected character after padding');\n      }\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, lastChunkHandling === 'strict'), written);\n      read = stringLength;\n      break;\n    }\n    if (!hasOwn(alphabet, chr)) {\n      throw new SyntaxError('Unexpected character');\n    }\n    var remainingBytes = maxLength - written;\n    if (remainingBytes === 1 && chunk.length === 2 || remainingBytes === 2 && chunk.length === 3) {\n      // special case: we can fit exactly the number of bytes currently represented by chunk, so we were just checking for `=`\n      break;\n    }\n\n    chunk += chr;\n    if (chunk.length === 4) {\n      written = writeBytes(bytes, decodeBase64Chunk(chunk, alphabet, false), written);\n      chunk = '';\n      read = index;\n      if (written === maxLength) {\n        break;\n      }\n    }\n  }\n\n  return { bytes: bytes, read: read, written: written };\n};\n\n\n/***/ }),\n\n/***/ 9286:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar SetHelpers = __webpack_require__(4402);\nvar iterate = __webpack_require__(8469);\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 9297:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar uncurryThis = __webpack_require__(9504);\nvar toObject = __webpack_require__(8981);\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\n\n/***/ }),\n\n/***/ 9306:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar isCallable = __webpack_require__(4901);\nvar tryToString = __webpack_require__(6823);\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n\n\n/***/ }),\n\n/***/ 9314:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar call = __webpack_require__(9565);\nvar anObject = __webpack_require__(8551);\nvar getIteratorDirect = __webpack_require__(1767);\nvar notANaN = __webpack_require__(4149);\nvar toPositiveInteger = __webpack_require__(9590);\nvar iteratorClose = __webpack_require__(9539);\nvar createIteratorProxy = __webpack_require__(9462);\nvar iteratorHelperThrowsOnInvalidIterator = __webpack_require__(684);\nvar iteratorHelperWithoutClosingOnEarlyError = __webpack_require__(4549);\nvar IS_PURE = __webpack_require__(6395);\n\nvar DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR = !IS_PURE && !iteratorHelperThrowsOnInvalidIterator('drop', 0);\nvar dropWithoutClosingOnEarlyError = !IS_PURE && !DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR\n  && iteratorHelperWithoutClosingOnEarlyError('drop', RangeError);\n\nvar FORCED = IS_PURE || DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR || dropWithoutClosingOnEarlyError;\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var next = this.next;\n  var result, done;\n  while (this.remaining) {\n    this.remaining--;\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n  }\n  result = anObject(call(next, iterator));\n  done = this.done = !!result.done;\n  if (!done) return result.value;\n});\n\n// `Iterator.prototype.drop` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.drop\n$({ target: 'Iterator', proto: true, real: true, forced: FORCED }, {\n  drop: function drop(limit) {\n    anObject(this);\n    var remaining;\n    try {\n      remaining = toPositiveInteger(notANaN(+limit));\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (dropWithoutClosingOnEarlyError) return call(dropWithoutClosingOnEarlyError, this, remaining);\n\n    return new IteratorProxy(getIteratorDirect(this), {\n      remaining: remaining\n    });\n  }\n});\n\n\n/***/ }),\n\n/***/ 9429:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar IS_NODE = __webpack_require__(6193);\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n\n\n/***/ }),\n\n/***/ 9432:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(5213);\n\n\n/***/ }),\n\n/***/ 9433:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n\n\n/***/ }),\n\n/***/ 9462:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar create = __webpack_require__(2360);\nvar createNonEnumerableProperty = __webpack_require__(6699);\nvar defineBuiltIns = __webpack_require__(6279);\nvar wellKnownSymbol = __webpack_require__(8227);\nvar InternalStateModule = __webpack_require__(1181);\nvar getMethod = __webpack_require__(5966);\nvar IteratorPrototype = (__webpack_require__(7657).IteratorPrototype);\nvar createIterResultObject = __webpack_require__(2529);\nvar iteratorClose = __webpack_require__(9539);\nvar iteratorCloseAll = __webpack_require__(1385);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ITERATOR_HELPER = 'IteratorHelper';\nvar WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';\nvar NORMAL = 'normal';\nvar THROW = 'throw';\nvar setInternalState = InternalStateModule.set;\n\nvar createIteratorProxyPrototype = function (IS_ITERATOR) {\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);\n\n  return defineBuiltIns(create(IteratorPrototype), {\n    next: function next() {\n      var state = getInternalState(this);\n      // for simplification:\n      //   for `%WrapForValidIteratorPrototype%.next` or with `state.returnHandlerResult` our `nextHandler` returns `IterResultObject`\n      //   for `%IteratorHelperPrototype%.next` - just a value\n      if (IS_ITERATOR) return state.nextHandler();\n      if (state.done) return createIterResultObject(undefined, true);\n      try {\n        var result = state.nextHandler();\n        return state.returnHandlerResult ? result : createIterResultObject(result, state.done);\n      } catch (error) {\n        state.done = true;\n        throw error;\n      }\n    },\n    'return': function () {\n      var state = getInternalState(this);\n      var iterator = state.iterator;\n      state.done = true;\n      if (IS_ITERATOR) {\n        var returnMethod = getMethod(iterator, 'return');\n        return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);\n      }\n      if (state.inner) try {\n        iteratorClose(state.inner.iterator, NORMAL);\n      } catch (error) {\n        return iteratorClose(iterator, THROW, error);\n      }\n      if (state.openIters) try {\n        iteratorCloseAll(state.openIters, NORMAL);\n      } catch (error) {\n        return iteratorClose(iterator, THROW, error);\n      }\n      if (iterator) iteratorClose(iterator, NORMAL);\n      return createIterResultObject(undefined, true);\n    }\n  });\n};\n\nvar WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);\nvar IteratorHelperPrototype = createIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR, RETURN_HANDLER_RESULT) {\n  var IteratorProxy = function Iterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;\n    state.returnHandlerResult = !!RETURN_HANDLER_RESULT;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;\n\n  return IteratorProxy;\n};\n\n\n/***/ }),\n\n/***/ 9486:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(6518);\nvar globalThis = __webpack_require__(4576);\nvar uncurryThis = __webpack_require__(9504);\nvar anObjectOrUndefined = __webpack_require__(3972);\nvar anUint8Array = __webpack_require__(4154);\nvar notDetached = __webpack_require__(5169);\nvar base64Map = __webpack_require__(2804);\nvar getAlphabetOption = __webpack_require__(944);\n\nvar base64Alphabet = base64Map.i2c;\nvar base64UrlAlphabet = base64Map.i2cUrl;\n\nvar charAt = uncurryThis(''.charAt);\n\nvar Uint8Array = globalThis.Uint8Array;\n\nvar INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS = !Uint8Array || !Uint8Array.prototype.toBase64 || !function () {\n  try {\n    var target = new Uint8Array();\n    target.toBase64(null);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `Uint8Array.prototype.toBase64` method\n// https://github.com/tc39/proposal-arraybuffer-base64\nif (Uint8Array) $({ target: 'Uint8Array', proto: true, forced: INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS }, {\n  toBase64: function toBase64(/* options */) {\n    var array = anUint8Array(this);\n    var options = arguments.length ? anObjectOrUndefined(arguments[0]) : undefined;\n    var alphabet = getAlphabetOption(options) === 'base64' ? base64Alphabet : base64UrlAlphabet;\n    var omitPadding = !!options && !!options.omitPadding;\n    notDetached(this.buffer);\n\n    var result = '';\n    var i = 0;\n    var length = array.length;\n    var triplet;\n\n    var at = function (shift) {\n      return charAt(alphabet, (triplet >> (6 * shift)) & 63);\n    };\n\n    for (; i + 2 < length; i += 3) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8) + array[i + 2];\n      result += at(3) + at(2) + at(1) + at(0);\n    }\n    if (i + 2 === length) {\n      triplet = (array[i] << 16) + (array[i + 1] << 8);\n      result += at(3) + at(2) + at(1) + (omitPadding ? '' : '=');\n    } else if (i + 1 === length) {\n      triplet = array[i] << 16;\n      result += at(3) + at(2) + (omitPadding ? '' : '==');\n    }\n\n    return result;\n  }\n});\n\n\n/***/ }),\n\n/***/ 9504:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_BIND = __webpack_require__(616);\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n\n\n/***/ }),\n\n/***/ 9519:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar globalThis = __webpack_require__(4576);\nvar userAgent = __webpack_require__(2839);\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n\n\n/***/ }),\n\n/***/ 9539:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar call = __webpack_require__(9565);\nvar anObject = __webpack_require__(8551);\nvar getMethod = __webpack_require__(5966);\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n\n\n/***/ }),\n\n/***/ 9565:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar NATIVE_BIND = __webpack_require__(616);\n\nvar call = Function.prototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n\n\n/***/ }),\n\n/***/ 9577:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar arrayWith = __webpack_require__(9928);\nvar ArrayBufferViewCore = __webpack_require__(4644);\nvar isBigIntArray = __webpack_require__(1108);\nvar toIntegerOrInfinity = __webpack_require__(1291);\nvar toBigInt = __webpack_require__(5854);\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// Bug in WebKit. It should truncate a negative fractional index to zero, but instead throws an error\nvar THROW_ON_NEGATIVE_FRACTIONAL_INDEX = PROPER_ORDER && function () {\n  try {\n    // eslint-disable-next-line es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](-0.5, 1);\n  } catch (error) {\n    return true;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER || THROW_ON_NEGATIVE_FRACTIONAL_INDEX);\n\n\n/***/ }),\n\n/***/ 9590:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIntegerOrInfinity = __webpack_require__(1291);\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw new $RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 9617:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toIndexedObject = __webpack_require__(5397);\nvar toAbsoluteIndex = __webpack_require__(5610);\nvar lengthOfArrayLike = __webpack_require__(6198);\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n/***/ }),\n\n/***/ 9631:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(9486);\n\n\n/***/ }),\n\n/***/ 9797:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\n// TODO: Remove from `core-js@4`\n__webpack_require__(4226);\n\n\n/***/ }),\n\n/***/ 9835:\n/***/ ((module) => {\n\n\n// Should get iterator record of a set-like object before cloning this\n// https://bugs.webkit.org/show_bug.cgi?id=289430\nmodule.exports = function (METHOD_NAME) {\n  try {\n    // eslint-disable-next-line es/no-set -- needed for test\n    var baseSet = new Set();\n    var setLike = {\n      size: 0,\n      has: function () { return true; },\n      keys: function () {\n        // eslint-disable-next-line es/no-object-defineproperty -- needed for test\n        return Object.defineProperty({}, 'next', {\n          get: function () {\n            baseSet.clear();\n            baseSet.add(4);\n            return function () {\n              return { done: true };\n            };\n          }\n        });\n      }\n    };\n    var result = baseSet[METHOD_NAME](setLike);\n\n    return result.size === 1 && result.values().next().value === 4;\n  } catch (error) {\n    return false;\n  }\n};\n\n\n/***/ }),\n\n/***/ 9928:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar lengthOfArrayLike = __webpack_require__(6198);\nvar toIntegerOrInfinity = __webpack_require__(1291);\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/ecma262/#sec-array.prototype.with\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n\n\n/***/ })\n\n/******/ });\n/************************************************************************/\n/******/ // The module cache\n/******/ var __webpack_module_cache__ = {};\n/******/ \n/******/ // The require function\n/******/ function __webpack_require__(moduleId) {\n/******/ \t// Check if module is in cache\n/******/ \tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \tif (cachedModule !== undefined) {\n/******/ \t\treturn cachedModule.exports;\n/******/ \t}\n/******/ \t// Create a new module (and put it into the cache)\n/******/ \tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t// no module.id needed\n/******/ \t\t// no module.loaded needed\n/******/ \t\texports: {}\n/******/ \t};\n/******/ \n/******/ \t// Execute the module function\n/******/ \t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \n/******/ \t// Return the exports of the module\n/******/ \treturn module.exports;\n/******/ }\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = {};\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js\nvar es_array_push = __webpack_require__(4114);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.detached.js\nvar es_array_buffer_detached = __webpack_require__(6573);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.transfer.js\nvar es_array_buffer_transfer = __webpack_require__(8100);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js\nvar es_array_buffer_transfer_to_fixed_length = __webpack_require__(7936);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.constructor.js\nvar es_iterator_constructor = __webpack_require__(8111);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.reduce.js\nvar es_iterator_reduce = __webpack_require__(8237);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.try.js\nvar es_promise_try = __webpack_require__(1689);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.with.js\nvar es_typed_array_with = __webpack_require__(9577);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.math.sum-precise.js\nvar esnext_math_sum_precise = __webpack_require__(4235);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.uint8-array.from-base64.js\nvar esnext_uint8_array_from_base64 = __webpack_require__(9432);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.uint8-array.set-from-base64.js\nvar esnext_uint8_array_set_from_base64 = __webpack_require__(1549);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.uint8-array.set-from-hex.js\nvar esnext_uint8_array_set_from_hex = __webpack_require__(9797);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.uint8-array.to-base64.js\nvar esnext_uint8_array_to_base64 = __webpack_require__(9631);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.uint8-array.to-hex.js\nvar esnext_uint8_array_to_hex = __webpack_require__(5623);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.stack.js\nvar web_dom_exception_stack = __webpack_require__(4979);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.parse.js\nvar web_url_parse = __webpack_require__(5781);\n;// ./src/shared/util.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  POPUP: 16,\n  SIGNATURE: 101,\n  COMMENT: 102\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_THICKNESS: 32,\n  HIGHLIGHT_FREE: 33,\n  HIGHLIGHT_SHOW_ALL: 34,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.info(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.warn(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static domMatrixToTransform(dm) {\n    return [dm.a, dm.b, dm.c, dm.d, dm.e, dm.f];\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static multiplyByDOMMatrix(m, md) {\n    return [m[0] * md.a + m[2] * md.b, m[1] * md.a + m[3] * md.b, m[0] * md.c + m[2] * md.d, m[1] * md.c + m[3] * md.d, m[0] * md.e + m[2] * md.f + m[4], m[1] * md.e + m[3] * md.f + m[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  if (!(date instanceof Date)) {\n    date = new Date(date);\n  }\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\nif (typeof AbortSignal.any !== \"function\") {\n  AbortSignal.any = function (iterable) {\n    const ac = new AbortController();\n    const {\n      signal\n    } = ac;\n    for (const s of iterable) {\n      if (s.aborted) {\n        ac.abort(s.reason);\n        return signal;\n      }\n    }\n    for (const s of iterable) {\n      s.addEventListener(\"abort\", () => {\n        ac.abort(s.reason);\n      }, {\n        signal\n      });\n    }\n    return signal;\n  };\n}\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.map.js\nvar es_iterator_map = __webpack_require__(1701);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.delete.js\nvar web_url_search_params_delete = __webpack_require__(4603);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.has.js\nvar web_url_search_params_has = __webpack_require__(7566);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.size.js\nvar web_url_search_params_size = __webpack_require__(8721);\n;// ./src/display/xfa_text.js\n\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/display_utils.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const getURL = urlString => {\n    try {\n      return new URL(urlString);\n    } catch {\n      try {\n        return new URL(decodeURIComponent(urlString));\n      } catch {\n        try {\n          return new URL(urlString, \"https://foo.bar\");\n        } catch {\n          try {\n            return new URL(decodeURIComponent(urlString), \"https://foo.bar\");\n          } catch {\n            return null;\n          }\n        }\n      }\n    }\n  };\n  const newURL = getURL(url);\n  if (!newURL) {\n    return defaultFilename;\n  }\n  const decode = name => {\n    try {\n      let decoded = decodeURIComponent(name);\n      if (decoded.includes(\"/\")) {\n        decoded = decoded.split(\"/\").at(-1);\n        if (decoded.test(/^\\.pdf$/i)) {\n          return decoded;\n        }\n        return name;\n      }\n      return decoded;\n    } catch {\n      return name;\n    }\n  };\n  const pdfRegex = /\\.pdf$/i;\n  const filename = newURL.pathname.split(\"/\").at(-1);\n  if (pdfRegex.test(filename)) {\n    return decode(filename);\n  }\n  if (newURL.searchParams.size > 0) {\n    const values = Array.from(newURL.searchParams.values()).reverse();\n    for (const value of values) {\n      if (pdfRegex.test(value)) {\n        return decode(value);\n      }\n    }\n    const keys = Array.from(newURL.searchParams.keys()).reverse();\n    for (const key of keys) {\n      if (pdfRegex.test(key)) {\n        return decode(key);\n      }\n    }\n  }\n  if (newURL.hash) {\n    const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n    const hashFilename = reFilename.exec(newURL.hash);\n    if (hashFilename) {\n      return decode(hashFilename[0]);\n    }\n  }\n  return defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (input instanceof Date) {\n      return input;\n    }\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\nclass ColorScheme {\n  static get isDarkMode() {\n    return shadow(this, \"isDarkMode\", !!window?.matchMedia?.(\"(prefers-color-scheme: dark)\").matches);\n  }\n}\nclass CSSConstants {\n  static get commentForegroundColor() {\n    const element = document.createElement(\"span\");\n    element.classList.add(\"comment\", \"sidebar\");\n    const {\n      style\n    } = element;\n    style.width = style.height = \"0\";\n    style.display = \"none\";\n    style.color = \"var(--comment-fg-color)\";\n    document.body.append(element);\n    const {\n      color\n    } = window.getComputedStyle(element);\n    element.remove();\n    return shadow(this, \"commentForegroundColor\", getRGB(color));\n  }\n}\nfunction applyOpacity(r, g, b, opacity) {\n  opacity = Math.min(Math.max(opacity ?? 1, 0), 1);\n  const white = 255 * (1 - opacity);\n  r = Math.round(r * opacity + white);\n  g = Math.round(g * opacity + white);\n  b = Math.round(b * opacity + white);\n  return [r, g, b];\n}\nfunction RGBToHSL(rgb, output) {\n  const r = rgb[0] / 255;\n  const g = rgb[1] / 255;\n  const b = rgb[2] / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  if (max === min) {\n    output[0] = output[1] = 0;\n  } else {\n    const d = max - min;\n    output[1] = l < 0.5 ? d / (max + min) : d / (2 - max - min);\n    switch (max) {\n      case r:\n        output[0] = ((g - b) / d + (g < b ? 6 : 0)) * 60;\n        break;\n      case g:\n        output[0] = ((b - r) / d + 2) * 60;\n        break;\n      case b:\n        output[0] = ((r - g) / d + 4) * 60;\n        break;\n    }\n  }\n  output[2] = l;\n}\nfunction HSLToRGB(hsl, output) {\n  const h = hsl[0];\n  const s = hsl[1];\n  const l = hsl[2];\n  const c = (1 - Math.abs(2 * l - 1)) * s;\n  const x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  const m = l - c / 2;\n  switch (Math.floor(h / 60)) {\n    case 0:\n      output[0] = c + m;\n      output[1] = x + m;\n      output[2] = m;\n      break;\n    case 1:\n      output[0] = x + m;\n      output[1] = c + m;\n      output[2] = m;\n      break;\n    case 2:\n      output[0] = m;\n      output[1] = c + m;\n      output[2] = x + m;\n      break;\n    case 3:\n      output[0] = m;\n      output[1] = x + m;\n      output[2] = c + m;\n      break;\n    case 4:\n      output[0] = x + m;\n      output[1] = m;\n      output[2] = c + m;\n      break;\n    case 5:\n    case 6:\n      output[0] = c + m;\n      output[1] = m;\n      output[2] = x + m;\n      break;\n  }\n}\nfunction computeLuminance(x) {\n  return x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n}\nfunction contrastRatio(hsl1, hsl2, output) {\n  HSLToRGB(hsl1, output);\n  output.map(computeLuminance);\n  const lum1 = 0.2126 * output[0] + 0.7152 * output[1] + 0.0722 * output[2];\n  HSLToRGB(hsl2, output);\n  output.map(computeLuminance);\n  const lum2 = 0.2126 * output[0] + 0.7152 * output[1] + 0.0722 * output[2];\n  return lum1 > lum2 ? (lum1 + 0.05) / (lum2 + 0.05) : (lum2 + 0.05) / (lum1 + 0.05);\n}\nconst contrastCache = new Map();\nfunction findContrastColor(baseColor, fixedColor) {\n  const key = baseColor[0] + baseColor[1] * 0x100 + baseColor[2] * 0x10000 + fixedColor[0] * 0x1000000 + fixedColor[1] * 0x100000000 + fixedColor[2] * 0x10000000000;\n  let cachedValue = contrastCache.get(key);\n  if (cachedValue) {\n    return cachedValue;\n  }\n  const array = new Float32Array(9);\n  const output = array.subarray(0, 3);\n  const baseHSL = array.subarray(3, 6);\n  RGBToHSL(baseColor, baseHSL);\n  const fixedHSL = array.subarray(6, 9);\n  RGBToHSL(fixedColor, fixedHSL);\n  const isFixedColorDark = fixedHSL[2] < 0.5;\n  const minContrast = isFixedColorDark ? 12 : 4.5;\n  baseHSL[2] = isFixedColorDark ? Math.sqrt(baseHSL[2]) : 1 - Math.sqrt(1 - baseHSL[2]);\n  if (contrastRatio(baseHSL, fixedHSL, output) < minContrast) {\n    let start, end;\n    if (isFixedColorDark) {\n      start = baseHSL[2];\n      end = 1;\n    } else {\n      start = 0;\n      end = baseHSL[2];\n    }\n    const PRECISION = 0.005;\n    while (end - start > PRECISION) {\n      const mid = baseHSL[2] = (start + end) / 2;\n      if (isFixedColorDark === contrastRatio(baseHSL, fixedHSL, output) < minContrast) {\n        start = mid;\n      } else {\n        end = mid;\n      }\n    }\n    baseHSL[2] = isFixedColorDark ? end : start;\n  }\n  HSLToRGB(baseHSL, output);\n  cachedValue = Util.makeHexColor(Math.round(output[0] * 255), Math.round(output[1] * 255), Math.round(output[2] * 255));\n  contrastCache.set(key, cachedValue);\n  return cachedValue;\n}\nfunction renderRichText({\n  html,\n  dir,\n  className\n}, container) {\n  const fragment = document.createDocumentFragment();\n  if (typeof html === \"string\") {\n    const p = document.createElement(\"p\");\n    p.dir = dir || \"auto\";\n    const lines = html.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    fragment.append(p);\n  } else {\n    XfaLayer.render({\n      xfaHtml: html,\n      div: fragment,\n      intent: \"richText\"\n    });\n  }\n  fragment.firstChild.classList.add(\"richText\", className);\n  container.append(fragment);\n}\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.take.js\nvar es_iterator_take = __webpack_require__(4972);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.with-resolvers.js\nvar es_promise_with_resolvers = __webpack_require__(4628);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.difference.v2.js\nvar es_set_difference_v2 = __webpack_require__(7642);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.intersection.v2.js\nvar es_set_intersection_v2 = __webpack_require__(8004);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js\nvar es_set_is_disjoint_from_v2 = __webpack_require__(3853);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.is-subset-of.v2.js\nvar es_set_is_subset_of_v2 = __webpack_require__(5876);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.is-superset-of.v2.js\nvar es_set_is_superset_of_v2 = __webpack_require__(2475);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.symmetric-difference.v2.js\nvar es_set_symmetric_difference_v2 = __webpack_require__(5024);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.union.v2.js\nvar es_set_union_v2 = __webpack_require__(1698);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.drop.js\nvar es_iterator_drop = __webpack_require__(9314);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.every.js\nvar es_iterator_every = __webpack_require__(1148);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.some.js\nvar es_iterator_some = __webpack_require__(3579);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.json.parse.js\nvar esnext_json_parse = __webpack_require__(8335);\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #comment = null;\n  #commentButtonDivider = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n        signal\n      });\n    }\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    if (!(signal instanceof AbortSignal) || signal.aborted) {\n      return false;\n    }\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    return true;\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n    this.#comment?.shown();\n  }\n  addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.classList.add(\"basic\", \"deleteButton\");\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    if (this.#addListenersToElement(button)) {\n      button.addEventListener(\"click\", e => {\n        _uiManager.delete();\n      }, {\n        signal: _uiManager._signal\n      });\n    }\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n    this.#altText = altText;\n  }\n  addComment(comment, beforeElement = null) {\n    if (this.#comment) {\n      return;\n    }\n    const button = comment.renderForToolbar();\n    if (!button) {\n      return;\n    }\n    this.#addListenersToElement(button);\n    const divider = this.#commentButtonDivider = this.#divider;\n    if (!beforeElement) {\n      this.#buttons.append(button, divider);\n    } else {\n      this.#buttons.insertBefore(button, beforeElement);\n      this.#buttons.insertBefore(divider, beforeElement);\n    }\n    this.#comment = comment;\n    comment.toolbar = this;\n  }\n  addColorPicker(colorPicker) {\n    if (this.#colorPicker) {\n      return;\n    }\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n  removeButton(name) {\n    switch (name) {\n      case \"comment\":\n        this.#comment?.removeToolbarCommentButton();\n        this.#comment = null;\n        this.#commentButtonDivider?.remove();\n        this.#commentButtonDivider = null;\n        break;\n    }\n  }\n  async addButton(name, tool) {\n    switch (name) {\n      case \"colorPicker\":\n        this.addColorPicker(tool);\n        break;\n      case \"altText\":\n        await this.addAltText(tool);\n        break;\n      case \"editSignature\":\n        await this.addEditSignatureButton(tool);\n        break;\n      case \"delete\":\n        this.addDeleteButton();\n        break;\n      case \"comment\":\n        this.addComment(tool);\n        break;\n    }\n  }\n  async addButtonBefore(name, tool, beforeSelector) {\n    const beforeElement = this.#buttons.querySelector(beforeSelector);\n    if (!beforeElement) {\n      return;\n    }\n    if (name === \"comment\") {\n      this.addComment(tool, beforeElement);\n    }\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass FloatingToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n    }\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    if (this.#uiManager.hasCommentManager()) {\n      this.#makeButton(\"commentButton\", `pdfjs-comment-floating-button`, \"pdfjs-comment-floating-button-label\", () => {\n        this.#uiManager.commentSelection(\"floating_button\");\n      });\n    }\n    this.#makeButton(\"highlightButton\", `pdfjs-highlight-floating-button1`, \"pdfjs-highlight-floating-button-label\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    });\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #makeButton(buttonClass, l10nId, labelL10nId, clickHandler) {\n    const button = document.createElement(\"button\");\n    button.classList.add(\"basic\", buttonClass);\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", l10nId);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", labelL10nId);\n    const signal = this.#uiManager._signal;\n    if (signal instanceof AbortSignal && !signal.aborted) {\n      button.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      button.addEventListener(\"click\", clickHandler, {\n        signal\n      });\n    }\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditableAnnotations = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #commentManager = null;\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #floatingToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isPointerDown = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #pdfDocument = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #viewerAlert = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, viewerAlert, altTextManager, commentManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#viewerAlert = viewerAlert;\n    this.#altTextManager = altTextManager;\n    this.#commentManager = commentManager;\n    this.#signatureManager = signatureManager;\n    this.#pdfDocument = pdfDocument;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", () => {\n      this.#isPointerDown = true;\n    }, {\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"pointerup\", () => {\n      this.#isPointerDown = false;\n    }, {\n      capture: true,\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n    commentManager?.setSidebarUiManager(this);\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#commentManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#floatingToolbar?.hide();\n    this.#floatingToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    this.#allEditableAnnotations = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n    this.#pdfDocument = null;\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get _highlightColors() {\n    return shadow(this, \"_highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => {\n      pair = pair.split(\"=\").map(x => x.trim());\n      pair[1] = pair[1].toUpperCase();\n      return pair;\n    })) : null);\n  }\n  get highlightColors() {\n    const {\n      _highlightColors\n    } = this;\n    if (!_highlightColors) {\n      return shadow(this, \"highlightColors\", null);\n    }\n    const map = new Map();\n    const hasHCM = !!this.#pageColors;\n    for (const [name, color] of _highlightColors) {\n      const isNameForHCM = name.endsWith(\"_HCM\");\n      if (hasHCM && isNameForHCM) {\n        map.set(name.replace(\"_HCM\", \"\"), color);\n        continue;\n      }\n      if (!hasHCM && !isNameForHCM) {\n        map.set(name, color);\n      }\n    }\n    return shadow(this, \"highlightColors\", map);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  getNonHCMColor(color) {\n    if (!this._highlightColors) {\n      return color;\n    }\n    const colorName = this.highlightColorNames.get(color);\n    return this._highlightColors.get(colorName) || color;\n  }\n  getNonHCMColorName(color) {\n    return this.highlightColorNames.get(color) || color;\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  hasCommentManager() {\n    return !!this.#commentManager;\n  }\n  editComment(editor, posX, posY, options) {\n    this.#commentManager?.showDialog(this, editor, posX, posY, options);\n  }\n  selectComment(pageIndex, uid) {\n    const layer = this.#allLayers.get(pageIndex);\n    const editor = layer?.getEditorByUID(uid);\n    editor?.toggleComment(true, true);\n  }\n  updateComment(editor) {\n    this.#commentManager?.updateComment(editor.getData());\n  }\n  updatePopupColor(editor) {\n    this.#commentManager?.updatePopupColor(editor);\n  }\n  removeComment(editor) {\n    this.#commentManager?.removeComments([editor.uid]);\n  }\n  toggleComment(editor, isSelected, visibility = undefined) {\n    this.#commentManager?.toggleCommentPopup(editor, isSelected, visibility);\n  }\n  makeCommentColor(color, opacity) {\n    return color && this.#commentManager?.makeCommentColor(color, opacity) || null;\n  }\n  getCommentDialogElement() {\n    return this.#commentManager?.dialogElement || null;\n  }\n  async waitForEditorsRendered(pageNumber) {\n    if (this.#allLayers.has(pageNumber - 1)) {\n      return;\n    }\n    const {\n      resolve,\n      promise\n    } = Promise.withResolvers();\n    const onEditorsRendered = evt => {\n      if (evt.pageNumber === pageNumber) {\n        this._eventBus._off(\"editorsrendered\", onEditorsRendered);\n        resolve();\n      }\n    };\n    this._eventBus.on(\"editorsrendered\", onEditorsRendered);\n    await promise;\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\", comment = false) {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      const editor = layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n      if (comment) {\n        editor?.editComment();\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  commentSelection(methodOfCreation = \"\") {\n    this.highlightSelection(methodOfCreation, true);\n  }\n  #displayFloatingToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#floatingToolbar ||= new FloatingToolbar(this);\n    this.#floatingToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  getAndRemoveDataFromAnnotationStorage(annotationId) {\n    if (!this.#annotationStorage) {\n      return null;\n    }\n    const key = `${AnnotationEditorPrefix}${annotationId}`;\n    const storedValue = this.#annotationStorage.getRawValue(key);\n    if (storedValue) {\n      this.#annotationStorage.remove(key);\n    }\n    return storedValue;\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  a11yAlert(messageId, args = null) {\n    const viewerAlert = this.#viewerAlert;\n    if (!viewerAlert) {\n      return;\n    }\n    viewerAlert.setAttribute(\"data-l10n-id\", messageId);\n    if (args) {\n      viewerAlert.setAttribute(\"data-l10n-args\", JSON.stringify(args));\n    } else {\n      viewerAlert.removeAttribute(\"data-l10n-args\");\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#floatingToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#floatingToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#floatingToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      if (this.#isPointerDown) {\n        const ac = new AbortController();\n        const signal = this.combinedSignal(ac);\n        const pointerup = e => {\n          if (e.type === \"pointerup\" && e.button !== 0) {\n            return;\n          }\n          ac.abort();\n          activeLayer?.toggleDrawing(true);\n          if (e.type === \"pointerup\") {\n            this.#onSelectEnd(\"main_toolbar\");\n          }\n        };\n        window.addEventListener(\"pointerup\", pointerup, {\n          signal\n        });\n        window.addEventListener(\"blur\", pointerup, {\n          signal\n        });\n      } else {\n        activeLayer?.toggleDrawing(true);\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayFloatingToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n      case \"commentSelection\":\n        this.commentSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false, mustEnterInEditMode = false, editComment = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    if (this.#mode === AnnotationEditorType.POPUP) {\n      this.#commentManager?.hideSidebar();\n    }\n    this.#commentManager?.destroyPopup();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      for (const editor of this.#allEditors.values()) {\n        editor.hideStandaloneCommentButton();\n      }\n      this._editorUndoBar?.hide();\n      this.toggleComment(null);\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      editor.addStandaloneCommentButton();\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (mode === AnnotationEditorType.POPUP) {\n      this.#allEditableAnnotations ||= await this.#pdfDocument.getAnnotationsByType(new Set(this.#editorTypes.map(editorClass => editorClass._editorType)));\n      const elementIds = new Set();\n      const allComments = [];\n      for (const editor of this.#allEditors.values()) {\n        const {\n          annotationElementId,\n          hasComment,\n          deleted\n        } = editor;\n        if (annotationElementId) {\n          elementIds.add(annotationElementId);\n        }\n        if (hasComment && !deleted) {\n          allComments.push(editor.getData());\n        }\n      }\n      for (const annotation of this.#allEditableAnnotations) {\n        const {\n          id,\n          popupRef,\n          contentsObj\n        } = annotation;\n        if (popupRef && contentsObj?.str && !elementIds.has(id) && !this.#deletedAnnotationsElementIds.has(id)) {\n          allComments.push(annotation);\n        }\n      }\n      this.#commentManager?.showSidebar(allComments);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.uid === editId) {\n        this.setSelected(editor);\n        if (editComment) {\n          editor.editComment();\n        } else if (mustEnterInEditMode) {\n          editor.enterInEditMode();\n        } else {\n          editor.focus();\n        }\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    if (this.hasSelection) {\n      for (const editor of this.#selectedEditors) {\n        editor.updateParams(type, value);\n      }\n    } else {\n      for (const editorType of this.#editorTypes) {\n        editorType.updateDefaultParams(type, value);\n      }\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  *getEditors(pageIndex) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        yield editor;\n      }\n    }\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.updateToolbar({\n      mode: editor.mode,\n      editId: editor.id\n    });\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  isEditingMode() {\n    return this.#mode !== AnnotationEditorType.NONE;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/editor/comment.js\n\nclass Comment {\n  #commentStandaloneButton = null;\n  #commentToolbarButton = null;\n  #commentWasFromKeyBoard = false;\n  #editor = null;\n  #initialText = null;\n  #richText = null;\n  #text = null;\n  #date = null;\n  #deleted = false;\n  #popupPosition = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  renderForToolbar() {\n    const button = this.#commentToolbarButton = document.createElement(\"button\");\n    button.className = \"comment\";\n    return this.#render(button, false);\n  }\n  renderForStandalone() {\n    const button = this.#commentStandaloneButton = document.createElement(\"button\");\n    button.className = \"annotationCommentButton\";\n    const position = this.#editor.commentButtonPosition;\n    if (position) {\n      const {\n        style\n      } = button;\n      style.insetInlineEnd = `calc(${100 * (this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0])}% - var(--comment-button-dim))`;\n      style.top = `calc(${100 * position[1]}% - var(--comment-button-dim))`;\n      const color = this.#editor.commentButtonColor;\n      if (color) {\n        style.backgroundColor = color;\n      }\n    }\n    return this.#render(button, true);\n  }\n  focusButton() {\n    setTimeout(() => {\n      (this.#commentStandaloneButton ?? this.#commentToolbarButton)?.focus();\n    }, 0);\n  }\n  onUpdatedColor() {\n    if (!this.#commentStandaloneButton) {\n      return;\n    }\n    const color = this.#editor.commentButtonColor;\n    if (color) {\n      this.#commentStandaloneButton.style.backgroundColor = color;\n    }\n    this.#editor._uiManager.updatePopupColor(this.#editor);\n  }\n  get commentButtonWidth() {\n    return (this.#commentStandaloneButton?.getBoundingClientRect().width ?? 0) / this.#editor.parent.boundingClientRect.width;\n  }\n  get commentPopupPositionInLayer() {\n    if (this.#popupPosition) {\n      return this.#popupPosition;\n    }\n    if (!this.#commentStandaloneButton) {\n      return null;\n    }\n    const {\n      x,\n      y,\n      height\n    } = this.#commentStandaloneButton.getBoundingClientRect();\n    const {\n      x: parentX,\n      y: parentY,\n      width: parentWidth,\n      height: parentHeight\n    } = this.#editor.parent.boundingClientRect;\n    return [(x - parentX) / parentWidth, (y + height - parentY) / parentHeight];\n  }\n  set commentPopupPositionInLayer(pos) {\n    this.#popupPosition = pos;\n  }\n  hasDefaultPopupPosition() {\n    return this.#popupPosition === null;\n  }\n  removeStandaloneCommentButton() {\n    this.#commentStandaloneButton?.remove();\n    this.#commentStandaloneButton = null;\n  }\n  removeToolbarCommentButton() {\n    this.#commentToolbarButton?.remove();\n    this.#commentToolbarButton = null;\n  }\n  setCommentButtonStates({\n    selected,\n    hasPopup\n  }) {\n    if (!this.#commentStandaloneButton) {\n      return;\n    }\n    this.#commentStandaloneButton.classList.toggle(\"selected\", selected);\n    this.#commentStandaloneButton.ariaExpanded = hasPopup;\n  }\n  #render(comment, isStandalone) {\n    if (!this.#editor._uiManager.hasCommentManager()) {\n      return null;\n    }\n    comment.tabIndex = \"0\";\n    comment.ariaHasPopup = \"dialog\";\n    if (isStandalone) {\n      comment.ariaControls = \"commentPopup\";\n      comment.setAttribute(\"data-l10n-id\", \"pdfjs-show-comment-button\");\n    } else {\n      comment.ariaControlsElements = [this.#editor._uiManager.getCommentDialogElement()];\n      comment.setAttribute(\"data-l10n-id\", \"pdfjs-editor-edit-comment-button\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    if (!(signal instanceof AbortSignal) || signal.aborted) {\n      return comment;\n    }\n    comment.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    if (isStandalone) {\n      comment.addEventListener(\"focusin\", e => {\n        this.#editor._focusEventsAllowed = false;\n        stopEvent(e);\n      }, {\n        capture: true,\n        signal\n      });\n      comment.addEventListener(\"focusout\", e => {\n        this.#editor._focusEventsAllowed = true;\n        stopEvent(e);\n      }, {\n        capture: true,\n        signal\n      });\n    }\n    comment.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      if (comment === this.#commentToolbarButton) {\n        this.edit();\n      } else {\n        this.#editor.toggleComment(true);\n      }\n    };\n    comment.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    comment.addEventListener(\"keydown\", event => {\n      if (event.target === comment && event.key === \"Enter\") {\n        this.#commentWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    comment.addEventListener(\"pointerenter\", () => {\n      this.#editor.toggleComment(false, true);\n    }, {\n      signal\n    });\n    comment.addEventListener(\"pointerleave\", () => {\n      this.#editor.toggleComment(false, false);\n    }, {\n      signal\n    });\n    return comment;\n  }\n  edit(options) {\n    const position = this.commentPopupPositionInLayer;\n    let posX, posY;\n    if (position) {\n      [posX, posY] = position;\n    } else {\n      [posX, posY] = this.#editor.commentButtonPosition;\n      const {\n        width,\n        height,\n        x,\n        y\n      } = this.#editor;\n      posX = x + posX * width;\n      posY = y + posY * height;\n    }\n    const parentDimensions = this.#editor.parent.boundingClientRect;\n    const {\n      x: parentX,\n      y: parentY,\n      width: parentWidth,\n      height: parentHeight\n    } = parentDimensions;\n    this.#editor._uiManager.editComment(this.#editor, parentX + posX * parentWidth, parentY + posY * parentHeight, {\n      ...options,\n      parentDimensions\n    });\n  }\n  finish() {\n    if (!this.#commentToolbarButton) {\n      return;\n    }\n    this.#commentToolbarButton.focus({\n      focusVisible: this.#commentWasFromKeyBoard\n    });\n    this.#commentWasFromKeyBoard = false;\n  }\n  isDeleted() {\n    return this.#deleted || this.#text === \"\";\n  }\n  isEmpty() {\n    return this.#text === null;\n  }\n  hasBeenEdited() {\n    return this.isDeleted() || this.#text !== this.#initialText;\n  }\n  serialize() {\n    return this.data;\n  }\n  get data() {\n    return {\n      text: this.#text,\n      richText: this.#richText,\n      date: this.#date,\n      deleted: this.isDeleted()\n    };\n  }\n  set data(text) {\n    if (text !== this.#text) {\n      this.#richText = null;\n    }\n    if (text === null) {\n      this.#text = \"\";\n      this.#deleted = true;\n      return;\n    }\n    this.#text = text;\n    this.#date = new Date();\n    this.#deleted = false;\n  }\n  setInitialText(text, richText = null) {\n    this.#initialText = text;\n    this.data = text;\n    this.#date = null;\n    this.#richText = richText;\n  }\n  shown() {}\n  destroy() {\n    this.#commentToolbarButton?.remove();\n    this.#commentToolbarButton = null;\n    this.#commentStandaloneButton?.remove();\n    this.#commentStandaloneButton = null;\n    this.#text = \"\";\n    this.#richText = null;\n    this.#date = null;\n    this.#editor = null;\n    this.#commentWasFromKeyBoard = false;\n    this.#deleted = false;\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #comment = null;\n  #commentStandaloneButton = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #fakeAnnotation = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    this.annotationElementId = parameters.annotationElementId || null;\n    this.creationDate = parameters.creationDate || new Date();\n    this.modificationDate = parameters.modificationDate || null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  get mode() {\n    return Object.getPrototypeOf(this).constructor._editorType;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get uid() {\n    return this.annotationElementId || this.id;\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n      this.#fakeAnnotation?.remove();\n      this.#fakeAnnotation = null;\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims() {\n    const {\n      div: {\n        style\n      },\n      width,\n      height\n    } = this;\n    style.width = `${(100 * width).toFixed(2)}%`;\n    style.height = `${(100 * height).toFixed(2)}%`;\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    this.setDims();\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims();\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  get toolbarButtons() {\n    return null;\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    const {\n      toolbarButtons\n    } = this;\n    if (toolbarButtons) {\n      for (const [name, tool] of toolbarButtons) {\n        await this._editToolbar.addButton(name, tool);\n      }\n    }\n    if (!this.hasComment) {\n      this._editToolbar.addButton(\"comment\", this.addCommentButton());\n    }\n    this._editToolbar.addButton(\"delete\");\n    return this._editToolbar;\n  }\n  addCommentButtonInToolbar() {\n    this._editToolbar?.addButtonBefore(\"comment\", this.addCommentButton(), \".deleteButton\");\n  }\n  removeCommentButtonFromToolbar() {\n    this._editToolbar?.removeButton(\"comment\");\n  }\n  removeEditToolbar() {\n    this._editToolbar?.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  createAltText() {\n    if (!this.#altText) {\n      AltText.initialize(AnnotationEditor._l10n);\n      this.#altText = new AltText(this);\n      if (this.#accessibilityData) {\n        this.#altText.data = this.#accessibilityData;\n        this.#accessibilityData = null;\n      }\n    }\n    return this.#altText;\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  focusCommentButton() {\n    this.#comment?.focusButton();\n  }\n  addCommentButton() {\n    return this.#comment ||= new Comment(this);\n  }\n  addStandaloneCommentButton() {\n    if (this.#commentStandaloneButton) {\n      if (this._uiManager.isEditingMode()) {\n        this.#commentStandaloneButton.classList.remove(\"hidden\");\n      }\n      return;\n    }\n    if (!this.hasComment) {\n      return;\n    }\n    this.#commentStandaloneButton = this.#comment.renderForStandalone();\n    this.div.append(this.#commentStandaloneButton);\n  }\n  removeStandaloneCommentButton() {\n    this.#comment.removeStandaloneCommentButton();\n    this.#commentStandaloneButton = null;\n  }\n  hideStandaloneCommentButton() {\n    this.#commentStandaloneButton?.classList.add(\"hidden\");\n  }\n  get comment() {\n    const {\n      data: {\n        richText,\n        text,\n        date,\n        deleted\n      }\n    } = this.#comment;\n    return {\n      text,\n      richText,\n      date,\n      deleted,\n      color: this.getNonHCMColor(),\n      opacity: this.opacity ?? 1\n    };\n  }\n  set comment(text) {\n    this.#comment ||= new Comment(this);\n    this.#comment.data = text;\n    if (this.hasComment) {\n      this.removeCommentButtonFromToolbar();\n      this.addStandaloneCommentButton();\n      this._uiManager.updateComment(this);\n    } else {\n      this.addCommentButtonInToolbar();\n      this.removeStandaloneCommentButton();\n      this._uiManager.removeComment(this);\n    }\n  }\n  setCommentData({\n    comment,\n    popupRef,\n    richText\n  }) {\n    if (!popupRef) {\n      return;\n    }\n    this.#comment ||= new Comment(this);\n    this.#comment.setInitialText(comment, richText);\n    if (!this.annotationElementId) {\n      return;\n    }\n    const storedData = this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);\n    if (storedData) {\n      this.updateFromAnnotationLayer(storedData);\n    }\n  }\n  get hasEditedComment() {\n    return this.#comment?.hasBeenEdited();\n  }\n  get hasDeletedComment() {\n    return this.#comment?.isDeleted();\n  }\n  get hasComment() {\n    return !!this.#comment && !this.#comment.isEmpty() && !this.#comment.isDeleted();\n  }\n  async editComment(options) {\n    this.#comment ||= new Comment(this);\n    this.#comment.edit(options);\n  }\n  toggleComment(isSelected, visibility = undefined) {\n    if (this.hasComment) {\n      this._uiManager.toggleComment(this, isSelected, visibility);\n    }\n  }\n  setSelectedCommentButton(selected) {\n    this.#comment.setSelectedButton(selected);\n  }\n  addComment(serialized) {\n    if (this.hasEditedComment) {\n      const DEFAULT_POPUP_WIDTH = 180;\n      const DEFAULT_POPUP_HEIGHT = 100;\n      const [,,, trY] = serialized.rect;\n      const [pageWidth] = this.pageDimensions;\n      const [pageX] = this.pageTranslation;\n      const blX = pageX + pageWidth + 1;\n      const blY = trY - DEFAULT_POPUP_HEIGHT;\n      const trX = blX + DEFAULT_POPUP_WIDTH;\n      serialized.popup = {\n        contents: this.comment.text,\n        deleted: this.comment.deleted,\n        rect: [blX, blY, trX, trY]\n      };\n    }\n  }\n  updateFromAnnotationLayer({\n    popup: {\n      contents,\n      deleted\n    }\n  }) {\n    this.#comment.data = deleted ? null : contents;\n  }\n  get parentBoundingClientRect() {\n    return this.parent.boundingClientRect;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this.addStandaloneCommentButton();\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims();\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._uiManager.toggleComment(this, true, false);\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getPDFRect() {\n    return this.getRect(0, 0);\n  }\n  getNonHCMColor() {\n    return this.color && AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color));\n  }\n  onUpdatedColor() {\n    this.#comment?.onUpdatedColor();\n  }\n  getData() {\n    const {\n      comment: {\n        text: str,\n        color,\n        date,\n        opacity,\n        deleted,\n        richText\n      },\n      uid: id,\n      pageIndex,\n      creationDate,\n      modificationDate\n    } = this;\n    return {\n      id,\n      pageIndex,\n      rect: this.getPDFRect(),\n      richText,\n      contentsObj: {\n        str\n      },\n      creationDate,\n      modificationDate: date || modificationDate,\n      popupRef: !deleted,\n      color,\n      opacity\n    };\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    return {\n      annotationType: this.mode,\n      pageIndex: this.pageIndex,\n      rect: this.getPDFRect(),\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n      annotationElementId: data.annotationElementId,\n      creationDate: data.creationDate,\n      modificationDate: data.modificationDate\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  get commentButtonPosition() {\n    return this._uiManager.direction === \"ltr\" ? [1, 0] : [0, 0];\n  }\n  get commentButtonPositionInPage() {\n    const {\n      commentButtonPosition: [posX, posY]\n    } = this;\n    const [blX, blY, trX, trY] = this.getPDFRect();\n    return [AnnotationEditor._round(blX + (trX - blX) * posX), AnnotationEditor._round(blY + (trY - blY) * (1 - posY))];\n  }\n  get commentButtonColor() {\n    return this._uiManager.makeCommentColor(this.getNonHCMColor(), this.opacity);\n  }\n  get commentPopupPosition() {\n    return this.#comment.commentPopupPositionInLayer;\n  }\n  set commentPopupPosition(pos) {\n    this.#comment.commentPopupPositionInLayer = pos;\n  }\n  hasDefaultPopupPosition() {\n    return this.#comment.hasDefaultPopupPosition();\n  }\n  get commentButtonWidth() {\n    return this.#comment.commentButtonWidth;\n  }\n  get elementBeforePopup() {\n    return this.div;\n  }\n  setCommentButtonStates(options) {\n    this.#comment.setCommentButtonStates(options);\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      this._editToolbar.show();\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  focus() {\n    if (this.div && !this.div.contains(document.activeElement)) {\n      setTimeout(() => this.div?.focus({\n        preventScroll: true\n      }), 0);\n    }\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n    if (this.hasComment) {\n      this._uiManager.toggleComment(this, false, false);\n    }\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    if (event.target.nodeName === \"BUTTON\") {\n      return;\n    }\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  updateFakeAnnotationElement(annotationLayer) {\n    if (!this.#fakeAnnotation && !this.deleted) {\n      this.#fakeAnnotation = annotationLayer.addFakeAnnotation(this);\n      return;\n    }\n    if (this.deleted) {\n      this.#fakeAnnotation.remove();\n      this.#fakeAnnotation = null;\n      return;\n    }\n    if (this.hasEditedComment || this._hasBeenMoved || this._hasBeenResized) {\n      this.#fakeAnnotation.updateEdited({\n        rect: this.getPDFRect(),\n        popup: this.comment\n      });\n    }\n  }\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\n\n\n\n\n\n\n\n\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #editorsMap = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    const storedValue = this.#storage.get(key);\n    if (storedValue === undefined) {\n      return;\n    }\n    if (storedValue instanceof AnnotationEditor) {\n      this.#editorsMap.delete(storedValue.annotationElementId);\n    }\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor) {\n      (this.#editorsMap ||= new Map()).set(value.annotationElementId, value);\n      if (typeof this.onAnnotationEditor === \"function\") {\n        this.onAnnotationEditor(value.constructor._type);\n      }\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    let numberOfEditedComments = 0;\n    let numberOfDeletedComments = 0;\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        if (value.popup) {\n          if (value.popup.deleted) {\n            numberOfDeletedComments += 1;\n          } else {\n            numberOfEditedComments += 1;\n          }\n        }\n        continue;\n      }\n      if (value.isCommentDeleted) {\n        numberOfDeletedComments += 1;\n      } else if (value.hasEditedComment) {\n        numberOfEditedComments += 1;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    if (numberOfDeletedComments > 0 || numberOfEditedComments > 0) {\n      stats ||= Object.create(null);\n      stats.comments = {\n        deleted: numberOfDeletedComments,\n        edited: numberOfEditedComments\n      };\n    }\n    if (!stats) {\n      return null;\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  updateEditor(annotationId, data) {\n    const value = this.#editorsMap?.get(annotationId);\n    if (value) {\n      value.updateFromAnnotationLayer(data);\n      return true;\n    }\n    return false;\n  }\n  getEditor(annotationId) {\n    return this.#editorsMap?.get(annotationId) || null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    if (this.#editorsMap) {\n      for (const value of this.#editorsMap.values()) {\n        if (!value.serialize()) {\n          continue;\n        }\n        ids.push(value.annotationElementId);\n      }\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\n\n\n\n\n\n\n\n\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  #fontData;\n  constructor(translatedData, inspectFont = null, extra, charProcOperatorList) {\n    this.compiledGlyphs = Object.create(null);\n    this.#fontData = translatedData;\n    this._inspectFont = inspectFont;\n    if (extra) {\n      Object.assign(this, extra);\n    }\n    if (charProcOperatorList) {\n      this.charProcOperatorList = charProcOperatorList;\n    }\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n  get black() {\n    return this.#fontData.black;\n  }\n  get bold() {\n    return this.#fontData.bold;\n  }\n  get disableFontFace() {\n    return this.#fontData.disableFontFace ?? false;\n  }\n  get fontExtraProperties() {\n    return this.#fontData.fontExtraProperties ?? false;\n  }\n  get isInvalidPDFjsFont() {\n    return this.#fontData.isInvalidPDFjsFont;\n  }\n  get isType3Font() {\n    return this.#fontData.isType3Font;\n  }\n  get italic() {\n    return this.#fontData.italic;\n  }\n  get missingFile() {\n    return this.#fontData.missingFile;\n  }\n  get remeasure() {\n    return this.#fontData.remeasure;\n  }\n  get vertical() {\n    return this.#fontData.vertical;\n  }\n  get ascent() {\n    return this.#fontData.ascent;\n  }\n  get defaultWidth() {\n    return this.#fontData.defaultWidth;\n  }\n  get descent() {\n    return this.#fontData.descent;\n  }\n  get bbox() {\n    return this.#fontData.bbox;\n  }\n  get fontMatrix() {\n    return this.#fontData.fontMatrix;\n  }\n  get fallbackName() {\n    return this.#fontData.fallbackName;\n  }\n  get loadedName() {\n    return this.#fontData.loadedName;\n  }\n  get mimetype() {\n    return this.#fontData.mimetype;\n  }\n  get name() {\n    return this.#fontData.name;\n  }\n  get data() {\n    return this.#fontData.data;\n  }\n  clearData() {\n    this.#fontData.clearData();\n  }\n  get cssFontInfo() {\n    return this.#fontData.cssFontInfo;\n  }\n  get systemFontInfo() {\n    return this.#fontData.systemFontInfo;\n  }\n  get defaultVMetrics() {\n    return this.#fontData.defaultVMetrics;\n  }\n}\n\n;// ./src/display/api_utils.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\n\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\n\n\n\n\n\n\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.filter.js\nvar es_iterator_filter = __webpack_require__(2489);\n;// ./src/display/filter_factory.js\n\n\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\n\n\n\n\n\n\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\n\n\n\n\n\n\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nif (isNodeJS) {\n  let canvas;\n  try {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    try {\n      canvas = require(\"@napi-rs/canvas\");\n    } catch (ex) {\n      warn(`Cannot load \"@napi-rs/canvas\" package: \"${ex}\".`);\n    }\n  } catch (ex) {\n    warn(`Cannot access the \\`require\\` function: \"${ex}\".`);\n  }\n  if (!globalThis.DOMMatrix) {\n    if (canvas?.DOMMatrix) {\n      globalThis.DOMMatrix = canvas.DOMMatrix;\n    } else {\n      warn(\"Cannot polyfill `DOMMatrix`, rendering may be broken.\");\n    }\n  }\n  if (!globalThis.ImageData) {\n    if (canvas?.ImageData) {\n      globalThis.ImageData = canvas.ImageData;\n    } else {\n      warn(\"Cannot polyfill `ImageData`, rendering may be broken.\");\n    }\n  }\n  if (!globalThis.Path2D) {\n    if (canvas?.Path2D) {\n      globalThis.Path2D = canvas.Path2D;\n    } else {\n      warn(\"Cannot polyfill `Path2D`, rendering may be broken.\");\n    }\n  }\n  if (!globalThis.navigator?.language) {\n    globalThis.navigator = {\n      language: \"en-US\",\n      platform: \"\",\n      userAgent: \"\"\n    };\n  }\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.for-each.js\nvar es_iterator_for_each = __webpack_require__(7588);\n;// ./src/display/canvas_dependency_tracker.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst FORCED_DEPENDENCY_LABEL = \"__forcedDependency\";\nconst {\n  floor,\n  ceil\n} = Math;\nfunction expandBBox(array, index, minX, minY, maxX, maxY) {\n  array[index * 4 + 0] = Math.min(array[index * 4 + 0], minX);\n  array[index * 4 + 1] = Math.min(array[index * 4 + 1], minY);\n  array[index * 4 + 2] = Math.max(array[index * 4 + 2], maxX);\n  array[index * 4 + 3] = Math.max(array[index * 4 + 3], maxY);\n}\nconst EMPTY_BBOX = new Uint32Array(new Uint8Array([255, 255, 0, 0]).buffer)[0];\nclass BBoxReader {\n  #bboxes;\n  #coords;\n  constructor(bboxes, coords) {\n    this.#bboxes = bboxes;\n    this.#coords = coords;\n  }\n  get length() {\n    return this.#bboxes.length;\n  }\n  isEmpty(i) {\n    return this.#bboxes[i] === EMPTY_BBOX;\n  }\n  minX(i) {\n    return this.#coords[i * 4 + 0] / 256;\n  }\n  minY(i) {\n    return this.#coords[i * 4 + 1] / 256;\n  }\n  maxX(i) {\n    return (this.#coords[i * 4 + 2] + 1) / 256;\n  }\n  maxY(i) {\n    return (this.#coords[i * 4 + 3] + 1) / 256;\n  }\n}\nconst ensureDebugMetadata = (map, key) => {\n  if (!map) {\n    return undefined;\n  }\n  let value = map.get(key);\n  if (!value) {\n    value = {\n      dependencies: new Set(),\n      isRenderingOperation: false\n    };\n    map.set(key, value);\n  }\n  return value;\n};\nclass CanvasDependencyTracker {\n  #simple = {\n    __proto__: null\n  };\n  #incremental = {\n    __proto__: null,\n    transform: [],\n    moveText: [],\n    sameLineText: [],\n    [FORCED_DEPENDENCY_LABEL]: []\n  };\n  #namedDependencies = new Map();\n  #savesStack = [];\n  #markedContentStack = [];\n  #baseTransformStack = [[1, 0, 0, 1, 0, 0]];\n  #clipBox = [-Infinity, -Infinity, Infinity, Infinity];\n  #pendingBBox = new Float64Array([Infinity, Infinity, -Infinity, -Infinity]);\n  #pendingBBoxIdx = -1;\n  #pendingDependencies = new Set();\n  #operations = new Map();\n  #fontBBoxTrustworthy = new Map();\n  #canvasWidth;\n  #canvasHeight;\n  #bboxesCoords;\n  #bboxes;\n  #debugMetadata;\n  constructor(canvas, operationsCount, recordDebugMetadata = false) {\n    this.#canvasWidth = canvas.width;\n    this.#canvasHeight = canvas.height;\n    this.#initializeBBoxes(operationsCount);\n    if (recordDebugMetadata) {\n      this.#debugMetadata = new Map();\n    }\n  }\n  growOperationsCount(operationsCount) {\n    if (operationsCount >= this.#bboxes.length) {\n      this.#initializeBBoxes(operationsCount, this.#bboxes);\n    }\n  }\n  #initializeBBoxes(operationsCount, oldBBoxes) {\n    const buffer = new ArrayBuffer(operationsCount * 4);\n    this.#bboxesCoords = new Uint8ClampedArray(buffer);\n    this.#bboxes = new Uint32Array(buffer);\n    if (oldBBoxes && oldBBoxes.length > 0) {\n      this.#bboxes.set(oldBBoxes);\n      this.#bboxes.fill(EMPTY_BBOX, oldBBoxes.length);\n    } else {\n      this.#bboxes.fill(EMPTY_BBOX);\n    }\n  }\n  save(opIdx) {\n    this.#simple = {\n      __proto__: this.#simple\n    };\n    this.#incremental = {\n      __proto__: this.#incremental,\n      transform: {\n        __proto__: this.#incremental.transform\n      },\n      moveText: {\n        __proto__: this.#incremental.moveText\n      },\n      sameLineText: {\n        __proto__: this.#incremental.sameLineText\n      },\n      [FORCED_DEPENDENCY_LABEL]: {\n        __proto__: this.#incremental[FORCED_DEPENDENCY_LABEL]\n      }\n    };\n    this.#clipBox = {\n      __proto__: this.#clipBox\n    };\n    this.#savesStack.push(opIdx);\n    return this;\n  }\n  restore(opIdx) {\n    const previous = Object.getPrototypeOf(this.#simple);\n    if (previous === null) {\n      return this;\n    }\n    this.#simple = previous;\n    this.#incremental = Object.getPrototypeOf(this.#incremental);\n    this.#clipBox = Object.getPrototypeOf(this.#clipBox);\n    const lastSave = this.#savesStack.pop();\n    if (lastSave !== undefined) {\n      ensureDebugMetadata(this.#debugMetadata, opIdx)?.dependencies.add(lastSave);\n      this.#bboxes[opIdx] = this.#bboxes[lastSave];\n    }\n    return this;\n  }\n  recordOpenMarker(idx) {\n    this.#savesStack.push(idx);\n    return this;\n  }\n  getOpenMarker() {\n    if (this.#savesStack.length === 0) {\n      return null;\n    }\n    return this.#savesStack.at(-1);\n  }\n  recordCloseMarker(opIdx) {\n    const lastSave = this.#savesStack.pop();\n    if (lastSave !== undefined) {\n      ensureDebugMetadata(this.#debugMetadata, opIdx)?.dependencies.add(lastSave);\n      this.#bboxes[opIdx] = this.#bboxes[lastSave];\n    }\n    return this;\n  }\n  beginMarkedContent(opIdx) {\n    this.#markedContentStack.push(opIdx);\n    return this;\n  }\n  endMarkedContent(opIdx) {\n    const lastSave = this.#markedContentStack.pop();\n    if (lastSave !== undefined) {\n      ensureDebugMetadata(this.#debugMetadata, opIdx)?.dependencies.add(lastSave);\n      this.#bboxes[opIdx] = this.#bboxes[lastSave];\n    }\n    return this;\n  }\n  pushBaseTransform(ctx) {\n    this.#baseTransformStack.push(Util.multiplyByDOMMatrix(this.#baseTransformStack.at(-1), ctx.getTransform()));\n    return this;\n  }\n  popBaseTransform() {\n    if (this.#baseTransformStack.length > 1) {\n      this.#baseTransformStack.pop();\n    }\n    return this;\n  }\n  recordSimpleData(name, idx) {\n    this.#simple[name] = idx;\n    return this;\n  }\n  recordIncrementalData(name, idx) {\n    this.#incremental[name].push(idx);\n    return this;\n  }\n  resetIncrementalData(name, idx) {\n    this.#incremental[name].length = 0;\n    return this;\n  }\n  recordNamedData(name, idx) {\n    this.#namedDependencies.set(name, idx);\n    return this;\n  }\n  recordSimpleDataFromNamed(name, depName, fallbackIdx) {\n    this.#simple[name] = this.#namedDependencies.get(depName) ?? fallbackIdx;\n  }\n  recordFutureForcedDependency(name, idx) {\n    this.recordIncrementalData(FORCED_DEPENDENCY_LABEL, idx);\n    return this;\n  }\n  inheritSimpleDataAsFutureForcedDependencies(names) {\n    for (const name of names) {\n      if (name in this.#simple) {\n        this.recordFutureForcedDependency(name, this.#simple[name]);\n      }\n    }\n    return this;\n  }\n  inheritPendingDependenciesAsFutureForcedDependencies() {\n    for (const dep of this.#pendingDependencies) {\n      this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL, dep);\n    }\n    return this;\n  }\n  resetBBox(idx) {\n    if (this.#pendingBBoxIdx !== idx) {\n      this.#pendingBBoxIdx = idx;\n      this.#pendingBBox[0] = Infinity;\n      this.#pendingBBox[1] = Infinity;\n      this.#pendingBBox[2] = -Infinity;\n      this.#pendingBBox[3] = -Infinity;\n    }\n    return this;\n  }\n  recordClipBox(idx, ctx, minX, maxX, minY, maxY) {\n    const transform = Util.multiplyByDOMMatrix(this.#baseTransformStack.at(-1), ctx.getTransform());\n    const clipBox = [Infinity, Infinity, -Infinity, -Infinity];\n    Util.axialAlignedBoundingBox([minX, minY, maxX, maxY], transform, clipBox);\n    const intersection = Util.intersect(this.#clipBox, clipBox);\n    if (intersection) {\n      this.#clipBox[0] = intersection[0];\n      this.#clipBox[1] = intersection[1];\n      this.#clipBox[2] = intersection[2];\n      this.#clipBox[3] = intersection[3];\n    } else {\n      this.#clipBox[0] = this.#clipBox[1] = Infinity;\n      this.#clipBox[2] = this.#clipBox[3] = -Infinity;\n    }\n    return this;\n  }\n  recordBBox(idx, ctx, minX, maxX, minY, maxY) {\n    const clipBox = this.#clipBox;\n    if (clipBox[0] === Infinity) {\n      return this;\n    }\n    const transform = Util.multiplyByDOMMatrix(this.#baseTransformStack.at(-1), ctx.getTransform());\n    if (clipBox[0] === -Infinity) {\n      Util.axialAlignedBoundingBox([minX, minY, maxX, maxY], transform, this.#pendingBBox);\n      return this;\n    }\n    const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n    Util.axialAlignedBoundingBox([minX, minY, maxX, maxY], transform, bbox);\n    this.#pendingBBox[0] = Math.min(this.#pendingBBox[0], Math.max(bbox[0], clipBox[0]));\n    this.#pendingBBox[1] = Math.min(this.#pendingBBox[1], Math.max(bbox[1], clipBox[1]));\n    this.#pendingBBox[2] = Math.max(this.#pendingBBox[2], Math.min(bbox[2], clipBox[2]));\n    this.#pendingBBox[3] = Math.max(this.#pendingBBox[3], Math.min(bbox[3], clipBox[3]));\n    return this;\n  }\n  recordCharacterBBox(idx, ctx, font, scale = 1, x = 0, y = 0, getMeasure) {\n    const fontBBox = font.bbox;\n    let isBBoxTrustworthy;\n    let computedBBox;\n    if (fontBBox) {\n      isBBoxTrustworthy = fontBBox[2] !== fontBBox[0] && fontBBox[3] !== fontBBox[1] && this.#fontBBoxTrustworthy.get(font);\n      if (isBBoxTrustworthy !== false) {\n        computedBBox = [0, 0, 0, 0];\n        Util.axialAlignedBoundingBox(fontBBox, font.fontMatrix, computedBBox);\n        if (scale !== 1 || x !== 0 || y !== 0) {\n          Util.scaleMinMax([scale, 0, 0, -scale, x, y], computedBBox);\n        }\n        if (isBBoxTrustworthy) {\n          return this.recordBBox(idx, ctx, computedBBox[0], computedBBox[2], computedBBox[1], computedBBox[3]);\n        }\n      }\n    }\n    if (!getMeasure) {\n      return this.recordFullPageBBox(idx);\n    }\n    const measure = getMeasure();\n    if (fontBBox && computedBBox && isBBoxTrustworthy === undefined) {\n      isBBoxTrustworthy = computedBBox[0] <= x - measure.actualBoundingBoxLeft && computedBBox[2] >= x + measure.actualBoundingBoxRight && computedBBox[1] <= y - measure.actualBoundingBoxAscent && computedBBox[3] >= y + measure.actualBoundingBoxDescent;\n      this.#fontBBoxTrustworthy.set(font, isBBoxTrustworthy);\n      if (isBBoxTrustworthy) {\n        return this.recordBBox(idx, ctx, computedBBox[0], computedBBox[2], computedBBox[1], computedBBox[3]);\n      }\n    }\n    return this.recordBBox(idx, ctx, x - measure.actualBoundingBoxLeft, x + measure.actualBoundingBoxRight, y - measure.actualBoundingBoxAscent, y + measure.actualBoundingBoxDescent);\n  }\n  recordFullPageBBox(idx) {\n    this.#pendingBBox[0] = Math.max(0, this.#clipBox[0]);\n    this.#pendingBBox[1] = Math.max(0, this.#clipBox[1]);\n    this.#pendingBBox[2] = Math.min(this.#canvasWidth, this.#clipBox[2]);\n    this.#pendingBBox[3] = Math.min(this.#canvasHeight, this.#clipBox[3]);\n    return this;\n  }\n  getSimpleIndex(dependencyName) {\n    return this.#simple[dependencyName];\n  }\n  recordDependencies(idx, dependencyNames) {\n    const pendingDependencies = this.#pendingDependencies;\n    const simple = this.#simple;\n    const incremental = this.#incremental;\n    for (const name of dependencyNames) {\n      if (name in this.#simple) {\n        pendingDependencies.add(simple[name]);\n      } else if (name in incremental) {\n        incremental[name].forEach(pendingDependencies.add, pendingDependencies);\n      }\n    }\n    return this;\n  }\n  recordNamedDependency(idx, name) {\n    if (this.#namedDependencies.has(name)) {\n      this.#pendingDependencies.add(this.#namedDependencies.get(name));\n    }\n    return this;\n  }\n  recordOperation(idx, preserve = false) {\n    this.recordDependencies(idx, [FORCED_DEPENDENCY_LABEL]);\n    if (this.#debugMetadata) {\n      const metadata = ensureDebugMetadata(this.#debugMetadata, idx);\n      const {\n        dependencies\n      } = metadata;\n      this.#pendingDependencies.forEach(dependencies.add, dependencies);\n      this.#savesStack.forEach(dependencies.add, dependencies);\n      this.#markedContentStack.forEach(dependencies.add, dependencies);\n      dependencies.delete(idx);\n      metadata.isRenderingOperation = true;\n    }\n    if (this.#pendingBBoxIdx === idx) {\n      const minX = floor(this.#pendingBBox[0] * 256 / this.#canvasWidth);\n      const minY = floor(this.#pendingBBox[1] * 256 / this.#canvasHeight);\n      const maxX = ceil(this.#pendingBBox[2] * 256 / this.#canvasWidth);\n      const maxY = ceil(this.#pendingBBox[3] * 256 / this.#canvasHeight);\n      expandBBox(this.#bboxesCoords, idx, minX, minY, maxX, maxY);\n      for (const depIdx of this.#pendingDependencies) {\n        if (depIdx !== idx) {\n          expandBBox(this.#bboxesCoords, depIdx, minX, minY, maxX, maxY);\n        }\n      }\n      for (const saveIdx of this.#savesStack) {\n        if (saveIdx !== idx) {\n          expandBBox(this.#bboxesCoords, saveIdx, minX, minY, maxX, maxY);\n        }\n      }\n      for (const saveIdx of this.#markedContentStack) {\n        if (saveIdx !== idx) {\n          expandBBox(this.#bboxesCoords, saveIdx, minX, minY, maxX, maxY);\n        }\n      }\n      if (!preserve) {\n        this.#pendingDependencies.clear();\n        this.#pendingBBoxIdx = -1;\n      }\n    }\n    return this;\n  }\n  recordShowTextOperation(idx, preserve = false) {\n    const deps = Array.from(this.#pendingDependencies);\n    this.recordOperation(idx, preserve);\n    this.recordIncrementalData(\"sameLineText\", idx);\n    for (const dep of deps) {\n      this.recordIncrementalData(\"sameLineText\", dep);\n    }\n    return this;\n  }\n  bboxToClipBoxDropOperation(idx, preserve = false) {\n    if (this.#pendingBBoxIdx === idx) {\n      this.#pendingBBoxIdx = -1;\n      this.#clipBox[0] = Math.max(this.#clipBox[0], this.#pendingBBox[0]);\n      this.#clipBox[1] = Math.max(this.#clipBox[1], this.#pendingBBox[1]);\n      this.#clipBox[2] = Math.min(this.#clipBox[2], this.#pendingBBox[2]);\n      this.#clipBox[3] = Math.min(this.#clipBox[3], this.#pendingBBox[3]);\n      if (!preserve) {\n        this.#pendingDependencies.clear();\n      }\n    }\n    return this;\n  }\n  _takePendingDependencies() {\n    const pendingDependencies = this.#pendingDependencies;\n    this.#pendingDependencies = new Set();\n    return pendingDependencies;\n  }\n  _extractOperation(idx) {\n    const operation = this.#operations.get(idx);\n    this.#operations.delete(idx);\n    return operation;\n  }\n  _pushPendingDependencies(dependencies) {\n    for (const dep of dependencies) {\n      this.#pendingDependencies.add(dep);\n    }\n  }\n  take() {\n    this.#fontBBoxTrustworthy.clear();\n    return new BBoxReader(this.#bboxes, this.#bboxesCoords);\n  }\n  takeDebugMetadata() {\n    return this.#debugMetadata;\n  }\n}\nclass CanvasNestedDependencyTracker {\n  #dependencyTracker;\n  #opIdx;\n  #ignoreBBoxes;\n  #nestingLevel = 0;\n  #savesLevel = 0;\n  constructor(dependencyTracker, opIdx, ignoreBBoxes) {\n    if (dependencyTracker instanceof CanvasNestedDependencyTracker && dependencyTracker.#ignoreBBoxes === !!ignoreBBoxes) {\n      return dependencyTracker;\n    }\n    this.#dependencyTracker = dependencyTracker;\n    this.#opIdx = opIdx;\n    this.#ignoreBBoxes = !!ignoreBBoxes;\n  }\n  growOperationsCount() {\n    throw new Error(\"Unreachable\");\n  }\n  save(opIdx) {\n    this.#savesLevel++;\n    this.#dependencyTracker.save(this.#opIdx);\n    return this;\n  }\n  restore(opIdx) {\n    if (this.#savesLevel > 0) {\n      this.#dependencyTracker.restore(this.#opIdx);\n      this.#savesLevel--;\n    }\n    return this;\n  }\n  recordOpenMarker(idx) {\n    this.#nestingLevel++;\n    return this;\n  }\n  getOpenMarker() {\n    return this.#nestingLevel > 0 ? this.#opIdx : this.#dependencyTracker.getOpenMarker();\n  }\n  recordCloseMarker(idx) {\n    this.#nestingLevel--;\n    return this;\n  }\n  beginMarkedContent(opIdx) {\n    return this;\n  }\n  endMarkedContent(opIdx) {\n    return this;\n  }\n  pushBaseTransform(ctx) {\n    this.#dependencyTracker.pushBaseTransform(ctx);\n    return this;\n  }\n  popBaseTransform() {\n    this.#dependencyTracker.popBaseTransform();\n    return this;\n  }\n  recordSimpleData(name, idx) {\n    this.#dependencyTracker.recordSimpleData(name, this.#opIdx);\n    return this;\n  }\n  recordIncrementalData(name, idx) {\n    this.#dependencyTracker.recordIncrementalData(name, this.#opIdx);\n    return this;\n  }\n  resetIncrementalData(name, idx) {\n    this.#dependencyTracker.resetIncrementalData(name, this.#opIdx);\n    return this;\n  }\n  recordNamedData(name, idx) {\n    return this;\n  }\n  recordSimpleDataFromNamed(name, depName, fallbackIdx) {\n    this.#dependencyTracker.recordSimpleDataFromNamed(name, depName, this.#opIdx);\n    return this;\n  }\n  recordFutureForcedDependency(name, idx) {\n    this.#dependencyTracker.recordFutureForcedDependency(name, this.#opIdx);\n    return this;\n  }\n  inheritSimpleDataAsFutureForcedDependencies(names) {\n    this.#dependencyTracker.inheritSimpleDataAsFutureForcedDependencies(names);\n    return this;\n  }\n  inheritPendingDependenciesAsFutureForcedDependencies() {\n    this.#dependencyTracker.inheritPendingDependenciesAsFutureForcedDependencies();\n    return this;\n  }\n  resetBBox(idx) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.resetBBox(this.#opIdx);\n    }\n    return this;\n  }\n  recordClipBox(idx, ctx, minX, maxX, minY, maxY) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.recordClipBox(this.#opIdx, ctx, minX, maxX, minY, maxY);\n    }\n    return this;\n  }\n  recordBBox(idx, ctx, minX, maxX, minY, maxY) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.recordBBox(this.#opIdx, ctx, minX, maxX, minY, maxY);\n    }\n    return this;\n  }\n  recordCharacterBBox(idx, ctx, font, scale, x, y, getMeasure) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.recordCharacterBBox(this.#opIdx, ctx, font, scale, x, y, getMeasure);\n    }\n    return this;\n  }\n  recordFullPageBBox(idx) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.recordFullPageBBox(this.#opIdx);\n    }\n    return this;\n  }\n  getSimpleIndex(dependencyName) {\n    return this.#dependencyTracker.getSimpleIndex(dependencyName);\n  }\n  recordDependencies(idx, dependencyNames) {\n    this.#dependencyTracker.recordDependencies(this.#opIdx, dependencyNames);\n    return this;\n  }\n  recordNamedDependency(idx, name) {\n    this.#dependencyTracker.recordNamedDependency(this.#opIdx, name);\n    return this;\n  }\n  recordOperation(idx) {\n    this.#dependencyTracker.recordOperation(this.#opIdx, true);\n    return this;\n  }\n  recordShowTextOperation(idx) {\n    this.#dependencyTracker.recordShowTextOperation(this.#opIdx, true);\n    return this;\n  }\n  bboxToClipBoxDropOperation(idx) {\n    if (!this.#ignoreBBoxes) {\n      this.#dependencyTracker.bboxToClipBoxDropOperation(this.#opIdx, true);\n    }\n    return this;\n  }\n  take() {\n    throw new Error(\"Unreachable\");\n  }\n  takeDebugMetadata() {\n    throw new Error(\"Unreachable\");\n  }\n}\nconst Dependencies = {\n  stroke: [\"path\", \"transform\", \"filter\", \"strokeColor\", \"strokeAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"dash\"],\n  fill: [\"path\", \"transform\", \"filter\", \"fillColor\", \"fillAlpha\", \"globalCompositeOperation\", \"SMask\"],\n  imageXObject: [\"transform\", \"SMask\", \"filter\", \"fillAlpha\", \"strokeAlpha\", \"globalCompositeOperation\"],\n  rawFillPath: [\"filter\", \"fillColor\", \"fillAlpha\"],\n  showText: [\"transform\", \"leading\", \"charSpacing\", \"wordSpacing\", \"hScale\", \"textRise\", \"moveText\", \"textMatrix\", \"font\", \"fontObj\", \"filter\", \"fillColor\", \"textRenderingMode\", \"SMask\", \"fillAlpha\", \"strokeAlpha\", \"globalCompositeOperation\", \"sameLineText\"],\n  transform: [\"transform\"],\n  transformAndFill: [\"transform\", \"fillColor\"]\n};\n\n;// ./src/display/pattern_helper.js\n\n\n\n\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner, opIdx) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx, opIdx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(0, dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    graphics.dependencyTracker?.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    graphics.dependencyTracker?.restore();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType, opIdx) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner, opIdx);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\n\n\n\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height, preInit) {\n    preInit?.(this);\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors, dependencyTracker) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n    this.dependencyTracker = dependencyTracker ?? null;\n  }\n  getObject(opIdx, data, fallback = null) {\n    if (typeof data === \"string\") {\n      this.dependencyTracker?.recordNamedDependency(opIdx, data);\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper, operationsFilter) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId, fnArgs;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      if (!operationsFilter || operationsFilter(i)) {\n        fnId = fnArray[i];\n        fnArgs = argsArray[i] ?? null;\n        if (fnId !== OPS.dependency) {\n          if (fnArgs === null) {\n            this[fnId](i);\n          } else {\n            this[fnId](i, ...fnArgs);\n          }\n        } else {\n          for (const depObjId of fnArgs) {\n            this.dependencyTracker?.recordNamedData(depObjId, i);\n            const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n            if (!objsPool.has(depObjId)) {\n              objsPool.get(depObjId, continueCallback);\n              return i;\n            }\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(opIdx, img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        this.dependencyTracker?.recordDependencies(opIdx, Dependencies.transformAndFill);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL, opIdx) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.transformAndFill);\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(opIdx, width) {\n    this.dependencyTracker?.recordSimpleData(\"lineWidth\", opIdx);\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(opIdx, style) {\n    this.dependencyTracker?.recordSimpleData(\"lineCap\", opIdx);\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(opIdx, style) {\n    this.dependencyTracker?.recordSimpleData(\"lineJoin\", opIdx);\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(opIdx, limit) {\n    this.dependencyTracker?.recordSimpleData(\"miterLimit\", opIdx);\n    this.ctx.miterLimit = limit;\n  }\n  setDash(opIdx, dashArray, dashPhase) {\n    this.dependencyTracker?.recordSimpleData(\"dash\", opIdx);\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(opIdx, intent) {}\n  setFlatness(opIdx, flatness) {}\n  setGState(opIdx, states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(opIdx, value);\n          break;\n        case \"LC\":\n          this.setLineCap(opIdx, value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(opIdx, value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(opIdx, value);\n          break;\n        case \"D\":\n          this.setDash(opIdx, value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(opIdx, value);\n          break;\n        case \"FL\":\n          this.setFlatness(opIdx, value);\n          break;\n        case \"Font\":\n          this.setFont(opIdx, value[0], value[1]);\n          break;\n        case \"CA\":\n          this.dependencyTracker?.recordSimpleData(\"strokeAlpha\", opIdx);\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.dependencyTracker?.recordSimpleData(\"fillAlpha\", opIdx);\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.dependencyTracker?.recordSimpleData(\"globalCompositeOperation\", opIdx);\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.dependencyTracker?.recordSimpleData(\"SMask\", opIdx);\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.dependencyTracker?.recordSimpleData(\"filter\", opIdx);\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode(opIdx) {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState(opIdx, [[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save(opIdx) {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n    this.dependencyTracker?.save(opIdx);\n  }\n  restore(opIdx) {\n    this.dependencyTracker?.restore(opIdx);\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(opIdx, a, b, c, d, e, f) {\n    this.dependencyTracker?.recordIncrementalData(\"transform\", opIdx);\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(opIdx, op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](opIdx, path);\n      return;\n    }\n    if (this.dependencyTracker !== null) {\n      const outerExtraSize = op === OPS.stroke ? this.current.lineWidth / 2 : 0;\n      this.dependencyTracker.resetBBox(opIdx).recordBBox(opIdx, this.ctx, minMax[0] - outerExtraSize, minMax[2] + outerExtraSize, minMax[1] - outerExtraSize, minMax[3] + outerExtraSize).recordDependencies(opIdx, [\"transform\"]);\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](opIdx, path);\n    this._pathStartIdx = opIdx;\n  }\n  closePath(opIdx) {\n    this.ctx.closePath();\n  }\n  stroke(opIdx, path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE, opIdx);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.stroke);\n    if (consumePath) {\n      this.consumePath(opIdx, path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(opIdx, path) {\n    this.stroke(opIdx, path);\n  }\n  fill(opIdx, path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      this.dependencyTracker?.save(opIdx);\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL, opIdx);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.fill);\n    if (needRestore) {\n      ctx.restore();\n      this.dependencyTracker?.restore(opIdx);\n    }\n    if (consumePath) {\n      this.consumePath(opIdx, path, intersect);\n    }\n  }\n  eoFill(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fill(opIdx, path);\n  }\n  fillStroke(opIdx, path) {\n    this.fill(opIdx, path, false);\n    this.stroke(opIdx, path, false);\n    this.consumePath(opIdx, path);\n  }\n  eoFillStroke(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fillStroke(opIdx, path);\n  }\n  closeFillStroke(opIdx, path) {\n    this.fillStroke(opIdx, path);\n  }\n  closeEOFillStroke(opIdx, path) {\n    this.pendingEOFill = true;\n    this.fillStroke(opIdx, path);\n  }\n  endPath(opIdx, path) {\n    this.consumePath(opIdx, path);\n  }\n  rawFillPath(opIdx, path) {\n    this.ctx.fill(path);\n    this.dependencyTracker?.recordDependencies(opIdx, Dependencies.rawFillPath).recordOperation(opIdx);\n  }\n  clip(opIdx) {\n    this.dependencyTracker?.recordFutureForcedDependency(\"clipMode\", opIdx);\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip(opIdx) {\n    this.dependencyTracker?.recordFutureForcedDependency(\"clipMode\", opIdx);\n    this.pendingClip = EO_CLIP;\n  }\n  beginText(opIdx) {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n    this.dependencyTracker?.recordOpenMarker(opIdx).resetIncrementalData(\"sameLineText\").resetIncrementalData(\"moveText\", opIdx);\n  }\n  endText(opIdx) {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (this.dependencyTracker) {\n      const {\n        dependencyTracker\n      } = this;\n      if (paths !== undefined) {\n        dependencyTracker.recordFutureForcedDependency(\"textClip\", dependencyTracker.getOpenMarker()).recordFutureForcedDependency(\"textClip\", opIdx);\n      }\n      dependencyTracker.recordCloseMarker(opIdx);\n    }\n    if (paths !== undefined) {\n      const newPath = new Path2D();\n      const invTransf = ctx.getTransform().invertSelf();\n      for (const {\n        transform,\n        x,\n        y,\n        fontSize,\n        path\n      } of paths) {\n        if (!path) {\n          continue;\n        }\n        newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n      }\n      ctx.clip(newPath);\n    }\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(opIdx, spacing) {\n    this.dependencyTracker?.recordSimpleData(\"charSpacing\", opIdx);\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(opIdx, spacing) {\n    this.dependencyTracker?.recordSimpleData(\"wordSpacing\", opIdx);\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(opIdx, scale) {\n    this.dependencyTracker?.recordSimpleData(\"hScale\", opIdx);\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(opIdx, leading) {\n    this.dependencyTracker?.recordSimpleData(\"leading\", opIdx);\n    this.current.leading = -leading;\n  }\n  setFont(opIdx, fontRefName, size) {\n    this.dependencyTracker?.recordSimpleData(\"font\", opIdx).recordSimpleDataFromNamed(\"fontObj\", fontRefName, opIdx);\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(opIdx, mode) {\n    this.dependencyTracker?.recordSimpleData(\"textRenderingMode\", opIdx);\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(opIdx, rise) {\n    this.dependencyTracker?.recordSimpleData(\"textRise\", opIdx);\n    this.current.textRise = rise;\n  }\n  moveText(opIdx, x, y) {\n    this.dependencyTracker?.resetIncrementalData(\"sameLineText\").recordIncrementalData(\"moveText\", opIdx);\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(opIdx, x, y) {\n    this.setLeading(opIdx, -y);\n    this.moveText(opIdx, x, y);\n  }\n  setTextMatrix(opIdx, matrix) {\n    this.dependencyTracker?.recordSimpleData(\"textMatrix\", opIdx);\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine(opIdx) {\n    this.moveText(opIdx, 0, this.current.leading);\n    this.dependencyTracker?.recordIncrementalData(\"moveText\", this.dependencyTracker.getSimpleIndex(\"leading\") ?? opIdx);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(opIdx, character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if ((font.disableFontFace || isAddToPathSet || patternFill || patternStroke) && !font.missingFile) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (path && (font.disableFontFace || patternFill || patternStroke)) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, font);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          const scaledPath = this.#getScaledPath(path, currentTransform, patternFillTransform);\n          ctx.fill(scaledPath);\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n        this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, font, fontSize, x, y, () => ctx.measureText(character));\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (this.dependencyTracker) {\n          this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, font, fontSize, x, y, () => ctx.measureText(character)).recordDependencies(opIdx, Dependencies.stroke);\n        }\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n      this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, font, fontSize, x, y);\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(opIdx, glyphs) {\n    if (this.dependencyTracker) {\n      this.dependencyTracker.recordDependencies(opIdx, Dependencies.showText).resetBBox(opIdx);\n      if (this.current.textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG) {\n        this.dependencyTracker.recordFutureForcedDependency(\"textClip\", opIdx).inheritPendingDependenciesAsFutureForcedDependencies();\n      }\n    }\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      this.showType3Text(opIdx, glyphs);\n      this.dependencyTracker?.recordShowTextOperation(opIdx);\n      return undefined;\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      this.dependencyTracker?.recordOperation(opIdx);\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL, opIdx);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE, opIdx);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      const joinedChars = chars.join(\"\");\n      ctx.fillText(joinedChars, 0, 0);\n      if (this.dependencyTracker !== null) {\n        const measure = ctx.measureText(joinedChars);\n        this.dependencyTracker.recordBBox(opIdx, this.ctx, -measure.actualBoundingBoxLeft, measure.actualBoundingBoxRight, -measure.actualBoundingBoxAscent, measure.actualBoundingBoxDescent).recordShowTextOperation(opIdx);\n      }\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      let measure;\n      if (font.remeasure && width > 0) {\n        measure = ctx.measureText(character);\n        const measuredWidth = measure.width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n          this.dependencyTracker?.recordCharacterBBox(opIdx, ctx, measure ? {\n            bbox: null\n          } : font, fontSize / fontSizeScale, scaledX, scaledY, () => measure ?? ctx.measureText(character));\n        } else {\n          this.paintChar(opIdx, character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(opIdx, accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    this.dependencyTracker?.recordShowTextOperation(opIdx);\n    return undefined;\n  }\n  showType3Text(opIdx, glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    const dependencyTracker = this.dependencyTracker;\n    this.dependencyTracker = dependencyTracker ? new CanvasNestedDependencyTracker(dependencyTracker, opIdx) : null;\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    if (dependencyTracker) {\n      this.dependencyTracker = dependencyTracker;\n    }\n  }\n  setCharWidth(opIdx, xWidth, yWidth) {}\n  setCharWidthAndBounds(opIdx, xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.dependencyTracker?.recordBBox(opIdx, this.ctx, llx, urx, lly, ury).recordClipBox(opIdx, this.ctx, llx, urx, lly, ury);\n    this.endPath(opIdx);\n  }\n  getColorN_Pattern(opIdx, IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: (ctx, renderingOpIdx) => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        }, undefined, undefined, this.dependencyTracker ? new CanvasNestedDependencyTracker(this.dependencyTracker, renderingOpIdx, true) : null)\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(opIdx, IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN(opIdx, ...args) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.current.strokeColor = this.getColorN_Pattern(opIdx, args);\n    this.current.patternStroke = true;\n  }\n  setFillColorN(opIdx, ...args) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.current.fillColor = this.getColorN_Pattern(opIdx, args);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(opIdx, color) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent(opIdx) {\n    this.dependencyTracker?.recordSimpleData(\"strokeColor\", opIdx);\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(opIdx, color) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent(opIdx) {\n    this.dependencyTracker?.recordSimpleData(\"fillColor\", opIdx);\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(opIdx, objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(opIdx, objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(opIdx, objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save(opIdx);\n    const pattern = this._getPattern(opIdx, objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING, opIdx);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.dependencyTracker?.resetBBox(opIdx).recordFullPageBBox(opIdx).recordDependencies(opIdx, Dependencies.transform).recordDependencies(opIdx, Dependencies.fill).recordOperation(opIdx);\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore(opIdx);\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(opIdx, matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save(opIdx);\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(opIdx, ...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.dependencyTracker?.recordClipBox(opIdx, this.ctx, x0, x1, y0, y1);\n      this.endPath(opIdx);\n    }\n  }\n  paintFormXObjectEnd(opIdx) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore(opIdx);\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(opIdx, group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save(opIdx);\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    }\n    if (!group.smask || this.dependencyTracker) {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies([\"fillAlpha\", \"strokeAlpha\", \"globalCompositeOperation\"]).pushBaseTransform(currentCtx);\n    this.setGState(opIdx, [[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(opIdx, group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    this.dependencyTracker?.popBaseTransform();\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore(opIdx);\n      if (this.dependencyTracker) {\n        this.ctx.restore();\n      }\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore(opIdx);\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(opIdx, id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save(opIdx);\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath(opIdx);\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(opIdx, ...transform);\n    this.transform(opIdx, ...matrix);\n  }\n  endAnnotation(opIdx) {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(opIdx, img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(opIdx, img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(opIdx, img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    this.dependencyTracker?.resetBBox(opIdx).recordBBox(opIdx, this.ctx, mask.offsetX, mask.offsetX + maskCanvas.width, mask.offsetY, mask.offsetY + maskCanvas.height).recordOperation(opIdx);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(opIdx, img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(opIdx, img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(opIdx, img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    this.dependencyTracker?.resetBBox(opIdx);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n      this.dependencyTracker?.recordBBox(opIdx, this.ctx, trans[4], trans[4] + mask.canvas.width, trans[5], trans[5] + mask.canvas.height);\n    }\n    ctx.restore();\n    this.compose();\n    this.dependencyTracker?.recordOperation(opIdx);\n  }\n  paintImageMaskXObjectGroup(opIdx, images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    this.dependencyTracker?.resetBBox(opIdx).recordDependencies(opIdx, Dependencies.transformAndFill);\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(opIdx, data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL, opIdx) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      this.dependencyTracker?.recordBBox(opIdx, ctx, 0, width, 0, height);\n      ctx.restore();\n    }\n    this.compose();\n    this.dependencyTracker?.recordOperation(opIdx);\n  }\n  paintImageXObject(opIdx, objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(opIdx, objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(opIdx, imgData);\n  }\n  paintImageXObjectRepeat(opIdx, objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(opIdx, objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(opIdx, imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(opIdx, imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save(opIdx);\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    this.dependencyTracker?.resetBBox(opIdx).recordBBox(opIdx, ctx, 0, width, -height, 0).recordDependencies(opIdx, Dependencies.imageXObject).recordOperation(opIdx);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore(opIdx);\n  }\n  paintInlineImageXObjectGroup(opIdx, imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    this.dependencyTracker?.resetBBox(opIdx);\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      this.dependencyTracker?.recordBBox(opIdx, ctx, 0, 1, -1, 0);\n      ctx.restore();\n    }\n    this.dependencyTracker?.recordOperation(opIdx);\n    this.compose();\n  }\n  paintSolidColorImageMask(opIdx) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.dependencyTracker?.resetBBox(opIdx).recordBBox(opIdx, this.ctx, 0, 1, 0, 1).recordDependencies(opIdx, Dependencies.fill).recordOperation(opIdx);\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(opIdx, tag) {}\n  markPointProps(opIdx, tag, properties) {}\n  beginMarkedContent(opIdx, tag) {\n    this.dependencyTracker?.beginMarkedContent(opIdx);\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(opIdx, tag, properties) {\n    this.dependencyTracker?.beginMarkedContent(opIdx);\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent(opIdx) {\n    this.dependencyTracker?.endMarkedContent(opIdx);\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat(opIdx) {}\n  endCompat(opIdx) {}\n  consumePath(opIdx, path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n      this.dependencyTracker?.bboxToClipBoxDropOperation(opIdx).recordFutureForcedDependency(\"clipPath\", opIdx);\n    } else {\n      this.dependencyTracker?.recordOperation(opIdx);\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/shared/obj-bin-transform.js\n\n\n\n\n\n\n\n\n\n\nclass CssFontInfo {\n  #buffer;\n  #view;\n  #decoder;\n  static strings = [\"fontFamily\", \"fontWeight\", \"italicAngle\"];\n  static write(info) {\n    const encoder = new TextEncoder();\n    const encodedStrings = {};\n    let stringsLength = 0;\n    for (const prop of CssFontInfo.strings) {\n      const encoded = encoder.encode(info[prop]);\n      encodedStrings[prop] = encoded;\n      stringsLength += 4 + encoded.length;\n    }\n    const buffer = new ArrayBuffer(stringsLength);\n    const data = new Uint8Array(buffer);\n    const view = new DataView(buffer);\n    let offset = 0;\n    for (const prop of CssFontInfo.strings) {\n      const encoded = encodedStrings[prop];\n      const length = encoded.length;\n      view.setUint32(offset, length);\n      data.set(encoded, offset + 4);\n      offset += 4 + length;\n    }\n    assert(offset === buffer.byteLength, \"CssFontInfo.write: Buffer overflow\");\n    return buffer;\n  }\n  constructor(buffer) {\n    this.#buffer = buffer;\n    this.#view = new DataView(this.#buffer);\n    this.#decoder = new TextDecoder();\n  }\n  #readString(index) {\n    assert(index < CssFontInfo.strings.length, \"Invalid string index\");\n    let offset = 0;\n    for (let i = 0; i < index; i++) {\n      offset += this.#view.getUint32(offset) + 4;\n    }\n    const length = this.#view.getUint32(offset);\n    return this.#decoder.decode(new Uint8Array(this.#buffer, offset + 4, length));\n  }\n  get fontFamily() {\n    return this.#readString(0);\n  }\n  get fontWeight() {\n    return this.#readString(1);\n  }\n  get italicAngle() {\n    return this.#readString(2);\n  }\n}\nclass SystemFontInfo {\n  #buffer;\n  #view;\n  #decoder;\n  static strings = [\"css\", \"loadedName\", \"baseFontName\", \"src\"];\n  static write(info) {\n    const encoder = new TextEncoder();\n    const encodedStrings = {};\n    let stringsLength = 0;\n    for (const prop of SystemFontInfo.strings) {\n      const encoded = encoder.encode(info[prop]);\n      encodedStrings[prop] = encoded;\n      stringsLength += 4 + encoded.length;\n    }\n    stringsLength += 4;\n    let encodedStyleStyle,\n      encodedStyleWeight,\n      lengthEstimate = 1 + stringsLength;\n    if (info.style) {\n      encodedStyleStyle = encoder.encode(info.style.style);\n      encodedStyleWeight = encoder.encode(info.style.weight);\n      lengthEstimate += 4 + encodedStyleStyle.length + 4 + encodedStyleWeight.length;\n    }\n    const buffer = new ArrayBuffer(lengthEstimate);\n    const data = new Uint8Array(buffer);\n    const view = new DataView(buffer);\n    let offset = 0;\n    view.setUint8(offset++, info.guessFallback ? 1 : 0);\n    view.setUint32(offset, 0);\n    offset += 4;\n    stringsLength = 0;\n    for (const prop of SystemFontInfo.strings) {\n      const encoded = encodedStrings[prop];\n      const length = encoded.length;\n      stringsLength += 4 + length;\n      view.setUint32(offset, length);\n      data.set(encoded, offset + 4);\n      offset += 4 + length;\n    }\n    view.setUint32(offset - stringsLength - 4, stringsLength);\n    if (info.style) {\n      view.setUint32(offset, encodedStyleStyle.length);\n      data.set(encodedStyleStyle, offset + 4);\n      offset += 4 + encodedStyleStyle.length;\n      view.setUint32(offset, encodedStyleWeight.length);\n      data.set(encodedStyleWeight, offset + 4);\n      offset += 4 + encodedStyleWeight.length;\n    }\n    assert(offset <= buffer.byteLength, \"SubstitionInfo.write: Buffer overflow\");\n    return buffer.transferToFixedLength(offset);\n  }\n  constructor(buffer) {\n    this.#buffer = buffer;\n    this.#view = new DataView(this.#buffer);\n    this.#decoder = new TextDecoder();\n  }\n  get guessFallback() {\n    return this.#view.getUint8(0) !== 0;\n  }\n  #readString(index) {\n    assert(index < SystemFontInfo.strings.length, \"Invalid string index\");\n    let offset = 5;\n    for (let i = 0; i < index; i++) {\n      offset += this.#view.getUint32(offset) + 4;\n    }\n    const length = this.#view.getUint32(offset);\n    return this.#decoder.decode(new Uint8Array(this.#buffer, offset + 4, length));\n  }\n  get css() {\n    return this.#readString(0);\n  }\n  get loadedName() {\n    return this.#readString(1);\n  }\n  get baseFontName() {\n    return this.#readString(2);\n  }\n  get src() {\n    return this.#readString(3);\n  }\n  get style() {\n    let offset = 1;\n    offset += 4 + this.#view.getUint32(offset);\n    const styleLength = this.#view.getUint32(offset);\n    const style = this.#decoder.decode(new Uint8Array(this.#buffer, offset + 4, styleLength));\n    offset += 4 + styleLength;\n    const weightLength = this.#view.getUint32(offset);\n    const weight = this.#decoder.decode(new Uint8Array(this.#buffer, offset + 4, weightLength));\n    return {\n      style,\n      weight\n    };\n  }\n}\nclass FontInfo {\n  static bools = [\"black\", \"bold\", \"disableFontFace\", \"fontExtraProperties\", \"isInvalidPDFjsFont\", \"isType3Font\", \"italic\", \"missingFile\", \"remeasure\", \"vertical\"];\n  static numbers = [\"ascent\", \"defaultWidth\", \"descent\"];\n  static strings = [\"fallbackName\", \"loadedName\", \"mimetype\", \"name\"];\n  static #OFFSET_NUMBERS = Math.ceil(this.bools.length * 2 / 8);\n  static #OFFSET_BBOX = this.#OFFSET_NUMBERS + this.numbers.length * 8;\n  static #OFFSET_FONT_MATRIX = this.#OFFSET_BBOX + 1 + 2 * 4;\n  static #OFFSET_DEFAULT_VMETRICS = this.#OFFSET_FONT_MATRIX + 1 + 8 * 6;\n  static #OFFSET_STRINGS = this.#OFFSET_DEFAULT_VMETRICS + 1 + 2 * 3;\n  #buffer;\n  #decoder;\n  #view;\n  constructor({\n    data,\n    extra\n  }) {\n    this.#buffer = data;\n    this.#decoder = new TextDecoder();\n    this.#view = new DataView(this.#buffer);\n    if (extra) {\n      Object.assign(this, extra);\n    }\n  }\n  #readBoolean(index) {\n    assert(index < FontInfo.bools.length, \"Invalid boolean index\");\n    const byteOffset = Math.floor(index / 4);\n    const bitOffset = index * 2 % 8;\n    const value = this.#view.getUint8(byteOffset) >> bitOffset & 0x03;\n    return value === 0x00 ? undefined : value === 0x02;\n  }\n  get black() {\n    return this.#readBoolean(0);\n  }\n  get bold() {\n    return this.#readBoolean(1);\n  }\n  get disableFontFace() {\n    return this.#readBoolean(2);\n  }\n  get fontExtraProperties() {\n    return this.#readBoolean(3);\n  }\n  get isInvalidPDFjsFont() {\n    return this.#readBoolean(4);\n  }\n  get isType3Font() {\n    return this.#readBoolean(5);\n  }\n  get italic() {\n    return this.#readBoolean(6);\n  }\n  get missingFile() {\n    return this.#readBoolean(7);\n  }\n  get remeasure() {\n    return this.#readBoolean(8);\n  }\n  get vertical() {\n    return this.#readBoolean(9);\n  }\n  #readNumber(index) {\n    assert(index < FontInfo.numbers.length, \"Invalid number index\");\n    return this.#view.getFloat64(FontInfo.#OFFSET_NUMBERS + index * 8);\n  }\n  get ascent() {\n    return this.#readNumber(0);\n  }\n  get defaultWidth() {\n    return this.#readNumber(1);\n  }\n  get descent() {\n    return this.#readNumber(2);\n  }\n  get bbox() {\n    let offset = FontInfo.#OFFSET_BBOX;\n    const numCoords = this.#view.getUint8(offset);\n    if (numCoords === 0) {\n      return undefined;\n    }\n    offset += 1;\n    const bbox = [];\n    for (let i = 0; i < 4; i++) {\n      bbox.push(this.#view.getInt16(offset, true));\n      offset += 2;\n    }\n    return bbox;\n  }\n  get fontMatrix() {\n    let offset = FontInfo.#OFFSET_FONT_MATRIX;\n    const numPoints = this.#view.getUint8(offset);\n    if (numPoints === 0) {\n      return undefined;\n    }\n    offset += 1;\n    const fontMatrix = [];\n    for (let i = 0; i < 6; i++) {\n      fontMatrix.push(this.#view.getFloat64(offset, true));\n      offset += 8;\n    }\n    return fontMatrix;\n  }\n  get defaultVMetrics() {\n    let offset = FontInfo.#OFFSET_DEFAULT_VMETRICS;\n    const numMetrics = this.#view.getUint8(offset);\n    if (numMetrics === 0) {\n      return undefined;\n    }\n    offset += 1;\n    const defaultVMetrics = [];\n    for (let i = 0; i < 3; i++) {\n      defaultVMetrics.push(this.#view.getInt16(offset, true));\n      offset += 2;\n    }\n    return defaultVMetrics;\n  }\n  #readString(index) {\n    assert(index < FontInfo.strings.length, \"Invalid string index\");\n    let offset = FontInfo.#OFFSET_STRINGS + 4;\n    for (let i = 0; i < index; i++) {\n      offset += this.#view.getUint32(offset) + 4;\n    }\n    const length = this.#view.getUint32(offset);\n    const stringData = new Uint8Array(length);\n    stringData.set(new Uint8Array(this.#buffer, offset + 4, length));\n    return this.#decoder.decode(stringData);\n  }\n  get fallbackName() {\n    return this.#readString(0);\n  }\n  get loadedName() {\n    return this.#readString(1);\n  }\n  get mimetype() {\n    return this.#readString(2);\n  }\n  get name() {\n    return this.#readString(3);\n  }\n  get data() {\n    let offset = FontInfo.#OFFSET_STRINGS;\n    const stringsLength = this.#view.getUint32(offset);\n    offset += 4 + stringsLength;\n    const systemFontInfoLength = this.#view.getUint32(offset);\n    offset += 4 + systemFontInfoLength;\n    const cssFontInfoLength = this.#view.getUint32(offset);\n    offset += 4 + cssFontInfoLength;\n    const length = this.#view.getUint32(offset);\n    if (length === 0) {\n      return undefined;\n    }\n    return new Uint8Array(this.#buffer, offset + 4, length);\n  }\n  clearData() {\n    let offset = FontInfo.#OFFSET_STRINGS;\n    const stringsLength = this.#view.getUint32(offset);\n    offset += 4 + stringsLength;\n    const systemFontInfoLength = this.#view.getUint32(offset);\n    offset += 4 + systemFontInfoLength;\n    const cssFontInfoLength = this.#view.getUint32(offset);\n    offset += 4 + cssFontInfoLength;\n    const length = this.#view.getUint32(offset);\n    const data = new Uint8Array(this.#buffer, offset + 4, length);\n    data.fill(0);\n    this.#view.setUint32(offset, 0);\n  }\n  get cssFontInfo() {\n    let offset = FontInfo.#OFFSET_STRINGS;\n    const stringsLength = this.#view.getUint32(offset);\n    offset += 4 + stringsLength;\n    const systemFontInfoLength = this.#view.getUint32(offset);\n    offset += 4 + systemFontInfoLength;\n    const cssFontInfoLength = this.#view.getUint32(offset);\n    if (cssFontInfoLength === 0) {\n      return null;\n    }\n    const cssFontInfoData = new Uint8Array(cssFontInfoLength);\n    cssFontInfoData.set(new Uint8Array(this.#buffer, offset + 4, cssFontInfoLength));\n    return new CssFontInfo(cssFontInfoData.buffer);\n  }\n  get systemFontInfo() {\n    let offset = FontInfo.#OFFSET_STRINGS;\n    const stringsLength = this.#view.getUint32(offset);\n    offset += 4 + stringsLength;\n    const systemFontInfoLength = this.#view.getUint32(offset);\n    if (systemFontInfoLength === 0) {\n      return null;\n    }\n    const systemFontInfoData = new Uint8Array(systemFontInfoLength);\n    systemFontInfoData.set(new Uint8Array(this.#buffer, offset + 4, systemFontInfoLength));\n    return new SystemFontInfo(systemFontInfoData.buffer);\n  }\n  static write(font) {\n    const systemFontInfoBuffer = font.systemFontInfo ? SystemFontInfo.write(font.systemFontInfo) : null;\n    const cssFontInfoBuffer = font.cssFontInfo ? CssFontInfo.write(font.cssFontInfo) : null;\n    const encoder = new TextEncoder();\n    const encodedStrings = {};\n    let stringsLength = 0;\n    for (const prop of FontInfo.strings) {\n      encodedStrings[prop] = encoder.encode(font[prop]);\n      stringsLength += 4 + encodedStrings[prop].length;\n    }\n    const lengthEstimate = FontInfo.#OFFSET_STRINGS + 4 + stringsLength + 4 + (systemFontInfoBuffer ? systemFontInfoBuffer.byteLength : 0) + 4 + (cssFontInfoBuffer ? cssFontInfoBuffer.byteLength : 0) + 4 + (font.data ? font.data.length : 0);\n    const buffer = new ArrayBuffer(lengthEstimate);\n    const data = new Uint8Array(buffer);\n    const view = new DataView(buffer);\n    let offset = 0;\n    const numBools = FontInfo.bools.length;\n    let boolByte = 0,\n      boolBit = 0;\n    for (let i = 0; i < numBools; i++) {\n      const value = font[FontInfo.bools[i]];\n      const bits = value === undefined ? 0x00 : value ? 0x02 : 0x01;\n      boolByte |= bits << boolBit;\n      boolBit += 2;\n      if (boolBit === 8 || i === numBools - 1) {\n        view.setUint8(offset++, boolByte);\n        boolByte = 0;\n        boolBit = 0;\n      }\n    }\n    assert(offset === FontInfo.#OFFSET_NUMBERS, \"FontInfo.write: Boolean properties offset mismatch\");\n    for (const prop of FontInfo.numbers) {\n      view.setFloat64(offset, font[prop]);\n      offset += 8;\n    }\n    assert(offset === FontInfo.#OFFSET_BBOX, \"FontInfo.write: Number properties offset mismatch\");\n    if (font.bbox) {\n      view.setUint8(offset++, 4);\n      for (const coord of font.bbox) {\n        view.setInt16(offset, coord, true);\n        offset += 2;\n      }\n    } else {\n      view.setUint8(offset++, 0);\n      offset += 2 * 4;\n    }\n    assert(offset === FontInfo.#OFFSET_FONT_MATRIX, \"FontInfo.write: BBox properties offset mismatch\");\n    if (font.fontMatrix) {\n      view.setUint8(offset++, 6);\n      for (const point of font.fontMatrix) {\n        view.setFloat64(offset, point, true);\n        offset += 8;\n      }\n    } else {\n      view.setUint8(offset++, 0);\n      offset += 8 * 6;\n    }\n    assert(offset === FontInfo.#OFFSET_DEFAULT_VMETRICS, \"FontInfo.write: FontMatrix properties offset mismatch\");\n    if (font.defaultVMetrics) {\n      view.setUint8(offset++, 1);\n      for (const metric of font.defaultVMetrics) {\n        view.setInt16(offset, metric, true);\n        offset += 2;\n      }\n    } else {\n      view.setUint8(offset++, 0);\n      offset += 3 * 2;\n    }\n    assert(offset === FontInfo.#OFFSET_STRINGS, \"FontInfo.write: DefaultVMetrics properties offset mismatch\");\n    view.setUint32(FontInfo.#OFFSET_STRINGS, 0);\n    offset += 4;\n    for (const prop of FontInfo.strings) {\n      const encoded = encodedStrings[prop];\n      const length = encoded.length;\n      view.setUint32(offset, length);\n      data.set(encoded, offset + 4);\n      offset += 4 + length;\n    }\n    view.setUint32(FontInfo.#OFFSET_STRINGS, offset - FontInfo.#OFFSET_STRINGS - 4);\n    if (!systemFontInfoBuffer) {\n      view.setUint32(offset, 0);\n      offset += 4;\n    } else {\n      const length = systemFontInfoBuffer.byteLength;\n      view.setUint32(offset, length);\n      assert(offset + 4 + length <= buffer.byteLength, \"FontInfo.write: Buffer overflow at systemFontInfo\");\n      data.set(new Uint8Array(systemFontInfoBuffer), offset + 4);\n      offset += 4 + length;\n    }\n    if (!cssFontInfoBuffer) {\n      view.setUint32(offset, 0);\n      offset += 4;\n    } else {\n      const length = cssFontInfoBuffer.byteLength;\n      view.setUint32(offset, length);\n      assert(offset + 4 + length <= buffer.byteLength, \"FontInfo.write: Buffer overflow at cssFontInfo\");\n      data.set(new Uint8Array(cssFontInfoBuffer), offset + 4);\n      offset += 4 + length;\n    }\n    if (font.data === undefined) {\n      view.setUint32(offset, 0);\n      offset += 4;\n    } else {\n      view.setUint32(offset, font.data.length);\n      data.set(font.data, offset + 4);\n      offset += 4 + font.data.length;\n    }\n    assert(offset <= buffer.byteLength, \"FontInfo.write: Buffer overflow\");\n    return buffer.transferToFixedLength(offset);\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\n\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\n\n\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\n\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\n\n\n\n\n\n\n\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.4.296\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory, enableHWA);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getAnnotationsByType(types, pageIndexesToSkip) {\n    return this._transport.getAnnotationsByType(types, pageIndexesToSkip);\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n    this.recordedBBoxes = null;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    canvas = canvasContext.canvas,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false,\n    recordOperations = false,\n    operationsFilter = null\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const recordForDebugger = Boolean(this._pdfBug && globalThis.StepperManager?.enabled);\n    const shouldRecordOperations = !this.recordedBBoxes && (recordOperations || recordForDebugger);\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (shouldRecordOperations) {\n        const recordedBBoxes = internalRenderTask.gfx?.dependencyTracker.take();\n        if (recordedBBoxes) {\n          if (internalRenderTask.stepper) {\n            internalRenderTask.stepper.setOperatorBBoxes(recordedBBoxes, internalRenderTask.gfx.dependencyTracker.takeDebugMetadata());\n          }\n          if (recordOperations) {\n            this.recordedBBoxes = recordedBBoxes;\n          }\n        }\n      }\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvas,\n        canvasContext,\n        dependencyTracker: shouldRecordOperations ? new CanvasDependencyTracker(canvas, intentState.operatorList.length, recordForDebugger) : null,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n      enableHWA: this._transport.enableHWA,\n      operationsFilter\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory, enableHWA) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.enableHWA = enableHWA;\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const fontData = new FontInfo(exportedData);\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(fontData, inspectFont, exportedData.extra, exportedData.charProcOperatorList);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.clearData();\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getAnnotationsByType(types, pageIndexesToSkip) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotationsByType\", {\n      types,\n      pageIndexesToSkip\n    });\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n    enableHWA = false,\n    operationsFilter = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvas;\n    this._canvasContext = params.canvas ? null : params.canvasContext;\n    this._enableHWA = enableHWA;\n    this._dependencyTracker = params.dependencyTracker;\n    this._operationsFilter = operationsFilter;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      viewport,\n      transform,\n      background,\n      dependencyTracker\n    } = this.params;\n    const canvasContext = this._canvasContext || this._canvas.getContext(\"2d\", {\n      alpha: false,\n      willReadFrequently: !this._enableHWA\n    });\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors, dependencyTracker);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length);\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper, this._operationsFilter);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.4.296\";\nconst build = \"f56dc8601\";\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color?.toUpperCase() || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.ariaHasPopup = \"true\";\n    if (this.#editor) {\n      button.ariaControls = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.ariaHidden = \"true\";\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.ariaOrientation = \"horizontal\";\n    dropdown.ariaLabelledBy = \"highlightColorPickerLabel\";\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.ariaMultiSelectable = \"false\";\n    div.ariaOrientation = \"vertical\";\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    if (this.#editor) {\n      div.id = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.ariaSelected = color === this.#defaultColor;\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      value: color\n    });\n    this.updateColor(color);\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    this.#button.ariaExpanded = \"true\";\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#button.ariaExpanded = \"false\";\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.ariaSelected = i.next().value === color.toUpperCase();\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\nclass BasicColorPicker {\n  #input = null;\n  #editor = null;\n  #uiManager = null;\n  static #l10nColor = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#uiManager = editor._uiManager;\n    BasicColorPicker.#l10nColor ||= Object.freeze({\n      freetext: \"pdfjs-editor-color-picker-free-text-input\",\n      ink: \"pdfjs-editor-color-picker-ink-input\"\n    });\n  }\n  renderButton() {\n    if (this.#input) {\n      return this.#input;\n    }\n    const {\n      editorType,\n      colorType,\n      colorValue\n    } = this.#editor;\n    const input = this.#input = document.createElement(\"input\");\n    input.type = \"color\";\n    input.value = colorValue || \"#000000\";\n    input.className = \"basicColorPicker\";\n    input.tabIndex = 0;\n    input.setAttribute(\"data-l10n-id\", BasicColorPicker.#l10nColor[editorType]);\n    input.addEventListener(\"input\", () => {\n      this.#uiManager.updateParams(colorType, input.value);\n    }, {\n      signal: this.#uiManager._signal\n    });\n    return input;\n  }\n  update(value) {\n    if (!this.#input) {\n      return;\n    }\n    this.#input.value = value;\n  }\n  destroy() {\n    this.#input?.remove();\n    this.#input = null;\n  }\n  hideDropdown() {}\n}\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.find.js\nvar es_iterator_find = __webpack_require__(116);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.iterator.flat-map.js\nvar es_iterator_flat_map = __webpack_require__(531);\n;// ./src/shared/scripting_utils.js\n\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\nconst DateFormats = (/* unused pure expression or super */ null && ([\"m/d\", \"m/d/yy\", \"mm/dd/yy\", \"mm/yy\", \"d-mmm\", \"d-mmm-yy\", \"dd-mmm-yy\", \"yy-mm-dd\", \"mmm-yy\", \"mmmm-yy\", \"mmm d, yyyy\", \"mmmm d, yyyy\", \"m/d/yy h:MM tt\", \"m/d/yy HH:MM\"]));\nconst TimeFormats = (/* unused pure expression or super */ null && ([\"HH:MM\", \"h:MM tt\", \"HH:MM:ss\", \"h:MM:ss tt\"]));\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nconst TIMEZONE_OFFSET = new Date().getTimezoneOffset() * 60 * 1000;\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableComment = parameters.enableComment;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    contentsObj,\n    richText\n  }) {\n    return !!(contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data) || this.enableComment && !!this.commentText;\n  }\n  get commentData() {\n    const {\n      data\n    } = this;\n    const editor = this.annotationStorage?.getEditor(data.id);\n    if (editor) {\n      return editor.getData();\n    }\n    return data;\n  }\n  get hasCommentButton() {\n    return this.enableComment && this.hasPopupElement;\n  }\n  get commentButtonPosition() {\n    const editor = this.annotationStorage?.getEditor(this.data.id);\n    if (editor) {\n      return editor.commentButtonPositionInPage;\n    }\n    const {\n      quadPoints,\n      inkLists,\n      rect\n    } = this.data;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    if (quadPoints?.length >= 8) {\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        if (quadPoints[i + 1] > maxY) {\n          maxY = quadPoints[i + 1];\n          maxX = quadPoints[i + 2];\n        } else if (quadPoints[i + 1] === maxY) {\n          maxX = Math.max(maxX, quadPoints[i + 2]);\n        }\n      }\n      return [maxX, maxY];\n    }\n    if (inkLists?.length >= 1) {\n      for (const inkList of inkLists) {\n        for (let i = 0, ii = inkList.length; i < ii; i += 2) {\n          if (inkList[i + 1] > maxY) {\n            maxY = inkList[i + 1];\n            maxX = inkList[i];\n          } else if (inkList[i + 1] === maxY) {\n            maxX = Math.max(maxX, inkList[i]);\n          }\n        }\n      }\n      if (maxX !== Infinity) {\n        return [maxX, maxY];\n      }\n    }\n    if (rect) {\n      return [rect[2], rect[3]];\n    }\n    return null;\n  }\n  _normalizePoint(point) {\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.parent;\n    point[1] = view[3] - point[1] + view[1];\n    point[0] = 100 * (point[0] - pageX) / pageWidth;\n    point[1] = 100 * (point[1] - pageY) / pageHeight;\n    return point;\n  }\n  get commentText() {\n    const {\n      data\n    } = this;\n    return this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${data.id}`)?.popup?.contents || data.contentsObj?.str || \"\";\n  }\n  set commentText(text) {\n    const {\n      data\n    } = this;\n    const popup = {\n      deleted: !text,\n      contents: text || \"\"\n    };\n    if (!this.annotationStorage.updateEditor(data.id, {\n      popup\n    })) {\n      this.annotationStorage.setValue(`${AnnotationEditorPrefix}${data.id}`, {\n        id: data.id,\n        annotationType: data.annotationType,\n        pageIndex: this.parent.page._pageIndex,\n        popup,\n        popupRef: data.popupRef,\n        modificationDate: new Date()\n      });\n    }\n    if (!text) {\n      this.removePopup();\n    }\n  }\n  removePopup() {\n    (this.#popupElement?.popup || this.popup)?.remove();\n    this.#popupElement = this.popup = null;\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    if (params.rect) {\n      this.#updates ||= {\n        rect: this.data.rect.slice(0)\n      };\n    }\n    const {\n      rect,\n      popup: newPopup\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    let popup = this.#popupElement?.popup || this.popup;\n    if (!popup && newPopup?.text) {\n      this._createPopup(newPopup);\n      popup = this.#popupElement.popup;\n    }\n    if (!popup) {\n      return;\n    }\n    popup.updateEdited(params);\n    if (newPopup?.deleted) {\n      popup.remove();\n      this.#popupElement = null;\n      this.popup = null;\n    }\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement) && !(this instanceof LinkAnnotationElement)) {\n      container.tabIndex = 0;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex;\n    this.parent.zIndex += 2;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    svg.role = \"none\";\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup(popupData = null) {\n    const {\n      data\n    } = this;\n    let contentsObj, modificationDate;\n    if (popupData) {\n      contentsObj = {\n        str: popupData.text\n      };\n      modificationDate = popupData.date;\n    } else {\n      contentsObj = data.contentsObj;\n      modificationDate = data.modificationDate;\n    }\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate,\n        contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n        noRotate: true\n      },\n      linkService: this.linkService,\n      parent: this.parent,\n      elements: [this]\n    });\n    if (!this.parent._commentManager) {\n      this.parent.div.append(popup.render());\n    }\n  }\n  get hasPopupElement() {\n    return !!(this.#popupElement || this.popup || this.data.popupRef);\n  }\n  get extraPopupElement() {\n    return this.#popupElement;\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n        mustEnterInEditMode: true\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass EditorAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.editor = parameters.editor;\n  }\n  render() {\n    this.container.className = \"editorAnnotation\";\n    return this.container;\n  }\n  createOrUpdatePopup() {\n    const {\n      editor\n    } = this;\n    if (!editor.hasComment) {\n      return;\n    }\n    this._createPopup(editor.comment);\n    this.extraPopupElement.popup.renderCommentButton();\n  }\n  get hasCommentButton() {\n    return this.enableComment && this.editor.hasComment;\n  }\n  get commentButtonPosition() {\n    return this.editor.commentButtonPositionInPage;\n  }\n  get commentText() {\n    return this.editor.comment.text;\n  }\n  set commentText(text) {\n    this.editor.comment = text;\n    if (!text) {\n      this.removePopup();\n    }\n  }\n  get commentData() {\n    return this.editor.getData();\n  }\n  remove() {\n    this.container.remove();\n    this.container = null;\n    this.removePopup();\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action, data.overlaidText);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.overlaidText, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState, data.overlaidText);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest, data.overlaidText);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination, overlaidText = \"\") {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n  }\n  _bindNamedAction(link, action, overlaidText = \"\") {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, overlaidText = \"\", dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    } else if (overlaidText) {\n      link.title = overlaidText;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action, overlaidText = \"\") {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    if (overlaidText) {\n      link.title = overlaidText;\n    }\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (data.overlaidText) {\n      link.title = data.overlaidText;\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = 0;\n      const {\n        datetimeFormat,\n        datetimeType,\n        timeStep\n      } = this.data;\n      const hasDateOrTime = !!datetimeType && this.enableScripting;\n      if (datetimeFormat) {\n        element.title = datetimeFormat;\n      }\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (hasDateOrTime) {\n            target.type = datetimeType;\n            if (timeStep) {\n              target.step = timeStep;\n            }\n          }\n          if (elementData.userValue) {\n            const value = elementData.userValue;\n            if (hasDateOrTime) {\n              if (datetimeType === \"time\") {\n                const date = new Date(value);\n                const parts = [date.getHours(), date.getMinutes(), date.getSeconds()];\n                target.value = parts.map(v => v.toString().padStart(2, \"0\")).join(\":\");\n              } else {\n                target.value = new Date(value - TIMEZONE_OFFSET).toISOString().split(datetimeType === \"date\" ? \"T\" : \".\", 1)[0];\n              }\n            } else {\n              target.value = value;\n            }\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              if (!hasDateOrTime) {\n                storage.setValue(id, {\n                  value: elementData.userValue.toString()\n                });\n              }\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              const data = {\n                formattedValue\n              };\n              if (hasDateOrTime) {\n                data.value = formattedValue;\n              }\n              storage.setValue(id, data);\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            target\n          } = event;\n          let {\n            value\n          } = target;\n          if (hasDateOrTime) {\n            if (value && datetimeType === \"time\") {\n              const parts = value.split(\":\").map(v => parseInt(v, 10));\n              value = new Date(2000, 0, 1, parts[0], parts[1], parts[2] || 0).valueOf();\n              target.step = \"\";\n            } else {\n              if (!value.includes(\"T\")) {\n                value = `${value}T00:00`;\n              }\n              value = new Date(value).valueOf();\n            }\n            target.type = \"text\";\n          }\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = 0;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = 0;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = 0;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements,\n      parent\n    } = parameters;\n    const hasCommentManager = !!parent._commentManager;\n    super(parameters, {\n      isRenderable: !hasCommentManager && AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    if (hasCommentManager && AnnotationElement._hasPopupData(data)) {\n      const popup = this.popup = this.#createPopup();\n      for (const element of elements) {\n        element.popup = popup;\n      }\n    } else {\n      this.popup = null;\n    }\n  }\n  #createPopup() {\n    return new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate || this.data.creationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open,\n      commentManager: this.parent._commentManager\n    });\n  }\n  render() {\n    const {\n      container\n    } = this;\n    container.classList.add(\"popupAnnotation\");\n    container.role = \"comment\";\n    const popup = this.popup = this.#createPopup();\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #commentManager = null;\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #popupAbortController = null;\n  #position = null;\n  #commentButton = null;\n  #commentButtonPosition = null;\n  #popupPosition = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  #firstElement = null;\n  #commentText = null;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open,\n    commentManager = null\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#commentManager = commentManager;\n    this.#firstElement = elements[0];\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    if (commentManager) {\n      this.renderCommentButton();\n    } else {\n      this.#addEventListeners();\n      this.#container.hidden = true;\n      if (open) {\n        this.#toggle();\n      }\n    }\n  }\n  #addEventListeners() {\n    if (this.#popupAbortController) {\n      return;\n    }\n    this.#popupAbortController = new AbortController();\n    const {\n      signal\n    } = this.#popupAbortController;\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle, {\n        signal\n      });\n      element.addEventListener(\"pointerenter\", this.#boundShow, {\n        signal\n      });\n      element.addEventListener(\"pointerleave\", this.#boundHide, {\n        signal\n      });\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of this.#elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown, {\n        signal\n      });\n    }\n  }\n  #setCommentButtonPosition() {\n    const element = this.#elements.find(e => e.hasCommentButton);\n    if (!element) {\n      return;\n    }\n    this.#commentButtonPosition = element._normalizePoint(element.commentButtonPosition);\n  }\n  renderCommentButton() {\n    if (this.#commentButton) {\n      return;\n    }\n    if (!this.#commentButtonPosition) {\n      this.#setCommentButtonPosition();\n    }\n    if (!this.#commentButtonPosition) {\n      return;\n    }\n    const {\n      signal\n    } = this.#popupAbortController = new AbortController();\n    const hasOwnButton = !!this.#firstElement.extraPopupElement;\n    const togglePopup = () => {\n      this.#commentManager.toggleCommentPopup(this, true, undefined, !hasOwnButton);\n    };\n    const showPopup = () => {\n      this.#commentManager.toggleCommentPopup(this, false, true, !hasOwnButton);\n    };\n    const hidePopup = () => {\n      this.#commentManager.toggleCommentPopup(this, false, false);\n    };\n    if (!hasOwnButton) {\n      const button = this.#commentButton = document.createElement(\"button\");\n      button.className = \"annotationCommentButton\";\n      const parentContainer = this.#firstElement.container;\n      button.style.zIndex = parentContainer.style.zIndex + 1;\n      button.tabIndex = 0;\n      button.ariaHasPopup = \"dialog\";\n      button.ariaControls = \"commentPopup\";\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-show-comment-button\");\n      this.#updateColor();\n      this.#updateCommentButtonPosition();\n      button.addEventListener(\"keydown\", this.#boundKeyDown, {\n        signal\n      });\n      button.addEventListener(\"click\", togglePopup, {\n        signal\n      });\n      button.addEventListener(\"pointerenter\", showPopup, {\n        signal\n      });\n      button.addEventListener(\"pointerleave\", hidePopup, {\n        signal\n      });\n      parentContainer.after(button);\n    } else {\n      this.#commentButton = this.#firstElement.container;\n      for (const element of this.trigger) {\n        element.ariaHasPopup = \"dialog\";\n        element.ariaControls = \"commentPopup\";\n        element.addEventListener(\"keydown\", this.#boundKeyDown, {\n          signal\n        });\n        element.addEventListener(\"click\", togglePopup, {\n          signal\n        });\n        element.addEventListener(\"pointerenter\", showPopup, {\n          signal\n        });\n        element.addEventListener(\"pointerleave\", hidePopup, {\n          signal\n        });\n        element.classList.add(\"popupTriggerArea\");\n      }\n    }\n  }\n  #updateCommentButtonPosition() {\n    if (this.#firstElement.extraPopupElement && !this.#firstElement.editor) {\n      return;\n    }\n    this.renderCommentButton();\n    const [x, y] = this.#commentButtonPosition;\n    const {\n      style\n    } = this.#commentButton;\n    style.left = `calc(${x}%)`;\n    style.top = `calc(${y}% - var(--comment-button-dim))`;\n  }\n  #updateColor() {\n    if (this.#firstElement.extraPopupElement) {\n      return;\n    }\n    this.renderCommentButton();\n    this.#commentButton.style.backgroundColor = this.commentButtonColor || \"\";\n  }\n  get commentButtonColor() {\n    const {\n      color,\n      opacity\n    } = this.#firstElement.commentData;\n    if (!color) {\n      return null;\n    }\n    return this.#parent._commentManager.makeCommentColor(color, opacity);\n  }\n  focusCommentButton() {\n    setTimeout(() => {\n      this.#commentButton?.focus();\n    }, 0);\n  }\n  getData() {\n    const {\n      richText,\n      color,\n      opacity,\n      creationDate,\n      modificationDate\n    } = this.#firstElement.commentData;\n    return {\n      contentsObj: {\n        str: this.comment\n      },\n      richText,\n      color,\n      opacity,\n      creationDate,\n      modificationDate\n    };\n  }\n  get elementBeforePopup() {\n    return this.#commentButton;\n  }\n  get comment() {\n    this.#commentText ||= this.#firstElement.commentText;\n    return this.#commentText;\n  }\n  set comment(text) {\n    if (text === this.comment) {\n      return;\n    }\n    this.#firstElement.commentText = this.#commentText = text;\n  }\n  get parentBoundingClientRect() {\n    return this.#firstElement.layer.getBoundingClientRect();\n  }\n  setCommentButtonStates({\n    selected,\n    hasPopup\n  }) {\n    if (!this.#commentButton) {\n      return;\n    }\n    this.#commentButton.classList.toggle(\"selected\", selected);\n    this.#commentButton.ariaExpanded = hasPopup;\n  }\n  setSelectedCommentButton(selected) {\n    this.#commentButton.classList.toggle(\"selected\", selected);\n  }\n  get commentPopupPosition() {\n    if (this.#popupPosition) {\n      return this.#popupPosition;\n    }\n    const {\n      x,\n      y,\n      height\n    } = this.#commentButton.getBoundingClientRect();\n    const {\n      x: parentX,\n      y: parentY,\n      width: parentWidth,\n      height: parentHeight\n    } = this.#firstElement.layer.getBoundingClientRect();\n    return [(x - parentX) / parentWidth, (y + height - parentY) / parentHeight];\n  }\n  set commentPopupPosition(pos) {\n    this.#popupPosition = pos;\n  }\n  hasDefaultPopupPosition() {\n    return this.#popupPosition === null;\n  }\n  get commentButtonPosition() {\n    return this.#commentButtonPosition;\n  }\n  get commentButtonWidth() {\n    return this.#commentButton.getBoundingClientRect().width / this.parentBoundingClientRect.width;\n  }\n  editComment(options) {\n    const [posX, posY] = this.#popupPosition || this.commentButtonPosition.map(x => x / 100);\n    const parentDimensions = this.parentBoundingClientRect;\n    const {\n      x: parentX,\n      y: parentY,\n      width: parentWidth,\n      height: parentHeight\n    } = parentDimensions;\n    this.#commentManager.showDialog(null, this, parentX + posX * parentWidth, parentY + posY * parentHeight, {\n      ...options,\n      parentDimensions\n    });\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    if (this.#titleObj?.str) {\n      const title = document.createElement(\"span\");\n      title.className = \"title\";\n      header.append(title);\n      ({\n        dir: title.dir,\n        str: title.textContent\n      } = this.#titleObj);\n    }\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"time\");\n      modificationDate.className = \"popupDate\";\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      modificationDate.dateTime = this.#dateObj.toISOString();\n      header.append(modificationDate);\n    }\n    renderRichText({\n      html: this.#html || this.#contentsObj.str,\n      dir: this.#contentsObj?.dir,\n      className: \"popupContent\"\n    }, popup);\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popup,\n    deleted\n  }) {\n    if (this.#commentManager) {\n      if (deleted) {\n        this.remove();\n        this.#commentText = null;\n      } else if (popup) {\n        if (popup.deleted) {\n          this.remove();\n        } else {\n          this.#updateColor();\n          this.#commentText = popup.text;\n        }\n      }\n      if (rect) {\n        this.#commentButtonPosition = null;\n        this.#setCommentButtonPosition();\n        this.#updateCommentButtonPosition();\n      }\n      return;\n    }\n    if (deleted || popup?.deleted) {\n      this.remove();\n      return;\n    }\n    this.#addEventListeners();\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popup && popup.text) {\n      this.#richText = this.#makePopupContent(popup.text);\n      this.#dateObj = PDFDateString.toDateObject(popup.date);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  remove() {\n    this.#popupAbortController?.abort();\n    this.#popupAbortController = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#wasVisible = false;\n    this.#pinned = false;\n    this.#commentButton?.remove();\n    this.#commentButton = null;\n    if (this.trigger) {\n      for (const element of this.trigger) {\n        element.classList.remove(\"popupTriggerArea\");\n      }\n    }\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    if (this.#commentManager) {\n      this.#commentManager.toggleCommentPopup(this, false);\n      return;\n    }\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (this.#commentManager) {\n      return;\n    }\n    this.#addEventListeners();\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    if (this.#commentManager) {\n      return false;\n    }\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    if (overlaidText) {\n      const mark = document.createElement(\"mark\");\n      mark.classList.add(\"overlaidText\");\n      mark.textContent = overlaidText;\n      this.container.append(mark);\n    }\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    if (overlaidText) {\n      const strikeout = document.createElement(\"s\");\n      strikeout.classList.add(\"overlaidText\");\n      strikeout.textContent = overlaidText;\n      this.container.append(strikeout);\n    }\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #annotationStorage = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  #linkService = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer,\n    commentManager,\n    linkService,\n    annotationStorage\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.#linkService = linkService || null;\n    this.#annotationStorage = annotationStorage || new AnnotationStorage();\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n    this._commentManager = commentManager || null;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id, popupElements) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    if (popupElements) {\n      popupElements.at(-1).container.after(element);\n    } else {\n      this.div.append(element);\n      this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n    }\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: this.#linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: this.#annotationStorage,\n      enableComment: params.enableComment === true,\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id, elementParams.elements);\n      element.extraPopupElement?.popup?.renderCommentButton();\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService: this.#linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id, null);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  addFakeAnnotation(editor) {\n    const {\n      div\n    } = this;\n    const {\n      id,\n      rotation\n    } = editor;\n    const element = new EditorAnnotationElement({\n      data: {\n        id,\n        rect: editor.getPDFRect(),\n        rotation\n      },\n      editor,\n      layer: div,\n      parent: this,\n      enableComment: !!this._commentManager,\n      linkService: this.#linkService,\n      annotationStorage: this.#annotationStorage\n    });\n    const htmlElement = element.render();\n    div.append(htmlElement);\n    this.#accessibilityManager?.moveElementInDOM(div, htmlElement, htmlElement, false);\n    element.createOrUpdatePopup();\n    return element;\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\n\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  _colorPicker = null;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-freetext-added-alert\");\n    }\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.color]];\n  }\n  get toolbarButtons() {\n    this._colorPicker ||= new BasicColorPicker(this);\n    return [[\"colorPicker\", this._colorPicker]];\n  }\n  get colorType() {\n    return AnnotationEditorParamsType.FREETEXT_COLOR;\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  onUpdatedColor() {\n    this.editorDiv.style.color = this.color;\n    this._colorPicker?.update(this.color);\n    super.onUpdatedColor();\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.onUpdatedColor();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  getPDFRect() {\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    return this.getRect(padding, padding);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef,\n          richText,\n          contentsObj,\n          creationDate,\n          modificationDate\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        comment: contentsObj?.str || null,\n        richText,\n        creationDate,\n        modificationDate\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.color);\n    const serialized = Object.assign(super.serialize(isForCopying), {\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent()\n    });\n    this.addComment(serialized);\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this.hasEditedComment || this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (!content) {\n      return null;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    annotation.updateEdited({\n      rect: this.getPDFRect(),\n      popup: this._uiManager.hasCommentManager() || this.hasEditedComment ? this.comment : {\n        text: this.#content\n      }\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\n\n\n\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\n\n\n\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.firstPoint = [NaN, NaN];\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let firstPointX = lastX;\n    let firstPointY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    const bezierBbox = new Float32Array(4);\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (firstPointY > y) {\n          firstPointX = x;\n          firstPointY = y;\n        } else if (firstPointY === y) {\n          firstPointX = ltrCallback(firstPointX, x);\n        }\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        bezierBbox[0] = bezierBbox[1] = Infinity;\n        bezierBbox[2] = bezierBbox[3] = -Infinity;\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bezierBbox);\n        Util.rectBoundingBox(bezierBbox[0], bezierBbox[1], bezierBbox[2], bezierBbox[3], minMax);\n        if (firstPointY > bezierBbox[1]) {\n          firstPointX = bezierBbox[0];\n          firstPointY = bezierBbox[1];\n        } else if (firstPointY === bezierBbox[1]) {\n          firstPointX = ltrCallback(firstPointX, bezierBbox[0]);\n        }\n        if (lastPointY < bezierBbox[3]) {\n          lastPointX = bezierBbox[2];\n          lastPointY = bezierBbox[3];\n        } else if (lastPointY === bezierBbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bezierBbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.firstPoint = [firstPointX, firstPointY];\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass HighlightOutliner {\n  #box;\n  #firstPoint;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    let firstPointX = isLTR ? -Infinity : Infinity;\n    let firstPointY = Infinity;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2, left] = edge;\n      if (!left && isLTR) {\n        if (y1 < firstPointY) {\n          firstPointY = y1;\n          firstPointX = x;\n        } else if (y1 === firstPointY) {\n          firstPointX = Math.max(firstPointX, x);\n        }\n      } else if (left && !isLTR) {\n        if (y1 < firstPointY) {\n          firstPointY = y1;\n          firstPointX = x;\n        } else if (y1 === firstPointY) {\n          firstPointX = Math.min(firstPointX, x);\n        }\n      }\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#firstPoint = [firstPointX, firstPointY];\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#firstPoint, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, firstPoint, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.firstPoint = firstPoint;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #firstPoint = null;\n  #lastPoint = null;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-highlight-added-alert\");\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.getNonHCMColorName(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.getNonHCMColorName(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      firstPoint\n    } = this.#highlightOutlines;\n    this.#firstPoint = [(firstPoint[0] - this.x) / this.width, (firstPoint[1] - this.y) / this.height];\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      firstPoint\n    } = highlightOutlines;\n    this.#firstPoint = [(firstPoint[0] - x) / width, (firstPoint[1] - y) / height];\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  get commentButtonPosition() {\n    return this.#firstPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  onUpdatedColor() {\n    this.parent?.drawLayer.updateProperties(this.#id, {\n      root: {\n        fill: this.color,\n        \"fill-opacity\": this.opacity\n      }\n    });\n    this.#colorPicker?.updateColor(this.color);\n    super.onUpdatedColor();\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.opacity = opa;\n      this.onUpdatedColor();\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.getNonHCMColorName(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  get toolbarButtons() {\n    if (this._uiManager.highlightColors) {\n      const colorPicker = this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      return [[\"colorPicker\", colorPicker]];\n    }\n    return super.toolbarButtons;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    this.setDims(this.width, this.height);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    this.setDims(this.width, this.height);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef,\n          richText,\n          contentsObj,\n          creationDate,\n          modificationDate\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        richText,\n        comment: contentsObj?.str || null,\n        creationDate,\n        modificationDate\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef,\n          richText,\n          contentsObj,\n          creationDate,\n          modificationDate\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        richText,\n        comment: contentsObj?.str || null,\n        creationDate,\n        modificationDate\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data);\n    }\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const color = AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color));\n    const serialized = super.serialize(isForCopying);\n    Object.assign(serialized, {\n      color,\n      opacity: this.opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(serialized.rect)\n    });\n    this.addComment(serialized);\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return this.hasEditedComment || serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    annotation.updateEdited({\n      rect: this.getPDFRect(),\n      popup: this.comment\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\n\n\n\n\n\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _colorPicker = null;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  onUpdatedColor() {\n    this._colorPicker?.update(this.color);\n    super.onUpdatedColor();\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`);\n    }\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n      if (type === this.colorType) {\n        this.onUpdatedColor();\n      }\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      this.setDims();\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    this.setDims();\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getPDFRect()\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\n\n\n\n\n\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef,\n          richText,\n          contentsObj,\n          creationDate,\n          modificationDate\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef,\n        richText,\n        comment: contentsObj?.str || null,\n        creationDate,\n        modificationDate\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data);\n    }\n    return editor;\n  }\n  get toolbarButtons() {\n    this._colorPicker ||= new BasicColorPicker(this);\n    return [[\"colorPicker\", this._colorPicker]];\n  }\n  get colorType() {\n    return AnnotationEditorParamsType.INK_COLOR;\n  }\n  get color() {\n    return this._drawingOptions.stroke;\n  }\n  get opacity() {\n    return this._drawingOptions[\"stroke-opacity\"];\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = Object.assign(super.serialize(isForCopying), {\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      }\n    });\n    this.addComment(serialized);\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this.hasEditedComment || this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points,\n      popup: this.comment\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const pix = out[i] = buf[i << 2];\n      max = Math.max(max, pix);\n      min = Math.min(min, pix);\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, newWidth, newHeight);\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    } else {\n      this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n        description: this.#description || \"\"\n      }));\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    if (!this.div) {\n      return;\n    }\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  get toolbarButtons() {\n    if (this._uiManager.signatureManager) {\n      return [[\"editSignature\", this._uiManager.signatureManager]];\n    }\n    return super.toolbarButtons;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.description = description;\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims();\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = Object.assign(super.serialize(isForCopying), {\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness\n    });\n    this.addComment(serialized);\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this.addEditToolbar().then(() => {\n        this._editToolbar.hide();\n        this._uiManager.editAltText(this, true);\n      });\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get toolbarButtons() {\n    return [[\"altText\", this.createAltText()]];\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.createAltText();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    this.setDims();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-stamp-added-alert\");\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (ColorScheme.isDarkMode) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef,\n          richText,\n          contentsObj,\n          creationDate,\n          modificationDate\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef,\n        richText,\n        comment: contentsObj?.str || null,\n        creationDate,\n        modificationDate\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    if (data.comment) {\n      editor.setCommentData(data);\n    }\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = Object.assign(super.serialize(isForCopying), {\n      bitmapId: this.#bitmapId,\n      isSvg: this.#isSvg\n    });\n    this.addComment(serialized);\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n      serialized.id = this.annotationElementId;\n      delete serialized.bitmapId;\n      return serialized;\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this.hasEditedComment && !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    if (this.deleted) {\n      annotation.hide();\n      return null;\n    }\n    annotation.updateEdited({\n      rect: this.getPDFRect(),\n      popup: this.comment\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #textLayerDblClickAC = null;\n  #lastPointerDownTimestamp = -1;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.div.classList.toggle(\"nonEditing\", true);\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    classList.toggle(\"nonEditing\", false);\n    if (mode === AnnotationEditorType.POPUP) {\n      classList.toggle(\"commentEditing\", true);\n    } else {\n      classList.toggle(\"commentEditing\", false);\n      for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n        classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n      }\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  get #allEditorsIterator() {\n    return this.#editors.size !== 0 ? this.#editors.values() : this.#uiManager.getEditors(this.pageIndex);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    this.div.classList.toggle(\"nonEditing\", false);\n    this.#textLayerDblClickAC?.abort();\n    this.#textLayerDblClickAC = null;\n    const annotationElementIds = new Set();\n    for (const editor of this.#allEditorsIterator) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    const annotationLayer = this.#annotationLayer;\n    if (annotationLayer) {\n      for (const editable of annotationLayer.getEditableAnnotations()) {\n        editable.hide();\n        if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n          continue;\n        }\n        if (annotationElementIds.has(editable.data.id)) {\n          continue;\n        }\n        const editor = await this.deserialize(editable);\n        if (!editor) {\n          continue;\n        }\n        this.addOrRebuild(editor);\n        editor.enableEditing();\n      }\n    }\n    this.#isEnabling = false;\n    this.#uiManager._eventBus.dispatch(\"editorsrendered\", {\n      source: this,\n      pageNumber: this.pageIndex + 1\n    });\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    this.div.classList.toggle(\"nonEditing\", true);\n    if (this.#textLayer && !this.#textLayerDblClickAC) {\n      this.#textLayerDblClickAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textLayerDblClickAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", e => {\n        const DBL_CLICK_THRESHOLD = 500;\n        const {\n          clientX,\n          clientY,\n          timeStamp\n        } = e;\n        const lastPointerDownTimestamp = this.#lastPointerDownTimestamp;\n        if (timeStamp - lastPointerDownTimestamp > DBL_CLICK_THRESHOLD) {\n          this.#lastPointerDownTimestamp = timeStamp;\n          return;\n        }\n        this.#lastPointerDownTimestamp = -1;\n        const {\n          classList\n        } = this.div;\n        classList.toggle(\"getElements\", true);\n        const elements = document.elementsFromPoint(clientX, clientY);\n        classList.toggle(\"getElements\", false);\n        if (!this.div.contains(elements[0])) {\n          return;\n        }\n        let id;\n        const regex = new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);\n        for (const element of elements) {\n          if (regex.test(element.id)) {\n            id = element.id;\n            break;\n          }\n        }\n        if (!id) {\n          return;\n        }\n        const editor = this.#editors.get(id);\n        if (editor?.annotationElementId === null) {\n          e.stopPropagation();\n          e.preventDefault();\n          editor.dblclick(e);\n        }\n      }, {\n        signal,\n        capture: true\n      });\n    }\n    const annotationLayer = this.#annotationLayer;\n    if (annotationLayer) {\n      const changedAnnotations = new Map();\n      const resetAnnotations = new Map();\n      for (const editor of this.#allEditorsIterator) {\n        editor.disableEditing();\n        if (!editor.annotationElementId) {\n          editor.updateFakeAnnotationElement(annotationLayer);\n          continue;\n        }\n        if (editor.serialize() !== null) {\n          changedAnnotations.set(editor.annotationElementId, editor);\n          continue;\n        } else {\n          resetAnnotations.set(editor.annotationElementId, editor);\n        }\n        this.getEditableAnnotation(editor.annotationElementId)?.show();\n        editor.remove();\n      }\n      const editables = annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          editable.updateEdited({\n            deleted: true\n          });\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getEditorByUID(uid) {\n    for (const editor of this.#editors.values()) {\n      if (editor.uid === uid) {\n        return editor;\n      }\n    }\n    return null;\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  get boundingClientRect() {\n    return this.div.getBoundingClientRect();\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.boundingClientRect;\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  applyOpacity: applyOpacity,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  CSSConstants: CSSConstants,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  findContrastColor: findContrastColor,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getRGB: getRGB,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  renderRichText: renderRichText,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, CSSConstants, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, applyOpacity, build, createValidAbsoluteUrl, fetchData, findContrastColor, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getRGB, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, renderRichText, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map", "/* biome-ignore-all lint/suspicious/noExplicitAny: underline-type */\n\n/**\n * Error thrown when the parsed data is not a valid PDF document.\n *\n * Use this exception to signal that the input cannot be interpreted as a PDF\n * (corrupt file, invalid header, etc.).\n *\n * @public\n */\nexport class InvalidPDFException extends Error {\n\t/**\n\t * Create a new InvalidPDFException.\n\t * @param message - Optional error message.\n\t * @param cause - Optional underlying cause (preserved on modern runtimes).\n\t */\n\tconstructor(message?: string, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\t// Use modern ErrorOptions to attach cause when supported\n\t\t\tsuper(message ?? 'Invalid PDF', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'Invalid PDF');\n\t\t}\n\t\tthis.name = 'InvalidPDFException';\n\t\t// Fix TS/ES prototype chain (required)\n\t\tObject.setPrototypeOf(this, InvalidPDFException.prototype);\n\t\t// preserve native stack trace where available\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, InvalidPDFException);\n\t\t}\n\t\t// If you need to support older TS/targets that don't accept ErrorOptions,\n\t\t// replace the above super(...) with super(...); and uncomment:\n\t\t// if (cause !== undefined) (this as any).cause = cause;\n\t}\n}\n\n/**\n * Error indicating a PDF file requires a password or the provided password is incorrect.\n *\n * @public\n */\nexport class PasswordException extends Error {\n\t/**\n\t * Create a new PasswordException.\n\t * @param message - Optional error message.\n\t * @param cause - Optional underlying cause.\n\t */\n\tconstructor(message?: string, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\tsuper(message ?? 'Password required or incorrect', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'Password required or incorrect');\n\t\t}\n\t\tthis.name = 'PasswordException';\n\t\tObject.setPrototypeOf(this, PasswordException.prototype);\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, PasswordException);\n\t\t}\n\t\t// Fallback for older targets: if needed use (this as any).cause = cause;\n\t}\n}\n\n/**\n * Error thrown when the PDF structure/contents are malformed and cannot be parsed.\n *\n * This is raised for low-level format problems detected while reading PDF objects.\n * Errors caused during parsing PDF data.\n *\n * @public\n */\nexport class FormatError extends Error {\n\t/**\n\t * Create a new FormatError.\n\t * @param message - Optional message describing the format problem.\n\t * @param cause - Optional underlying cause.\n\t */\n\tconstructor(message?: string, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\tsuper(message ?? 'PDF format error', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'PDF format error');\n\t\t}\n\t\tthis.name = 'FormatError';\n\t\tObject.setPrototypeOf(this, FormatError.prototype);\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, FormatError);\n\t\t}\n\t\t// Fallback for older targets: if needed use (this as any).cause = cause;\n\t}\n}\n\n/**\n * Generic wrapper for errors where the library cannot classify the cause.\n *\n * The `details` property may contain additional information provided by the\n * underlying PDF library.\n *\n * @public\n */\nexport class UnknownErrorException extends Error {\n\t/**\n\t * Create a new UnknownErrorException.\n\t * @param message - Optional error message.\n\t * @param details - Optional additional details from the PDF library.\n\t * @param cause - Optional underlying cause.\n\t */\n\tconstructor(message?: string, details?: unknown, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\tsuper(message ?? 'Unknown error', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'Unknown error');\n\t\t}\n\t\tthis.name = 'UnknownErrorException';\n\t\tObject.setPrototypeOf(this, UnknownErrorException.prototype);\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, UnknownErrorException);\n\t\t}\n\t\t// additional info field from pdf.mjs\n\t\t(this as any).details = details;\n\t}\n}\n\n/**\n * Represents an HTTP/network response error encountered while fetching PDF data.\n *\n * The `status` and `missing` properties mirror values that may be provided\n * by the underlying PDF library's network layer.\n *\n * @public\n */\nexport class ResponseException extends Error {\n\t/**\n\t * Create a new ResponseException.\n\t * @param message - Optional error message.\n\t * @param status - Optional numeric HTTP/status code.\n\t * @param missing - Optional field describing missing resources.\n\t * @param cause - Optional underlying cause.\n\t */\n\tconstructor(message?: string, status?: number, missing?: unknown, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\tsuper(message ?? 'Response error', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'Response error');\n\t\t}\n\t\tthis.name = 'ResponseException';\n\t\tObject.setPrototypeOf(this, ResponseException.prototype);\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, ResponseException);\n\t\t}\n\t\t// fields from pdf.mjs\n\t\t(this as any).status = status;\n\t\t(this as any).missing = missing;\n\t}\n}\n\n/**\n * Error used to indicate that an operation was aborted (for example by an AbortSignal).\n *\n * @public\n */\nexport class AbortException extends Error {\n\t/**\n\t * Create a new AbortException.\n\t * @param message - Optional error message.\n\t * @param cause - Optional underlying cause.\n\t */\n\tconstructor(message?: string, cause?: unknown) {\n\t\tif (cause !== undefined) {\n\t\t\tsuper(message ?? 'Operation aborted', { cause });\n\t\t} else {\n\t\t\tsuper(message ?? 'Operation aborted');\n\t\t}\n\t\tthis.name = 'AbortException';\n\t\tObject.setPrototypeOf(this, AbortException.prototype);\n\t\tif (typeof (Error as any).captureStackTrace === 'function') {\n\t\t\t(Error as any).captureStackTrace(this, AbortException);\n\t\t}\n\t}\n}\n\n/**\n * Normalize arbitrary thrown values into an Error instance used by the library.\n *\n * Known Error instances with specific names are mapped to the library's\n * typed exceptions in order to preserve type information and any additional\n * fields (for example `details`, `status`, etc.). If the value is not an\n * Error it is converted to a generic Error containing the stringified value.\n *\n * @public\n * @param error - The thrown value to normalize.\n * @returns An Error instance representing the provided value.\n */\nexport function getException(error: unknown): Error {\n\tif (error instanceof Error) {\n\t\t// preserve original error (stack) when not remapping\n\t\tswitch (error.name) {\n\t\t\tcase 'InvalidPDFException':\n\t\t\t\treturn new InvalidPDFException(error.message, error);\n\t\t\tcase 'PasswordException':\n\t\t\t\treturn new PasswordException(error.message, error);\n\t\t\tcase 'FormatError':\n\t\t\t\treturn new FormatError(error.message, error);\n\t\t\tcase 'UnknownErrorException':\n\t\t\t\t// preserve details if present on original\n\t\t\t\treturn new UnknownErrorException(error.message, (error as any).details, error);\n\t\t\tcase 'ResponseException':\n\t\t\t\treturn new ResponseException(error.message, (error as any).status, (error as any).missing, error);\n\t\t\tcase 'AbortException':\n\t\t\t\treturn new AbortException(error.message, error);\n\t\t\t// add other mappings as needed\n\t\t\tdefault:\n\t\t\t\treturn error;\n\t\t}\n\t}\n\n\t// non-Error value -> convert to Error\n\treturn new Error(String(error));\n}\n", "export abstract class Shape {\n\tstatic tolerance = 2;\n\tpublic abstract transform(matrix: Array<number>): this;\n\n\tstatic applyTransform(p: Array<number>, m: Array<number>): Array<number> {\n\t\tconst xt = p[0] * m[0] + p[1] * m[2] + m[4];\n\t\tconst yt = p[0] * m[1] + p[1] * m[3] + m[5];\n\t\treturn [xt, yt];\n\t}\n}\n", "import { Shape } from './Shape.js';\n\nexport class Point extends Shape {\n\tpublic x: number;\n\tpublic y: number;\n\n\tconstructor(x: number, y: number) {\n\t\tsuper();\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tpublic equal(point: Point): boolean {\n\t\treturn point.x === this.x && point.y === this.y;\n\t}\n\n\tpublic transform(matrix: Array<number>): this {\n\t\tconst p = Shape.applyTransform([this.x, this.y], matrix);\n\t\tthis.x = p[0];\n\t\tthis.y = p[1];\n\t\treturn this;\n\t}\n}\n", "import { Point } from './Point.js';\nimport { Shape } from './Shape.js';\n\nexport enum LineDirection {\n\tNone = 0,\n\tHorizontal = 1,\n\tVertical,\n}\n\nexport class Line extends Shape {\n\tpublic from: Point;\n\tpublic to: Point;\n\tpublic direction: LineDirection = LineDirection.None;\n\tpublic length: number = 0;\n\tpublic intersections: Array<Point> = [];\n\tpublic gaps: Array<Line> = [];\n\n\tconstructor(from: Point, to: Point) {\n\t\tsuper();\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\t\tlet from = this.from;\n\t\tlet to = this.to;\n\n\t\tif (Math.abs(from.y - to.y) < Shape.tolerance) {\n\t\t\tthis.direction = LineDirection.Horizontal;\n\t\t\tto.y = from.y;\n\t\t\tif (from.x > to.x) {\n\t\t\t\tconst temp = from;\n\t\t\t\tfrom = to;\n\t\t\t\tto = temp;\n\t\t\t}\n\t\t\tthis.length = to.x - from.x;\n\t\t} else if (Math.abs(from.x - to.x) < Shape.tolerance) {\n\t\t\tthis.direction = LineDirection.Vertical;\n\t\t\tto.x = from.x;\n\t\t\tif (from.y > to.y) {\n\t\t\t\tconst temp = from;\n\t\t\t\tfrom = to;\n\t\t\t\tto = temp;\n\t\t\t}\n\t\t\tthis.length = to.y - from.y;\n\t\t}\n\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t}\n\n\tprivate _valid: boolean | undefined = undefined;\n\n\tget valid(): boolean {\n\t\tif (this._valid === undefined) {\n\t\t\tthis._valid = this.direction !== LineDirection.None && this.length > Shape.tolerance;\n\t\t}\n\t\treturn this._valid;\n\t}\n\n\tget normalized(): Line {\n\t\tif (this.direction === LineDirection.Horizontal) {\n\t\t\treturn new Line(\n\t\t\t\tnew Point(this.from.x - Shape.tolerance, this.from.y),\n\t\t\t\tnew Point(this.to.x + Shape.tolerance, this.from.y),\n\t\t\t);\n\t\t} else if (this.direction === LineDirection.Vertical) {\n\t\t\treturn new Line(\n\t\t\t\tnew Point(this.from.x, this.from.y - Shape.tolerance),\n\t\t\t\tnew Point(this.from.x, this.to.y + Shape.tolerance),\n\t\t\t);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic addGap(line: Line): void {\n\t\tthis.gaps.push(line);\n\t}\n\n\tpublic containsPoint(p: Point): boolean {\n\t\tif (this.direction === LineDirection.Vertical) {\n\t\t\treturn this.from.x === p.x && p.y >= this.from.y && p.y <= this.to.y;\n\t\t} else if (this.direction === LineDirection.Horizontal) {\n\t\t\treturn this.from.y === p.y && p.x >= this.from.x && p.x <= this.to.x;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// // todo implement\n\t// public containsLine(l:Line):boolean{\n\t//     if(this.direction === LineDirection.Vertical && l.direction === LineDirection.Vertical){\n\t//         return this.from.x === l.from.x\n\t//     }\n\t//     else if(this.direction === LineDirection.Horizontal && l.direction === LineDirection.Horizontal){\n\t//         return this.from.y === l.from.y\n\t//     }\n\t//     return false\n\t// }\n\n\tpublic addIntersectionPoint(point: Point): void {\n\t\tfor (const intPoint of this.intersections) {\n\t\t\tif (intPoint.equal(point)) return;\n\t\t}\n\t\tthis.intersections.push(point);\n\t}\n\n\tpublic intersection(line: Line): Point | undefined {\n\t\tlet result: Point | undefined;\n\n\t\tif (!this.valid || !line.valid) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst thisNormalized = this.normalized;\n\t\tconst lineNormalized = line.normalized;\n\n\t\tif (this.direction === LineDirection.Horizontal && line.direction === LineDirection.Vertical) {\n\t\t\tconst x = lineNormalized.from.x;\n\t\t\tconst y = thisNormalized.from.y;\n\t\t\tconst isOk =\n\t\t\t\tx > thisNormalized.from.x && x < thisNormalized.to.x && y > lineNormalized.from.y && y < lineNormalized.to.y;\n\n\t\t\tif (isOk) {\n\t\t\t\tconst intPoint = new Point(x, y);\n\t\t\t\tthis.addIntersectionPoint(intPoint);\n\t\t\t\tline.addIntersectionPoint(intPoint);\n\t\t\t\tresult = intPoint;\n\t\t\t}\n\t\t} else if (this.direction === LineDirection.Vertical && line.direction === LineDirection.Horizontal) {\n\t\t\tconst x = thisNormalized.from.x;\n\t\t\tconst y = lineNormalized.from.y;\n\t\t\tconst isOk =\n\t\t\t\tx > lineNormalized.from.x && x < lineNormalized.to.x && y > thisNormalized.from.y && y < thisNormalized.to.y;\n\n\t\t\tif (isOk) {\n\t\t\t\tconst intPoint = new Point(x, y);\n\t\t\t\tthis.addIntersectionPoint(intPoint);\n\t\t\t\tline.addIntersectionPoint(intPoint);\n\t\t\t\tresult = intPoint;\n\t\t\t}\n\t\t}\n\n\t\t// if(result){\n\t\t//     for (const gapLine of this.gaps) {\n\t\t//         if(gapLine.containsPoint(result)) return undefined\n\t\t//     }\n\t\t//\n\t\t//     for (const gapLine of line.gaps) {\n\t\t//         if(gapLine.containsPoint(result)) return undefined\n\t\t//     }\n\t\t// }\n\n\t\treturn result;\n\t}\n\n\tpublic transform(matrix: Array<number>): this {\n\t\tconst p1 = this.from.transform(matrix);\n\t\tconst p2 = this.to.transform(matrix);\n\n\t\tconst x = Math.min(p1.x, p2.x);\n\t\tconst y = Math.min(p1.y, p2.y);\n\n\t\tconst width = Math.abs(p1.x - p2.x);\n\t\tconst height = Math.abs(p1.y - p2.y);\n\n\t\tthis.from = new Point(x, y);\n\t\tthis.to = new Point(x + width, y + height);\n\t\tthis.init();\n\t\treturn this;\n\t}\n}\n", "import type { Point } from './Point.js';\n\nexport type TableCell = {\n\tminXY: Point;\n\tmaxXY: Point;\n\twidth: number;\n\theight: number;\n\tcolspan?: number;\n\trowspan?: number;\n\ttext: Array<string>;\n};\n\nexport type TableRow = Array<TableCell>;\n\nexport class TableData {\n\tpublic minXY: Point;\n\tpublic maxXY: Point;\n\tpublic rows: Array<TableRow>;\n\tprivate rowPivots: Array<number>;\n\tprivate colPivots: Array<number>;\n\n\tconstructor(minXY: Point, maxXY: Point, rowPivots: Array<number>, colPivots: Array<number>) {\n\t\tthis.minXY = minXY;\n\t\tthis.maxXY = maxXY;\n\t\tthis.rows = [];\n\t\tthis.rowPivots = rowPivots;\n\t\tthis.colPivots = colPivots;\n\t}\n\n\tpublic findCell(x: number, y: number): TableCell | undefined {\n\t\tif (x >= this.minXY.x && y >= this.minXY.y && x <= this.maxXY.x && y <= this.maxXY.y) {\n\t\t\tfor (const row of this.rows) {\n\t\t\t\tfor (const cell of row) {\n\t\t\t\t\tif (cell.minXY.x <= x && cell.minXY.y <= y && cell.maxXY.x >= x && cell.maxXY.y >= y) {\n\t\t\t\t\t\treturn cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tpublic get cellCount() {\n\t\treturn this.rows.reduce((acc, row) => acc + row.length, 0);\n\t}\n\n\tpublic get rowCount() {\n\t\treturn this.rows.length;\n\t}\n\n\tpublic check(): boolean {\n\t\t// const cellCounts:Array<number> = []\n\t\t//\n\t\t// for (const row of this.rows) {\n\t\t//     let cellNum = 0\n\t\t//     for (const cell of row) {\n\t\t//         cellNum += cell.colspan || 1\n\t\t//     }\n\t\t//     cellCounts.push(cellNum)\n\t\t// }\n\t\t//\n\t\t// for (let i = 1; i < cellCounts.length; i++) {\n\t\t//     if (cellCounts[i] !== cellCounts[i - 1]) {\n\t\t//         return false\n\t\t//     }\n\t\t// }\n\n\t\tconst virtualCellCount = (this.colPivots.length - 1) * (this.rowPivots.length - 1);\n\t\tlet allCellCount = 0;\n\n\t\tfor (const row of this.rows) {\n\t\t\tfor (const cell of row) {\n\t\t\t\tconst count = (cell.colspan || 1) * (cell.rowspan || 1);\n\t\t\t\tallCellCount += count;\n\t\t\t}\n\t\t}\n\n\t\tif (virtualCellCount !== allCellCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic toArray(): string[][] {\n\t\tconst tableArr: string[][] = [];\n\t\tfor (const row of this.rows) {\n\t\t\tconst rowArr: string[] = [];\n\t\t\tfor (const cell of row) {\n\t\t\t\tlet text = cell.text.join('');\n\t\t\t\ttext = text.replace(/^[\\s]+|[\\s]+$/g, '');\n\t\t\t\ttext = text.trim();\n\t\t\t\trowArr.push(text);\n\t\t\t}\n\t\t\ttableArr.push(rowArr);\n\t\t}\n\t\treturn tableArr;\n\t}\n}\n", "import { Line, LineDirection } from './Line.js';\nimport { Point } from './Point.js';\nimport { Shape } from './Shape.js';\nimport { type TableCell, TableData, type TableRow } from './TableData.js';\n\nexport class Table {\n\tpublic hLines: Array<Line> = [];\n\tpublic vLines: Array<Line> = [];\n\n\tconstructor(line: Line) {\n\t\tif (line.direction === LineDirection.Horizontal) {\n\t\t\tthis.hLines.push(line);\n\t\t} else if (line.direction === LineDirection.Vertical) {\n\t\t\tthis.vLines.push(line);\n\t\t}\n\t}\n\n\tpublic get isValid(): boolean {\n\t\treturn this.hLines.length + this.vLines.length > 4;\n\t}\n\n\tpublic get rowPivots(): Array<number> {\n\t\tconst rowSet: Set<number> = new Set();\n\n\t\tfor (const line of this.hLines) {\n\t\t\trowSet.add(line.from.y);\n\t\t}\n\n\t\treturn [...rowSet].sort((a, b) => a - b);\n\t}\n\n\tpublic get colPivots(): Array<number> {\n\t\tconst colSet: Set<number> = new Set();\n\n\t\tfor (const line of this.vLines) {\n\t\t\tcolSet.add(line.from.x);\n\t\t}\n\n\t\treturn [...colSet].sort((a, b) => a - b);\n\t}\n\n\tpublic add(line: Line): boolean {\n\t\tconst hasIntersection = this.intersection(line);\n\n\t\tif (hasIntersection) {\n\t\t\tif (line.direction === LineDirection.Horizontal) {\n\t\t\t\tthis.hLines.push(line);\n\t\t\t\treturn true;\n\t\t\t} else if (line.direction === LineDirection.Vertical) {\n\t\t\t\tthis.vLines.push(line);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate intersection(line: Line): boolean {\n\t\tlet flag = false;\n\t\tif (!line.valid) return flag;\n\n\t\tif (line.direction === LineDirection.Horizontal) {\n\t\t\tfor (const vLine of this.vLines) {\n\t\t\t\tconst p = line.intersection(vLine);\n\t\t\t\tif (p) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (line.direction === LineDirection.Vertical) {\n\t\t\tfor (const hLine of this.hLines) {\n\t\t\t\tconst p = line.intersection(hLine);\n\t\t\t\tif (p) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn flag;\n\t}\n\n\tprivate getSameHorizontal(line: Line): Array<Line> {\n\t\tconst same: Array<Line> = [line];\n\t\tconst other: Array<Line> = [];\n\n\t\twhile (this.hLines.length > 0) {\n\t\t\tconst hLine = this.hLines.shift();\n\t\t\tif (!hLine) continue;\n\n\t\t\tif (hLine.from.y === line.from.y) {\n\t\t\t\tsame.push(hLine);\n\t\t\t} else {\n\t\t\t\tother.push(hLine);\n\t\t\t}\n\t\t}\n\n\t\tthis.hLines = other;\n\t\treturn same;\n\t}\n\n\tprivate getSameVertical(line: Line): Array<Line> {\n\t\tconst same: Array<Line> = [line];\n\t\tconst other: Array<Line> = [];\n\n\t\twhile (this.vLines.length > 0) {\n\t\t\tconst vLine = this.vLines.shift();\n\t\t\tif (!vLine) continue;\n\n\t\t\tif (vLine.from.x === line.from.x) {\n\t\t\t\tsame.push(vLine);\n\t\t\t} else {\n\t\t\t\tother.push(vLine);\n\t\t\t}\n\t\t}\n\n\t\tthis.vLines = other;\n\t\treturn same;\n\t}\n\n\tprivate mergeHorizontalLines(lines: Array<Line>): Line {\n\t\tlines.sort((l1, l2) => l1.from.x - l2.from.x);\n\n\t\tconst minX = lines[0].from.x;\n\t\tconst maxX = lines[lines.length - 1].to.x;\n\n\t\tconst resultLine = new Line(new Point(minX, lines[0].from.y), new Point(maxX, lines[0].from.y));\n\n\t\tfor (let i = 1; i < lines.length; i++) {\n\t\t\tconst prevLine = lines[i - 1];\n\t\t\tconst currLine = lines[i];\n\n\t\t\tif (Math.abs(prevLine.to.x - currLine.from.x) > Shape.tolerance) {\n\t\t\t\tconst gapLine = new Line(\n\t\t\t\t\tnew Point(prevLine.to.x, prevLine.from.y),\n\t\t\t\t\tnew Point(currLine.from.x, currLine.from.y),\n\t\t\t\t);\n\t\t\t\tresultLine.addGap(gapLine);\n\t\t\t}\n\t\t}\n\n\t\treturn resultLine;\n\t}\n\n\tprivate mergeVerticalLines(lines: Array<Line>): Line {\n\t\tlines.sort((l1, l2) => l1.from.y - l2.from.y);\n\n\t\tconst minY = lines[0].from.y;\n\t\tconst maxY = lines[lines.length - 1].to.y;\n\n\t\tconst resultLine = new Line(new Point(lines[0].from.x, minY), new Point(lines[0].from.x, maxY));\n\n\t\tfor (let i = 1; i < lines.length; i++) {\n\t\t\tconst prevLine = lines[i - 1];\n\t\t\tconst currLine = lines[i];\n\n\t\t\tif (Math.abs(prevLine.to.y - currLine.from.y) > Shape.tolerance) {\n\t\t\t\tconst gapLine = new Line(new Point(prevLine.to.x, prevLine.to.y), new Point(prevLine.to.x, currLine.from.y));\n\t\t\t\tresultLine.addGap(gapLine);\n\t\t\t}\n\t\t}\n\n\t\treturn resultLine;\n\t}\n\n\tpublic normalize(): void {\n\t\tthis.hLines = this.hLines.filter((l) => l.intersections.length > 1);\n\t\tthis.vLines = this.vLines.filter((l) => l.intersections.length > 1);\n\n\t\tthis.hLines.sort((l1, l2) => l1.from.y - l2.from.y);\n\t\tthis.vLines.sort((l1, l2) => l1.from.x - l2.from.x);\n\n\t\tconst newHLines: Array<Line> = [];\n\n\t\twhile (this.hLines.length > 0) {\n\t\t\tconst line = this.hLines.shift();\n\t\t\tif (!line) continue;\n\n\t\t\tconst lines = this.getSameHorizontal(line);\n\t\t\tconst merged = this.mergeHorizontalLines(lines);\n\t\t\tnewHLines.push(merged);\n\t\t}\n\n\t\tthis.hLines = newHLines;\n\n\t\tconst newVLines: Array<Line> = [];\n\n\t\twhile (this.vLines.length > 0) {\n\t\t\tconst line = this.vLines.shift();\n\t\t\tif (!line) continue;\n\n\t\t\tconst lines = this.getSameVertical(line);\n\t\t\tconst merged = this.mergeVerticalLines(lines);\n\t\t\tnewVLines.push(merged);\n\t\t}\n\n\t\tthis.vLines = newVLines;\n\t}\n\n\tpublic verticalExists(line: Line, y1: number, y2: number): boolean {\n\t\tif (line.direction !== LineDirection.Vertical) {\n\t\t\tthrow new Error('Line is not vertical');\n\t\t}\n\n\t\tif (y1 >= y2) {\n\t\t\tthrow new Error('y1 must be less than y2');\n\t\t}\n\n\t\tif (line.from.y <= y1 && line.to.y >= y2) {\n\t\t\tfor (const gap of line.gaps) {\n\t\t\t\tif (gap.from.y <= y1 && gap.to.y >= y2) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic horizontalExists(line: Line, x1: number, x2: number): boolean {\n\t\tif (line.direction !== LineDirection.Horizontal) {\n\t\t\tthrow new Error('Line is not horizontal');\n\t\t}\n\n\t\tif (x1 >= x2) {\n\t\t\tthrow new Error('x1 must be less than x2');\n\t\t}\n\n\t\tif (line.from.x <= x1 && line.to.x >= x2) {\n\t\t\tfor (const gap of line.gaps) {\n\t\t\t\tif (gap.from.x <= x1 && gap.to.x >= x2) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate findBottomLineIndex(h2Index: number, xMiddle: number): number {\n\t\tfor (let i = h2Index; i < this.hLines.length; i++) {\n\t\t\tconst hLine = this.hLines[i];\n\t\t\tif (hLine.from.x <= xMiddle && hLine.to.x >= xMiddle) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprivate findVerticalLineIndexs(topHLine: Line, yMiddle: number): Array<number> {\n\t\tconst result: Array<number> = [];\n\n\t\tfor (let i = 0; i < this.vLines.length; i++) {\n\t\t\tconst vLine = this.vLines[i];\n\t\t\tif (vLine.from.y <= yMiddle && vLine.to.y >= yMiddle && topHLine.intersection(vLine)) {\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate getRow(h1Index: number, h2Index: number, yMiddle: number): TableRow {\n\t\tconst tableRow: TableRow = [];\n\t\t//const colCount = this.vLines.length -1\n\t\tconst topHLine = this.hLines[h1Index];\n\t\tconst vLineIndexes = this.findVerticalLineIndexs(topHLine, yMiddle);\n\n\t\tfor (let i = 1; i < vLineIndexes.length; i++) {\n\t\t\tconst leftVLine = this.vLines[vLineIndexes[i - 1]];\n\t\t\tconst rightVLine = this.vLines[vLineIndexes[i]];\n\t\t\tconst xMiddle = (leftVLine.from.x + rightVLine.from.x) / 2;\n\t\t\tconst bottomHLineIndex = this.findBottomLineIndex(h2Index, xMiddle);\n\t\t\tconst bottomHLine = this.hLines[bottomHLineIndex];\n\t\t\t// minXY: {x:leftVLine.from.x,y:topHLine.from.y},\n\t\t\t// maxXY: {x:rightVLine.from.x,y:bottomHLine.from.y},\n\t\t\tconst tableCell: TableCell = {\n\t\t\t\tminXY: new Point(leftVLine.from.x, topHLine.from.y),\n\t\t\t\tmaxXY: new Point(rightVLine.from.x, bottomHLine.from.y),\n\t\t\t\twidth: rightVLine.from.x - leftVLine.from.x,\n\t\t\t\theight: bottomHLine.from.y - topHLine.from.y,\n\t\t\t\ttext: [],\n\t\t\t};\n\t\t\tconst colSpan = vLineIndexes[i] - vLineIndexes[i - 1];\n\t\t\tconst rowSpan = bottomHLineIndex - h1Index;\n\n\t\t\tif (colSpan > 1) {\n\t\t\t\ttableCell.colspan = colSpan;\n\t\t\t}\n\t\t\tif (rowSpan > 1) {\n\t\t\t\ttableCell.rowspan = rowSpan;\n\t\t\t}\n\n\t\t\ttableRow.push(tableCell);\n\t\t}\n\n\t\treturn tableRow;\n\t}\n\n\tpublic toData(): TableData {\n\t\tconst rowPivots = this.rowPivots;\n\t\tconst colPivots = this.colPivots;\n\n\t\tconst minXY = new Point(colPivots[0], rowPivots[0]);\n\t\tconst maxXY = new Point(colPivots[colPivots.length - 1], rowPivots[rowPivots.length - 1]);\n\n\t\tconst result: TableData = new TableData(minXY, maxXY, rowPivots, colPivots);\n\n\t\tfor (let h1 = 1; h1 < this.hLines.length; h1++) {\n\t\t\tconst prevHLine = this.hLines[h1 - 1];\n\t\t\tconst currHLine = this.hLines[h1];\n\t\t\tconst YMiddle = (prevHLine.from.y + currHLine.from.y) / 2;\n\t\t\tconst rowData = this.getRow(h1 - 1, h1, YMiddle);\n\t\t\tresult.rows.push(rowData);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n", "import { Line, LineDirection } from './Line.js';\nimport { Point } from './Point.js';\nimport type { Rectangle } from './Rectangle.js';\nimport { Shape } from './Shape.js';\nimport { Table } from './Table.js';\nimport type { TableData } from './TableData.js';\n\nexport class LineStore {\n\tpublic hLines: Array<Line> = [];\n\tpublic vLines: Array<Line> = [];\n\n\tpublic add(line: Line): void {\n\t\tif (line.valid) {\n\t\t\tif (line.direction === LineDirection.Horizontal) {\n\t\t\t\tthis.hLines.push(line);\n\t\t\t} else if (line.direction === LineDirection.Vertical) {\n\t\t\t\tthis.vLines.push(line);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic addRectangle(rect: Rectangle): void {\n\t\tfor (const line of rect.getLines()) {\n\t\t\tthis.add(line);\n\t\t}\n\t}\n\n\tpublic getTableData(): Array<TableData> {\n\t\tconst result: Array<TableData> = [];\n\n\t\tconst tables = this.getTables();\n\n\t\tfor (const table of tables) {\n\t\t\tconst data = table.toData();\n\t\t\tif (data) {\n\t\t\t\tresult.push(data);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic getTables(): Array<Table> {\n\t\tconst result: Array<Table> = [];\n\n\t\twhile (this.hLines.length !== 0) {\n\t\t\tconst hLine = this.hLines.shift();\n\t\t\tif (!hLine) continue;\n\n\t\t\tconst filled = this.tryFill(result, hLine);\n\t\t\tif (filled) continue;\n\n\t\t\tconst table = new Table(hLine);\n\t\t\tthis.fillTable(table);\n\t\t\tresult.push(table);\n\t\t}\n\n\t\twhile (this.vLines.length !== 0) {\n\t\t\tconst vLine = this.vLines.shift();\n\t\t\tif (!vLine) continue;\n\n\t\t\tconst filled = this.tryFill(result, vLine);\n\t\t\tif (filled) continue;\n\n\t\t\tconst table = new Table(vLine);\n\t\t\tthis.fillTable(table);\n\t\t\tresult.push(table);\n\t\t}\n\n\t\tconst validTables = result.filter((t) => t.isValid);\n\n\t\tfor (const table of validTables) {\n\t\t\ttable.normalize();\n\t\t}\n\n\t\treturn validTables;\n\t}\n\n\tpublic normalize(): void {\n\t\tthis.normalizeHorizontal();\n\t\tthis.normalizeVertical();\n\t}\n\n\tpublic normalizeHorizontal() {\n\t\tthis.hLines.sort((l1, l2) => l1.from.y - l2.from.y);\n\n\t\tconst newLines: Array<Line> = [];\n\n\t\tlet sameY: Array<Line> = [];\n\t\tfor (const line of this.hLines) {\n\t\t\tif (sameY.length === 0) {\n\t\t\t\tsameY.push(line);\n\t\t\t} else if (Math.abs(sameY[0]?.from.y - line.from.y) < Shape.tolerance) {\n\t\t\t\tsameY.push(line);\n\t\t\t} else {\n\t\t\t\tconst merged = this.margeHorizontalLines(sameY);\n\t\t\t\tnewLines.push(...merged);\n\t\t\t\tsameY = [line];\n\t\t\t}\n\t\t}\n\n\t\tif (sameY.length > 0) {\n\t\t\tconst merged = this.margeHorizontalLines(sameY);\n\t\t\tnewLines.push(...merged);\n\t\t}\n\n\t\tthis.hLines = newLines;\n\t}\n\n\tpublic normalizeVertical() {\n\t\tthis.vLines.sort((l1, l2) => l1.from.x - l2.from.x);\n\n\t\tconst newLines: Array<Line> = [];\n\n\t\tlet sameX: Array<Line> = [];\n\t\tfor (const line of this.vLines) {\n\t\t\tif (sameX.length === 0) {\n\t\t\t\tsameX.push(line);\n\t\t\t} else if (Math.abs(sameX[0]?.from.x - line.from.x) < Shape.tolerance) {\n\t\t\t\tsameX.push(line);\n\t\t\t} else {\n\t\t\t\tconst merged = this.margeVerticalLines(sameX);\n\t\t\t\tnewLines.push(...merged);\n\t\t\t\tsameX = [line];\n\t\t\t}\n\t\t}\n\n\t\tif (sameX.length > 0) {\n\t\t\tconst merged = this.margeVerticalLines(sameX);\n\t\t\tnewLines.push(...merged);\n\t\t}\n\n\t\tthis.vLines = newLines;\n\t}\n\n\tprivate fillTable(table: Table): void {\n\t\tconst newVLines: Array<Line> = [];\n\t\tconst newHLines: Array<Line> = [];\n\n\t\tfor (const vLine of this.vLines) {\n\t\t\tif (!table.add(vLine)) {\n\t\t\t\tnewVLines.push(vLine);\n\t\t\t}\n\t\t}\n\n\t\tfor (const hLine of this.hLines) {\n\t\t\tif (!table.add(hLine)) {\n\t\t\t\tnewHLines.push(hLine);\n\t\t\t}\n\t\t}\n\n\t\tthis.hLines = newHLines;\n\t\tthis.vLines = newVLines;\n\t}\n\n\tprivate tryFill(tables: Array<Table>, line: Line): boolean {\n\t\tfor (const table of tables) {\n\t\t\tif (table.add(line)) {\n\t\t\t\tthis.fillTable(table);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate margeHorizontalLines(sameYLines: Array<Line>): Array<Line> {\n\t\tconst result: Array<Line> = [];\n\t\tsameYLines.sort((l1, l2) => l1.from.x - l2.from.x);\n\n\t\tconst sameY = sameYLines[0]?.from.y;\n\t\tif (sameY === undefined) return result;\n\n\t\tlet minX: number = Number.MAX_SAFE_INTEGER;\n\t\tlet maxX: number = Number.MIN_SAFE_INTEGER;\n\n\t\tfor (const line of sameYLines) {\n\t\t\tif (line.from.x - maxX < Shape.tolerance) {\n\t\t\t\tif (line.from.x < minX) {\n\t\t\t\t\tminX = line.from.x;\n\t\t\t\t}\n\t\t\t\tif (line.to.x > maxX) {\n\t\t\t\t\tmaxX = line.to.x;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (maxX > minX) {\n\t\t\t\t\tresult.push(new Line(new Point(minX, sameY), new Point(maxX, sameY)));\n\t\t\t\t}\n\t\t\t\tminX = line.from.x;\n\t\t\t\tmaxX = line.to.x;\n\t\t\t}\n\t\t}\n\n\t\tconst last = result[result.length - 1];\n\n\t\tif (last) {\n\t\t\tif (last.from.x !== minX && last.to.x !== maxX) {\n\t\t\t\tresult.push(new Line(new Point(minX, sameY), new Point(maxX, sameY)));\n\t\t\t}\n\t\t} else {\n\t\t\tresult.push(new Line(new Point(minX, sameY), new Point(maxX, sameY)));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate margeVerticalLines(sameXLines: Array<Line>): Array<Line> {\n\t\tconst result: Array<Line> = [];\n\t\tsameXLines.sort((l1, l2) => l1.from.y - l2.from.y);\n\n\t\tconst sameX = sameXLines[0]?.from.x;\n\t\tif (sameX === undefined) return result;\n\n\t\tlet minY: number = Number.MAX_SAFE_INTEGER;\n\t\tlet maxY: number = Number.MIN_SAFE_INTEGER;\n\n\t\tfor (const line of sameXLines) {\n\t\t\tif (line.from.y - maxY < Shape.tolerance) {\n\t\t\t\tif (line.from.y < minY) {\n\t\t\t\t\tminY = line.from.y;\n\t\t\t\t}\n\t\t\t\tif (line.to.y > maxY) {\n\t\t\t\t\tmaxY = line.to.y;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (maxY > minY) {\n\t\t\t\t\tresult.push(new Line(new Point(sameX, minY), new Point(sameX, maxY)));\n\t\t\t\t}\n\t\t\t\tminY = line.from.y;\n\t\t\t\tmaxY = line.to.y;\n\t\t\t}\n\t\t}\n\n\t\tconst last = result[result.length - 1];\n\n\t\tif (last) {\n\t\t\tif (last.from.y !== minY && last.to.y !== maxY) {\n\t\t\t\tresult.push(new Line(new Point(sameX, minY), new Point(sameX, maxY)));\n\t\t\t}\n\t\t} else {\n\t\t\tresult.push(new Line(new Point(sameX, minY), new Point(sameX, maxY)));\n\t\t}\n\n\t\treturn result;\n\t}\n}\n", "import { Line } from './Line.js';\nimport { Point } from './Point.js';\nimport { Shape } from './Shape.js';\n\nexport class Rectangle extends Shape {\n\tpublic from: Point;\n\tpublic width: number;\n\tpublic height: number;\n\n\tconstructor(from: Point, width: number, height: number) {\n\t\tsuper();\n\t\tthis.from = from;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n\tpublic get to(): Point {\n\t\treturn new Point(this.from.x + this.width, this.from.y + this.height);\n\t}\n\n\tpublic getLines(): Line[] {\n\t\tconst to = this.to;\n\n\t\tconst lines: Array<Line> = [\n\t\t\tnew Line(this.from, new Point(to.x, this.from.y)),\n\t\t\tnew Line(this.from, new Point(this.from.x, to.y)),\n\t\t\tnew Line(new Point(to.x, this.from.y), to),\n\t\t\tnew Line(new Point(this.from.x, to.y), to),\n\t\t];\n\t\treturn lines.filter((l) => l.valid);\n\t}\n\n\tpublic transform(matrix: Array<number>): this {\n\t\tconst p1 = Shape.applyTransform([this.from.x, this.from.y], matrix);\n\t\tconst p2 = Shape.applyTransform([this.from.x + this.width, this.from.y + this.height], matrix);\n\n\t\tconst x = Math.min(p1[0], p2[0]);\n\t\tconst y = Math.min(p1[1], p2[1]);\n\n\t\tconst width = Math.abs(p1[0] - p2[0]);\n\t\tconst height = Math.abs(p1[1] - p2[1]);\n\n\t\tthis.from = new Point(x, y);\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\treturn this;\n\t}\n}\n", "import type { ImageKind } from 'pdfjs-dist/legacy/build/pdf.mjs';\n\n/**\n * @public\n * ImageKindKey\n * - Represents the keys of the ImageKind enum (e.g. \"GRAYSCALE_1BPP\", \"RGB_24BPP\", \"RGBA_32BPP\").\n */\nexport type ImageKindKey = keyof typeof ImageKind;\n\n/**\n * @public\n * ImageKindValue\n * - Represents the numeric values of the ImageKind enum (e.g. 1, 2, 3).\n */\nexport type ImageKindValue = (typeof ImageKind)[ImageKindKey];\n\n/**\n * @public\n * ImageResult\n * Helper container for extracted images grouped per page.\n */\nexport class ImageResult {\n\tpages: Array<PageImages> = [];\n\ttotal: number = 0;\n\n\tpublic getPageImage(num: number, name: string): EmbeddedImage | null {\n\t\tfor (const pageData of this.pages) {\n\t\t\tif (pageData.pageNumber === num) {\n\t\t\t\tfor (const img of pageData.images) {\n\t\t\t\t\tif (img.name === name) {\n\t\t\t\t\t\treturn img;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tconstructor(total: number) {\n\t\tthis.total = total;\n\t}\n}\n\n/**\n * @public\n * PageImages\n * - Represents all embedded images found on a single PDF page.\n * - pageNumber: 1-based page index.\n * - images: Array of EmbeddedImage objects for this page.\n */\nexport interface PageImages {\n\tpageNumber: number;\n\timages: EmbeddedImage[];\n}\n\n/**\n * @public\n * EmbeddedImage\n * - Normalized representation of an embedded image extracted from the PDF.\n * - `data`: Raw image bytes (e.g. PNG/JPEG) as Uint8Array. Use this for file writing or binary processing.\n * - `dataUrl`: Optional data URL (e.g. \"data:image/png;base64,...\") for directly embedding in <img> src.\n *   Storing both lets consumers choose the most convenient form; consider omitting one to save memory.\n * - `name`: Resource name for the image.\n * - `width` / `height`: Dimensions in pixels.\n * - `kind`: ImageKindValue from indicating the pixel format (e.g. GRAYSCALE_1BPP / RGB_24BPP / RGBA_32BPP).\n */\nexport interface EmbeddedImage {\n\t// Raw binary image data (PNG/JPEG) normalized to Uint8Array.\n\tdata: Uint8Array;\n\n\t// Optional base64 data URL for easy embedding in HTML.\n\tdataUrl: string;\n\n\t// Resource identifier for the image.\n\tname: string;\n\n\t// Image dimensions in pixels.\n\twidth: number;\n\theight: number;\n\n\t// Color format as defined by pdfjs ImageKind numeric values.\n\tkind: ImageKindValue;\n}\n", "import * as pdfjs from 'pdfjs-dist/legacy/build/pdf.mjs';\nimport type { Metadata } from 'pdfjs-dist/types/src/display/metadata.js';\n\nconst XMP_DATE_PROPERTIES = [\n\t'xmp:createdate',\n\t'xmp:modifydate',\n\t'xmp:metadatadate',\n\t'xap:createdate',\n\t'xap:modifydate',\n\t'xap:metadatadate',\n];\n\nexport type { Metadata } from 'pdfjs-dist/types/src/display/metadata.js';\n\n/**\n * @public\n * Node representing a single item in the PDF outline (bookmarks).\n * This mirrors the structure returned by PDF.js' getOutline() API.\n */\nexport interface OutlineNode {\n\t// The visible title of the bookmark / outline entry.\n\ttitle: string;\n\n\t// If true, the title should be rendered in bold.\n\tbold: boolean;\n\n\t// If true, the title should be rendered in italic.\n\titalic: boolean;\n\n\t// Optional RGBA color for the title as a clamped byte array.\n\tcolor: Uint8ClampedArray;\n\n\t// Destination for the outline item. PDF.js may return a named\n\t// destination (string) or an array representing an explicit destination.\n\t// Can be null when no explicit destination is available.\n\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\tdest: string | Array<any> | null;\n\n\t// If the outline entry points to an external URL, it will be here.\n\turl: string | null;\n\n\t// When PDF.js flags a URL as unsafe the raw value is available here.\n\tunsafeUrl?: string;\n\n\t// Whether the link should open in a new window/tab if rendered.\n\tnewWindow?: boolean;\n\n\t// Number of child entries (if provided by the PDF). May be undefined.\n\tcount?: number;\n\n\t// Child outline items. Type is kept loose to match PDF.js returns.\n\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\titems: Array<any>;\n}\n\n/**\n * @public\n * Consolidated date information gathered from different PDF sources.\n * The PDF 'Info' dictionary contains CreationDate / ModDate and\n * the XMP/XAP metadata can contain several timestamps as well. This\n * structure collects those values (if present) as JavaScript Date objects\n * or null when the property exists but cannot be parsed.\n */\nexport type DateNode = {\n\tCreationDate?: Date | null;\n\tModDate?: Date | null;\n\tXmpCreateDate?: Date | null;\n\tXmpModifyDate?: Date | null;\n\tXmpMetadataDate?: Date | null;\n\tXapCreateDate?: Date | null;\n\tXapModifyDate?: Date | null;\n\tXapMetadataDate?: Date | null;\n};\n\n/**\n * @public\n * Per-page link extraction result.\n * - pageNumber: the physical page index (1-based) within the PDF document.\n * - pageLabel: optional printed page label shown by PDF viewers (e.g. \"iii\", \"1\", \"A-1\");\n *              this can differ from the physical page number and may be undefined\n *              when the document does not provide labels.\n * - links: array of text-&gt;URL mappings that were found/overlaid on the page.\n * - width/height: page dimensions in PDF units for the viewport used.\n */\nexport type PageLinkResult = {\n\t// Physical page number (1-based index inside the PDF document).\n\tpageNumber: number;\n\n\t// Optional printed page label as displayed by PDF viewers. May be null/undefined\n\t// if the document does not provide explicit labels for pages.\n\tpageLabel?: string | null;\n\n\t// Hyperlinks that were overlaid or embedded on the page surface. Each entry\n\t// contains the visible text (if any) and the resolved URL.\n\tlinks: Array<{ text: string; url: string }>;\n\n\t// Page width and height for the page viewport that was used when extracting links.\n\twidth: number;\n\theight: number;\n};\n\n/**\n * @public\n * Aggregated information about a PDF document returned by getInfo().\n * The object contains high-level metadata, outline/bookmark structure,\n * per-page extracted hyperlinks and utility helpers for parsing dates.\n */\nexport class InfoResult {\n\t// Total number of pages in the PDF document (count of physical pages).\n\ttotal: number;\n\n\t/**\n\t * The PDF 'Info' dictionary. Typical fields include title, author, subject,\n\t * Creator, Producer and Creation/Modification dates. The exact structure is\n\t * determined by the PDF and as returned by PDF.js.\n\t */\n\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\tinfo?: any;\n\n\t// Low-level document metadata object (XMP). Use this to access extended\n\t// properties that are not present in the Info dictionary.\n\tmetadata?: Metadata;\n\n\t/**\n\t * An array of document fingerprint strings provided by PDF.js. Useful\n\t * for caching, de-duplication or identifying a document across runs.\n\t */\n\tfingerprints?: Array<string | null>;\n\n\t/**\n\t * Permission flags for the document as returned by PDF.js (or null).\n\t * These flags indicate capabilities such as printing, copying and\n\t * other restrictions imposed by the PDF security settings.\n\t */\n\tpermission?: number[] | null;\n\n\t/**\n\t * Optional document outline (bookmarks). When present this is the\n\t * hierarchical navigation structure which viewers use for quick access.\n\t */\n\toutline?: Array<OutlineNode> | null;\n\n\t// Results with per-page hyperlink extraction. Empty array by default.\n\tpages: Array<PageLinkResult> = [];\n\n\t/**\n\t * Collects dates from different sources (Info dictionary and XMP/XAP metadata)\n\t * and returns them as a DateNode where available. This helps callers compare\n\t * and choose the most relevant timestamp (for example a creation date vs XMP date).\n\t */\n\tpublic getDateNode(): DateNode {\n\t\tconst result: DateNode = {};\n\n\t\t// The Info dictionary may contain CreationDate/ModDate in PDF date string format.\n\t\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\t\tconst CreationDate = (this.info as any)?.CreationDate;\n\n\t\tif (CreationDate) {\n\t\t\tresult.CreationDate = pdfjs.PDFDateString.toDateObject(CreationDate);\n\t\t}\n\n\t\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\t\tconst ModDate = (this.info as any)?.ModDate;\n\n\t\tif (ModDate) {\n\t\t\tresult.ModDate = pdfjs.PDFDateString.toDateObject(ModDate);\n\t\t}\n\n\t\t// If no XMP metadata is present, return the Info-based dates only.\n\t\tif (!this.metadata) {\n\t\t\treturn result;\n\t\t}\n\n\t\t// Extract several XMP/XAP date properties (if present) and attempt to\n\t\t// parse them as ISO-like strings. Parsed values are added to the\n\t\t// corresponding DateNode fields.\n\t\tfor (const prop of XMP_DATE_PROPERTIES) {\n\t\t\tconst value = this.metadata?.get(prop);\n\t\t\tconst date = this.parseISODateString(value);\n\n\t\t\tswitch (prop) {\n\t\t\t\tcase XMP_DATE_PROPERTIES[0]:\n\t\t\t\t\tresult.XmpCreateDate = date;\n\t\t\t\t\tbreak;\n\t\t\t\tcase XMP_DATE_PROPERTIES[1]:\n\t\t\t\t\tresult.XmpModifyDate = date;\n\t\t\t\t\tbreak;\n\t\t\t\tcase XMP_DATE_PROPERTIES[2]:\n\t\t\t\t\tresult.XmpMetadataDate = date;\n\t\t\t\t\tbreak;\n\t\t\t\tcase XMP_DATE_PROPERTIES[3]:\n\t\t\t\t\tresult.XapCreateDate = date;\n\t\t\t\t\tbreak;\n\t\t\t\tcase XMP_DATE_PROPERTIES[4]:\n\t\t\t\t\tresult.XapModifyDate = date;\n\t\t\t\t\tbreak;\n\t\t\t\tcase XMP_DATE_PROPERTIES[5]:\n\t\t\t\t\tresult.XapMetadataDate = date;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Try to parse an ISO-8601 date string from XMP/XAP metadata. If the\n\t * value is falsy or cannot be parsed, undefined is returned to indicate\n\t * absence or unparsable input.\n\t */\n\tprivate parseISODateString(isoDateString: string): Date | undefined {\n\t\tif (!isoDateString) return undefined;\n\n\t\tconst parsedDate = Date.parse(isoDateString);\n\t\tif (!Number.isNaN(parsedDate)) {\n\t\t\treturn new Date(parsedDate);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tconstructor(total: number) {\n\t\tthis.total = total;\n\t}\n}\n", "/**\n * @public\n * ParseParameters\n * Options to control parsing behavior and output formatting.\n */\nexport interface ParseParameters {\n\t/**\n\t * Array of page numbers to parse.\n\t * When provided, only these pages will be parsed and returned in the same order.\n\t * Example: [1, 3, 5]. Parse only one page: [7].\n\t * Default: `undefined`.\n\t */\n\tpartial?: Array<number>;\n\n\t/**\n\t * Parse the first N pages (pages 1..N).\n\t * Ignored when `partial` is provided. If both `first` and `last` are set, they define\n\t * an explicit inclusive page range (first..last) and this \"first N\" semantics is ignored.\n\t * Default: `undefined`.\n\t */\n\tfirst?: number;\n\n\t/**\n\t * Parse the last N pages (pages total-N+1..total).\n\t * Ignored when `partial` is provided. If both `first` and `last` are set, they define\n\t * an explicit inclusive page range (first..last) and this \"last N\" semantics is ignored.\n\t * Default: `undefined`.\n\t */\n\tlast?: number;\n\n\t/**\n\t * Collect per-page metadata such as embedded links, title, pageLabel, and dimensions;\n\t * ISBN, DOI, abstract, and references are work in progress when getInfo() is used.\n\t * Default: `false`.\n\t */\n\tparsePageInfo?: boolean;\n\n\t/**\n\t * Attempt to detect and include hyperlink annotations (e.g. URLs) associated with text.\n\t * Detected links are formatted as Markdown inline links (for example: [text](https://example.com)).\n\t * Default: `false`.\n\t */\n\tparseHyperlinks?: boolean;\n\n\t/**\n\t * Enforce logical line breaks by inserting a newline when the vertical distance\n\t * between text items exceeds `lineThreshold`.\n\t * Useful to preserve paragraph/line structure when text items are emitted as separate segments.\n\t * Default: `true`.\n\t */\n\tlineEnforce?: boolean;\n\n\t/**\n\t * Threshold to decide whether nearby text items belong to different lines.\n\t * Larger values make the parser more likely to start a new line between items.\n\t * Default: `4.6`.\n\t */\n\tlineThreshold?: number;\n\n\t/**\n\t * String inserted between text items on the same line when a sufficiently large horizontal gap is detected.\n\t * Typically used to emulate a cell/column separator (for example, \"\\\\t\" for tabs).\n\t * Default: `'\\t'`.\n\t */\n\tcellSeparator?: string;\n\n\t/**\n\t * Horizontal distance threshold to decide when two text items on the same baseline should be treated as separate cells.\n\t * Larger value produces fewer (wider) cells; smaller value creates more cell breaks.\n\t * Default: `7`.\n\t */\n\tcellThreshold?: number;\n\n\t/**\n\t * Optional string appended at the end of each page's extracted text to mark page boundaries.\n\t * Supports placeholders `page_number` and `total_number` which are substituted accordingly.\n\t * If omitted or empty, no page boundary marker is added.\n\t * Default: `'\\n-- page_number of total_number --'`.\n\t */\n\tpageJoiner?: string;\n\n\t/**\n\t * Optional string used to join text items when returning a page's text.\n\t * If provided, this value is used instead of the default empty-string joining behavior.\n\t * Default: `undefined`.\n\t */\n\titemJoiner?: string;\n\n\t/**\n\t * Minimum image dimension (in pixels) for width or height.\n\t * When set, images where width OR height are below or equal this value will be ignored by `getImage()`.\n\t * Useful for excluding tiny decorative or tracking images.\n\t * Default: `80`.\n\t * Disable: `0`.\n\t */\n\timageThreshold?: number;\n\n\t/**\n\t * Screenshot scale factor: use 1 for the original size, 1.5 for a 50% larger image, etc.\n\t * Default: `1`.\n\t */\n\tscale?: number;\n\n\t/**\n\t * Desired screenshot width in pixels.\n\t * When set, the scale option is ignored.\n\t * Default: `undefined`.\n\t */\n\tdesiredWidth?: number;\n\n\t/**\n\t * Applies to both getImage() and getScreenshot(): include the image as a base64 data URL string.\n\t * Default: `true`.\n\t */\n\timageDataUrl?: boolean;\n\n\t/**\n\t * Applies to both getImage() and getScreenshot(): include the image as a binary buffer.\n\t * Default: `true`.\n\t */\n\timageBuffer?: boolean;\n\n\t/**\n\t * Include marked content items in the items array of TextContent to capture PDF \"marked content\".\n\t * Enables tags (MCID, role/props) and structural/accessibility information useful for mapping text  structure.\n\t * For plain text extraction it's usually false (trade-off: larger output).\n\t * Default: `false`.\n\t */\n\tincludeMarkedContent?: boolean;\n\n\t/**\n\t * When true, text normalization is NOT performed in the worker thread.\n\t * For plain text extraction, normalizing in the worker (false) is usually recommended.\n\t * Default: `false`.\n\t */\n\tdisableNormalization?: boolean;\n}\n\n/**\n * @public\n * SafeParseParameters\n */\nexport type SafeParseParameters = Required<Pick<ParseParameters, 'lineThreshold' | 'cellThreshold' | 'scale'>> &\n\tParseParameters;\n\nexport function setDefaultParseParameters(params: ParseParameters): SafeParseParameters {\n\tparams.lineThreshold = params?.lineThreshold ?? 4.6;\n\tparams.cellThreshold = params?.cellThreshold ?? 7;\n\tparams.cellSeparator = params?.cellSeparator ?? '\\t';\n\tparams.lineEnforce = params?.lineEnforce ?? true;\n\tparams.pageJoiner = params?.pageJoiner ?? '\\n-- page_number of total_number --';\n\tparams.imageThreshold = params?.imageThreshold ?? 80;\n\n\tparams.imageDataUrl = params?.imageDataUrl ?? true;\n\tparams.imageBuffer = params?.imageBuffer ?? true;\n\tparams.scale = params?.scale ?? 1;\n\n\treturn params as SafeParseParameters;\n}\n", "export type MinMax = [number, number, number, number];\n\nexport enum PathGeometry {\n\tundefined = 0,\n\thline = 1,\n\tvline = 2,\n\trectangle = 3,\n}\n\nexport enum DrawOPS {\n\tmoveTo = 0,\n\tlineTo = 1,\n\tcurveTo = 2,\n\tclosePath = 3,\n\trectangle = 4,\n}\n", "/**\n * @public\n * Screenshot\n */\nexport interface Screenshot {\n\t// Raw binary image data (PNG/JPEG) normalized to Uint8Array.\n\tdata: Uint8Array;\n\n\t// Optional base64 data URL for easy embedding in HTML.\n\tdataUrl: string;\n\n\tpageNumber: number;\n\n\twidth: number;\n\theight: number;\n\tscale: number;\n}\n\n/**\n * @public\n * ScreenshotResult\n */\nexport class ScreenshotResult {\n\tpages: Array<Screenshot> = [];\n\ttotal: number = 0;\n\n\tconstructor(total: number) {\n\t\tthis.total = total;\n\t}\n}\n", "export type TableArray = Array<Array<string>>;\n\n/**\n * @public\n * PageTableResult\n */\nexport interface PageTableResult {\n\tnum: number;\n\ttables: TableArray[];\n}\n\n/**\n * @public\n * TableResult\n */\nexport class TableResult {\n\tpages: Array<PageTableResult> = [];\n\tmergedTables: TableArray[] = [];\n\ttotal: number = 0;\n\n\tconstructor(total: number) {\n\t\tthis.total = total;\n\t}\n}\n", "/**\n * @public\n * HyperlinkPosition\n */\nexport type HyperlinkPosition = {\n\trect: { left: number; top: number; right: number; bottom: number };\n\turl: string;\n\ttext: string;\n\tused: boolean;\n};\n\n/**\n * @public\n * PageTextResult\n */\nexport interface PageTextResult {\n\tnum: number;\n\ttext: string;\n}\n\n/**\n * @public\n * TextResult\n */\nexport class TextResult {\n\tpages: Array<PageTextResult> = [];\n\ttext: string = '';\n\ttotal: number = 0;\n\n\tpublic getPageText(num: number): string {\n\t\tfor (const pageData of this.pages) {\n\t\t\tif (pageData.num === num) return pageData.text;\n\t\t}\n\t\treturn '';\n\t}\n\n\tconstructor(total: number) {\n\t\tthis.total = total;\n\t}\n}\n", "import type { PageViewport, PDFDocumentProxy, PDFPageProxy } from 'pdfjs-dist/legacy/build/pdf.mjs';\nimport * as pdfjs from 'pdfjs-dist/legacy/build/pdf.mjs';\nimport type { BaseCanvasFactory } from 'pdfjs-dist/types/src/display/canvas_factory.js';\nimport type { PDFObjects } from 'pdfjs-dist/types/src/display/pdf_objects.js';\n\nimport { getException } from './Exception.js';\nimport { Line, LineStore, Point, Rectangle } from './geometry/index.js';\nimport type { TableData } from './geometry/TableData.js';\nimport { ImageResult, type PageImages } from './ImageResult.js';\nimport { InfoResult, type PageLinkResult } from './InfoResult.js';\nimport type { LoadParameters } from './LoadParameters.js';\nimport { type ParseParameters, setDefaultParseParameters } from './ParseParameters.js';\nimport { type MinMax, PathGeometry } from './PathGeometry.js';\nimport { ScreenshotResult } from './ScreenshotResult.js';\nimport { type PageTableResult, TableResult } from './TableResult.js';\nimport { type HyperlinkPosition, TextResult } from './TextResult.js';\n\n/**\n * @public\n * Loads PDF documents and exposes helpers for text, image, table, metadata, and screenshot extraction.\n */\nexport class PDFParse {\n\tprivate readonly options: LoadParameters;\n\tprivate doc: PDFDocumentProxy | undefined;\n\tpublic progress: { loaded: number; total: number } = { loaded: -1, total: 0 };\n\n\t/**\n\t * Create a new parser with `LoadParameters`.\n\t * Converts Node.js `Buffer` data to `Uint8Array` automatically and ensures a default verbosity level.\n\t * @param options - Initialization parameters.\n\t */\n\tconstructor(options: LoadParameters) {\n\t\tif (options.verbosity === undefined) {\n\t\t\toptions.verbosity = pdfjs.VerbosityLevel.ERRORS;\n\t\t}\n\n\t\tif (typeof Buffer !== 'undefined' && options.data instanceof Buffer) {\n\t\t\toptions.data = new Uint8Array(options.data);\n\t\t}\n\n\t\tthis.options = options;\n\t}\n\n\tpublic async destroy() {\n\t\tif (this.doc) {\n\t\t\tawait this.doc.destroy();\n\t\t\tthis.doc = undefined;\n\t\t}\n\t}\n\n\t// biome-ignore-start lint/suspicious/noExplicitAny: unsupported underline type\n\tpublic static get isNodeJS(): boolean {\n\t\tconst isNodeJS =\n\t\t\ttypeof process === 'object' &&\n\t\t\t`${process}` === '[object process]' &&\n\t\t\t!process.versions.nw &&\n\t\t\t!(\n\t\t\t\tprocess.versions.electron &&\n\t\t\t\ttypeof (process as any).type !== 'undefined' &&\n\t\t\t\t(process as any).type !== 'browser'\n\t\t\t);\n\n\t\treturn isNodeJS;\n\t}\n\n\tpublic static setWorker(workerSrc?: string): string {\n\t\tif (typeof (globalThis as any).pdfjs === 'undefined') {\n\t\t\t(globalThis as any).pdfjs = pdfjs;\n\t\t}\n\n\t\tif (pdfjs?.GlobalWorkerOptions === null) return '';\n\n\t\tif (workerSrc !== undefined) {\n\t\t\tpdfjs.GlobalWorkerOptions.workerSrc = workerSrc;\n\t\t\treturn pdfjs.GlobalWorkerOptions.workerSrc;\n\t\t}\n\n\t\t// if (!PDFParse.isNodeJS) {\n\t\t// \tpdfjs.GlobalWorkerOptions.workerSrc =\n\t\t// \t\t'https://cdn.jsdelivr.net/npm/pdf-parse@latest/dist/browser/pdf.worker.min.mjs';\n\t\t// \treturn pdfjs.GlobalWorkerOptions.workerSrc;\n\t\t// }\n\n\t\treturn pdfjs.GlobalWorkerOptions.workerSrc;\n\t}\n\t// biome-ignore-end lint/suspicious/noExplicitAny: unsupported underline type\n\n\t/**\n\t * Load document-level metadata (info, outline, permissions, page labels) and optionally gather per-page link details.\n\t * @param params - Parse options; set `parsePageInfo` to collect per-page metadata described in `ParseParameters`.\n\t * @returns Aggregated document metadata in an `InfoResult`.\n\t */\n\tpublic async getInfo(params: ParseParameters = {}): Promise<InfoResult> {\n\t\tconst doc = await this.load();\n\t\tconst result = new InfoResult(doc.numPages);\n\n\t\tconst { info, metadata } = await doc.getMetadata();\n\t\tresult.info = info;\n\t\tresult.metadata = metadata;\n\n\t\tresult.fingerprints = doc.fingerprints;\n\t\tresult.outline = await doc.getOutline();\n\t\tresult.permission = await doc.getPermissions();\n\t\tconst pageLabels = await doc.getPageLabels();\n\n\t\tif (params.parsePageInfo) {\n\t\t\tfor (let i: number = 1; i <= result.total; i++) {\n\t\t\t\tif (this.shouldParse(i, result.total, params)) {\n\t\t\t\t\tconst page = await doc.getPage(i);\n\n\t\t\t\t\tconst pageLinkResult = await this.getPageLinks(page);\n\t\t\t\t\tpageLinkResult.pageLabel = pageLabels?.[page.pageNumber];\n\t\t\t\t\tresult.pages.push(pageLinkResult);\n\t\t\t\t\tpage.cleanup();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate async getPageLinks(page: PDFPageProxy): Promise<PageLinkResult> {\n\t\tconst viewport = page.getViewport({ scale: 1 });\n\n\t\tconst result: PageLinkResult = {\n\t\t\tpageNumber: page.pageNumber,\n\t\t\tlinks: [],\n\t\t\twidth: viewport.width,\n\t\t\theight: viewport.height,\n\t\t};\n\n\t\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\t\tconst annotations: Array<any> = (await page.getAnnotations({ intent: 'display' })) || [];\n\n\t\tfor (const i of annotations) {\n\t\t\tif (i.subtype !== 'Link') continue;\n\n\t\t\tconst url: string = i.url ?? i.unsafeUrl;\n\t\t\tif (!url) continue;\n\n\t\t\tconst text: string = i.overlaidText || '';\n\n\t\t\tresult.links.push({ url, text });\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Extract plain text for each requested page, optionally enriching hyperlinks and enforcing line or cell separators.\n\t * @param params - Parse options controlling pagination, link handling, and line/cell thresholds.\n\t * @returns A `TextResult` containing page-wise text and a concatenated document string.\n\t */\n\tpublic async getText(params: ParseParameters = {}): Promise<TextResult> {\n\t\tconst doc = await this.load();\n\t\tconst result = new TextResult(doc.numPages);\n\n\t\tfor (let i: number = 1; i <= result.total; i++) {\n\t\t\tif (this.shouldParse(i, result.total, params)) {\n\t\t\t\tconst page = await doc.getPage(i);\n\t\t\t\tconst text = await this.getPageText(page, params, result.total);\n\t\t\t\tresult.pages.push({\n\t\t\t\t\ttext: text,\n\t\t\t\t\tnum: i,\n\t\t\t\t});\n\t\t\t\tpage.cleanup();\n\t\t\t}\n\t\t}\n\n\t\tfor (const page of result.pages) {\n\t\t\tif (params.pageJoiner) {\n\t\t\t\tlet pageNumber = params.pageJoiner.replace('page_number', `${page.num}`);\n\t\t\t\tpageNumber = pageNumber.replace('total_number', `${result.total}`);\n\t\t\t\tresult.text += `${page.text}\\n${pageNumber}\\n\\n`;\n\t\t\t} else {\n\t\t\t\tresult.text += `${page.text}\\n\\n`;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate async load(): Promise<PDFDocumentProxy> {\n\t\ttry {\n\t\t\tif (this.doc === undefined) {\n\t\t\t\tconst loadingTask = pdfjs.getDocument(this.options);\n\n\t\t\t\tloadingTask.onProgress = (progress: { loaded: number; total: number }) => {\n\t\t\t\t\tthis.progress = progress;\n\t\t\t\t};\n\n\t\t\t\tthis.doc = await loadingTask.promise;\n\t\t\t}\n\n\t\t\treturn this.doc;\n\t\t} catch (error) {\n\t\t\tthrow getException(error);\n\t\t}\n\t}\n\n\tprivate shouldParse(currentPage: number, totalPage: number, params: ParseParameters): boolean {\n\t\tparams.partial = params?.partial ?? [];\n\t\tparams.first = params?.first ?? 0;\n\t\tparams.last = params?.last ?? 0;\n\n\t\t// parse specific pages\n\t\tif (params.partial.length > 0) {\n\t\t\tif (params.partial.includes(currentPage)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t// parse pagest beetween first..last\n\t\tif (params.first > 0 && params.last > 0) {\n\t\t\tif (currentPage >= params.first && currentPage <= params.last) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t// parse first x page\n\t\tif (params.first > 0) {\n\t\t\tif (currentPage <= params.first) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t// parse last x page\n\t\tif (params.last > 0) {\n\t\t\tif (currentPage > totalPage - params.last) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async getPageText(page: PDFPageProxy, parseParams: ParseParameters, total: number): Promise<string> {\n\t\tconst viewport = page.getViewport({ scale: 1 });\n\n\t\tconst params = setDefaultParseParameters(parseParams);\n\n\t\tconst textContent = await page.getTextContent({\n\t\t\tincludeMarkedContent: !!params.includeMarkedContent,\n\t\t\tdisableNormalization: !!params.disableNormalization,\n\t\t});\n\n\t\tlet links: Map<string, HyperlinkPosition[]> = new Map();\n\n\t\tif (params.parseHyperlinks) {\n\t\t\tlinks = await this.getHyperlinks(page, viewport);\n\t\t}\n\n\t\tconst strBuf: Array<string> = [];\n\n\t\tlet lastX: number | undefined;\n\t\tlet lastY: number | undefined;\n\t\tlet lineHeight: number = 0;\n\n\t\tfor (const item of textContent.items) {\n\t\t\tif (!('str' in item)) continue;\n\n\t\t\tconst tm = item.transform ?? item.transform;\n\t\t\tconst [x, y] = viewport.convertToViewportPoint(tm[4], tm[5]);\n\n\t\t\tif (params.parseHyperlinks) {\n\t\t\t\tconst posArr = links.get(item.str) || [];\n\t\t\t\tconst hit = posArr.find((l) => x >= l.rect.left && x <= l.rect.right && y >= l.rect.top && y <= l.rect.bottom);\n\t\t\t\tif (hit) {\n\t\t\t\t\titem.str = `[${item.str}](${hit.url})`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (params.lineEnforce) {\n\t\t\t\tif (lastY !== undefined && Math.abs(lastY - y) > params.lineThreshold) {\n\t\t\t\t\tconst lastItem = strBuf.length ? strBuf[strBuf.length - 1] : undefined;\n\t\t\t\t\tconst isCurrentItemHasNewLine = item.str.startsWith('\\n') || (item.str.trim() === '' && item.hasEOL);\n\n\t\t\t\t\tif (lastItem?.endsWith('\\n') === false && !isCurrentItemHasNewLine) {\n\t\t\t\t\t\tconst ydiff = Math.abs(lastY - y);\n\n\t\t\t\t\t\tif (ydiff - 1 > lineHeight) {\n\t\t\t\t\t\t\tstrBuf.push('\\n');\n\t\t\t\t\t\t\tlineHeight = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (params.cellSeparator) {\n\t\t\t\tif (lastY !== undefined && Math.abs(lastY - y) < params.lineThreshold) {\n\t\t\t\t\tif (lastX !== undefined && Math.abs(lastX - x) > params.cellThreshold) {\n\t\t\t\t\t\titem.str = `${params.cellSeparator}${item.str}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstrBuf.push(item.str);\n\t\t\tlastX = x + item.width;\n\t\t\tlastY = y;\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\n\n\t\t\tif (item.hasEOL) {\n\t\t\t\tstrBuf.push('\\n');\n\t\t\t}\n\n\t\t\tif (item.hasEOL || item.str.endsWith('\\n')) {\n\t\t\t\tlineHeight = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (params.itemJoiner) {\n\t\t\treturn strBuf.join(params.itemJoiner);\n\t\t}\n\n\t\treturn strBuf.join('');\n\t}\n\n\tprivate async getHyperlinks(page: PDFPageProxy, viewport: PageViewport): Promise<Map<string, HyperlinkPosition[]>> {\n\t\tconst result: Map<string, HyperlinkPosition[]> = new Map();\n\n\t\t// biome-ignore lint/suspicious/noExplicitAny: <unsupported underline type>\n\t\tconst annotations: Array<any> = (await page.getAnnotations({ intent: 'display' })) || [];\n\n\t\tfor (const i of annotations) {\n\t\t\tif (i.subtype !== 'Link') continue;\n\n\t\t\tconst url: string = i.url ?? i.unsafeUrl;\n\t\t\tif (!url) continue;\n\n\t\t\tconst text: string = i.overlaidText;\n\t\t\tif (!text) continue;\n\n\t\t\tconst rectVp = viewport.convertToViewportRectangle(i.rect);\n\t\t\tconst left = Math.min(rectVp[0], rectVp[2]) - 0.5;\n\t\t\tconst top = Math.min(rectVp[1], rectVp[3]) - 0.5;\n\t\t\tconst right = Math.max(rectVp[0], rectVp[2]) + 0.5;\n\t\t\tconst bottom = Math.max(rectVp[1], rectVp[3]) + 0.5;\n\n\t\t\tconst pos: HyperlinkPosition = { rect: { left, top, right, bottom }, url, text, used: false };\n\n\t\t\tconst el = result.get(text);\n\t\t\tif (el) {\n\t\t\t\tel.push(pos);\n\t\t\t} else {\n\t\t\t\tresult.set(text, [pos]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Extract embedded images from requested pages.\n\t *\n\t * Behavior notes:\n\t * - Pages are selected according to ParseParameters (partial, first, last).\n\t * - Images smaller than `params.imageThreshold` (width OR height) are skipped.\n\t * - Returned ImageResult contains per-page PageImages; each image entry includes:\n\t *     - data: Uint8Array (present when params.imageBuffer === true)\n\t *     - dataUrl: string (present when params.imageDataUrl === true)\n\t *     - width, height, kind, name\n\t * - Works in both Node.js (canvas.toBuffer) and browser (canvas.toDataURL) environments.\n\t *\n\t * @param params - ParseParameters controlling page selection, thresholds and output format.\n\t * @returns Promise<ImageResult> with extracted images grouped by page.\n\t */\n\tpublic async getImage(params: ParseParameters = {}): Promise<ImageResult> {\n\t\tconst doc = await this.load();\n\t\tconst result = new ImageResult(doc.numPages);\n\t\tsetDefaultParseParameters(params);\n\n\t\tfor (let i: number = 1; i <= result.total; i++) {\n\t\t\tif (this.shouldParse(i, result.total, params)) {\n\t\t\t\tconst page = await doc.getPage(i);\n\t\t\t\tconst ops = await page.getOperatorList();\n\n\t\t\t\tconst pageImages: PageImages = { pageNumber: i, images: [] };\n\t\t\t\tresult.pages.push(pageImages);\n\n\t\t\t\tfor (let j = 0; j < ops.fnArray.length; j++) {\n\t\t\t\t\tif (ops.fnArray[j] === pdfjs.OPS.paintInlineImageXObject || ops.fnArray[j] === pdfjs.OPS.paintImageXObject) {\n\t\t\t\t\t\tconst name = ops.argsArray[j][0];\n\t\t\t\t\t\tconst isCommon = page.commonObjs.has(name);\n\t\t\t\t\t\tconst imgPromise = isCommon\n\t\t\t\t\t\t\t? this.resolveEmbeddedImage(page.commonObjs, name)\n\t\t\t\t\t\t\t: this.resolveEmbeddedImage(page.objs, name);\n\n\t\t\t\t\t\tconst { width, height, kind, data } = await imgPromise;\n\n\t\t\t\t\t\tif (params.imageThreshold) {\n\t\t\t\t\t\t\tif (params.imageThreshold >= width || params.imageThreshold >= height) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underlying library does not contain valid typedefs>\n\t\t\t\t\t\tconst canvasFactory = (doc as any).canvasFactory;\n\n\t\t\t\t\t\tconst canvasAndContext = canvasFactory.create(width, height);\n\t\t\t\t\t\tconst context = canvasAndContext.context;\n\t\t\t\t\t\tlet imgData = null;\n\t\t\t\t\t\tif (kind === pdfjs.ImageKind.RGBA_32BPP) {\n\t\t\t\t\t\t\timgData = context.createImageData(width, height);\n\t\t\t\t\t\t\timgData.data.set(data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\timgData = context.createImageData(width, height);\n\t\t\t\t\t\t\tthis.convertToRGBA({\n\t\t\t\t\t\t\t\tsrc: data,\n\t\t\t\t\t\t\t\tdest: new Uint32Array(imgData.data.buffer),\n\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontext.putImageData(imgData, 0, 0);\n\n\t\t\t\t\t\t// Browser and Node.js compatibility\n\t\t\t\t\t\tlet buffer: Uint8Array = new Uint8Array();\n\t\t\t\t\t\tlet dataUrl: string = '';\n\n\t\t\t\t\t\tif (typeof canvasAndContext.canvas.toBuffer === 'function') {\n\t\t\t\t\t\t\t// Node.js environment (canvas package)\n\t\t\t\t\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underline lib not support>\n\t\t\t\t\t\t\tlet nodeBuffer: any;\n\n\t\t\t\t\t\t\tif (params.imageBuffer) {\n\t\t\t\t\t\t\t\tnodeBuffer = canvasAndContext.canvas.toBuffer('image/png');\n\t\t\t\t\t\t\t\tbuffer = new Uint8Array(nodeBuffer);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (params.imageDataUrl) {\n\t\t\t\t\t\t\t\tif (nodeBuffer) {\n\t\t\t\t\t\t\t\t\tdataUrl = `data:image/png;base64,${nodeBuffer.toString('base64')}`;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnodeBuffer = canvasAndContext.canvas.toBuffer('image/png');\n\t\t\t\t\t\t\t\t\tbuffer = new Uint8Array(nodeBuffer);\n\t\t\t\t\t\t\t\t\tdataUrl = `data:image/png;base64,${nodeBuffer.toString('base64')}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Browser environment\n\t\t\t\t\t\t\tif (params.imageBuffer) {\n\t\t\t\t\t\t\t\tconst imageData = canvasAndContext.context.getImageData(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\tcanvasAndContext.canvas.width,\n\t\t\t\t\t\t\t\t\tcanvasAndContext.canvas.height,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbuffer = new Uint8Array(imageData.data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (params.imageDataUrl) {\n\t\t\t\t\t\t\t\tdataUrl = canvasAndContext.canvas.toDataURL('image/png');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpageImages.images.push({\n\t\t\t\t\t\t\tdata: buffer,\n\t\t\t\t\t\t\tdataUrl,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate convertToRGBA({\n\t\tsrc,\n\t\tdest,\n\t\twidth,\n\t\theight,\n\t\tkind,\n\t}: {\n\t\tsrc: Uint8Array;\n\t\tdest: Uint32Array;\n\t\twidth: number;\n\t\theight: number;\n\t\tkind: number;\n\t}) {\n\t\tif (kind === pdfjs.ImageKind.RGB_24BPP) {\n\t\t\t// RGB 24-bit per pixel\n\t\t\tfor (let i = 0, j = 0; i < src.length; i += 3, j++) {\n\t\t\t\tconst r = src[i];\n\t\t\t\tconst g = src[i + 1];\n\t\t\t\tconst b = src[i + 2];\n\t\t\t\tdest[j] = (255 << 24) | (b << 16) | (g << 8) | r;\n\t\t\t}\n\t\t} else if (kind === pdfjs.ImageKind.GRAYSCALE_1BPP) {\n\t\t\t// Grayscale 1-bit per pixel\n\t\t\tlet pixelIndex = 0;\n\t\t\tfor (let i = 0; i < src.length; i++) {\n\t\t\t\tconst byte = src[i];\n\t\t\t\tfor (let bit = 7; bit >= 0; bit--) {\n\t\t\t\t\tif (pixelIndex >= width * height) break;\n\t\t\t\t\tconst isWhite = ((byte >> bit) & 1) === 1;\n\t\t\t\t\tconst gray = isWhite ? 255 : 0;\n\t\t\t\t\tdest[pixelIndex++] = (255 << 24) | (gray << 16) | (gray << 8) | gray;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (kind === undefined || kind === null) {\n\t\t\t// Unknown or undefined kind - try to infer from data length\n\t\t\tconst bytesPerPixel = src.length / (width * height);\n\t\t\tif (Math.abs(bytesPerPixel - 3) < 0.1) {\n\t\t\t\t// Likely RGB 24BPP\n\t\t\t\tfor (let i = 0, j = 0; i < src.length; i += 3, j++) {\n\t\t\t\t\tconst r = src[i];\n\t\t\t\t\tconst g = src[i + 1];\n\t\t\t\t\tconst b = src[i + 2];\n\t\t\t\t\tdest[j] = (255 << 24) | (b << 16) | (g << 8) | r;\n\t\t\t\t}\n\t\t\t} else if (Math.abs(bytesPerPixel - 4) < 0.1) {\n\t\t\t\t// Likely RGBA 32BPP\n\t\t\t\tfor (let i = 0, j = 0; i < src.length; i += 4, j++) {\n\t\t\t\t\tconst r = src[i];\n\t\t\t\t\tconst g = src[i + 1];\n\t\t\t\t\tconst b = src[i + 2];\n\t\t\t\t\tconst a = src[i + 3];\n\t\t\t\t\tdest[j] = (a << 24) | (b << 16) | (g << 8) | r;\n\t\t\t\t}\n\t\t\t} else if (Math.abs(bytesPerPixel - 1) < 0.1) {\n\t\t\t\t// Likely grayscale 8BPP\n\t\t\t\tfor (let i = 0; i < src.length; i++) {\n\t\t\t\t\tconst gray = src[i];\n\t\t\t\t\tdest[i] = (255 << 24) | (gray << 16) | (gray << 8) | gray;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`convertToRGBA: Cannot infer image format. kind: ${kind}, bytesPerPixel: ${bytesPerPixel}, width: ${width}, height: ${height}, dataLength: ${src.length}`,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(\n\t\t\t\t`convertToRGBA: Unsupported image kind: ${kind}. Available kinds: GRAYSCALE_1BPP=${pdfjs.ImageKind.GRAYSCALE_1BPP}, RGB_24BPP=${pdfjs.ImageKind.RGB_24BPP}, RGBA_32BPP=${pdfjs.ImageKind.RGBA_32BPP}`,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate resolveEmbeddedImage(\n\t\tpdfObjects: PDFObjects,\n\t\tname: string,\n\t): Promise<{ width: number; height: number; kind: number; data: Uint8Array }> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underlying library does not contain valid typedefs>\n\t\t\tpdfObjects.get(name, (imgData: any) => {\n\t\t\t\tif (imgData) {\n\t\t\t\t\t// Check different possible data sources\n\t\t\t\t\tlet dataBuff: Uint8Array | undefined;\n\n\t\t\t\t\tif (imgData.data instanceof Uint8Array) {\n\t\t\t\t\t\tdataBuff = imgData.data;\n\t\t\t\t\t} else if (imgData.data instanceof Uint8ClampedArray) {\n\t\t\t\t\t\tdataBuff = new Uint8Array(imgData.data);\n\t\t\t\t\t} else if (imgData.data?.buffer) {\n\t\t\t\t\t\t// Typed array with buffer\n\t\t\t\t\t\tdataBuff = new Uint8Array(imgData.data.buffer);\n\t\t\t\t\t} else if (imgData.bitmap) {\n\t\t\t\t\t\t// Some browsers might use bitmap\n\t\t\t\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underlying library does not contain valid typedefs>\n\t\t\t\t\t\tconst canvasFactory: BaseCanvasFactory = (this.doc as any).canvasFactory;\n\t\t\t\t\t\tconst canvasAndContext = canvasFactory.create(imgData.bitmap.width, imgData.bitmap.height);\n\t\t\t\t\t\tcanvasAndContext.context.drawImage(imgData.bitmap, 0, 0);\n\t\t\t\t\t\tconst imageData = canvasAndContext.context.getImageData(0, 0, imgData.bitmap.width, imgData.bitmap.height);\n\t\t\t\t\t\tdataBuff = new Uint8Array(imageData.data.buffer);\n\t\t\t\t\t} else if (ArrayBuffer.isView(imgData.data)) {\n\t\t\t\t\t\t// Generic typed array\n\t\t\t\t\t\tdataBuff = new Uint8Array(imgData.data.buffer, imgData.data.byteOffset, imgData.data.byteLength);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!dataBuff) {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\t`Image object ${name}: data field is empty or invalid. Available fields: ${Object.keys(imgData).join(', ')}`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dataBuff.length === 0) {\n\t\t\t\t\t\treject(new Error(`Image object ${name}: data buffer is empty (length: 0)`));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve({ width: imgData.width, height: imgData.height, kind: imgData.kind, data: dataBuff });\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(`Image object ${name} not found`));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Render pages to raster screenshots.\n\t *\n\t * Behavior notes:\n\t * - Pages are selected according to ParseParameters (partial, first, last).\n\t * - Use params.scale for zoom; if params.desiredWidth is specified it takes precedence.\n\t * - Each ScreenshotResult page contains:\n\t *     - data: Uint8Array (when params.imageBuffer === true)\n\t *     - dataUrl: string (when params.imageDataUrl === true)\n\t *     - pageNumber, width, height, scale\n\t * - Works in both Node.js (canvas.toBuffer) and browser (canvas.toDataURL) environments.\n\t *\n\t * @param parseParams - ParseParameters controlling page selection and render options.\n\t * @returns Promise<ScreenshotResult> with rendered page images.\n\t */\n\tpublic async getScreenshot(parseParams: ParseParameters = {}): Promise<ScreenshotResult> {\n\t\t//const base = new URL('../../node_modules/pdfjs-dist/', import.meta.url);\n\t\t//this.options.cMapUrl = new URL('cmaps/', base).href;\n\t\t//this.options.cMapPacked = true;\n\t\t//this.options.standardFontDataUrl = new URL('legacy/build/standard_fonts/', base).href;\n\n\t\tconst params = setDefaultParseParameters(parseParams);\n\n\t\tconst doc = await this.load();\n\t\tconst result = new ScreenshotResult(doc.numPages);\n\n\t\tif (this.doc === undefined) {\n\t\t\tthrow new Error('PDF document not loaded');\n\t\t}\n\n\t\tfor (let i: number = 1; i <= result.total; i++) {\n\t\t\tif (this.shouldParse(i, result.total, params)) {\n\t\t\t\tconst page = await this.doc.getPage(i);\n\n\t\t\t\tlet viewport = page.getViewport({ scale: params.scale });\n\t\t\t\tif (params.desiredWidth) {\n\t\t\t\t\tviewport = page.getViewport({ scale: 1 });\n\t\t\t\t\t// desiredWidth\n\t\t\t\t\tconst scale = params.desiredWidth / viewport.width;\n\t\t\t\t\tviewport = page.getViewport({ scale: scale });\n\t\t\t\t}\n\n\t\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underlying library does not contain valid typedefs>\n\t\t\t\tconst canvasFactory = (this.doc as any).canvasFactory;\n\t\t\t\tconst canvasAndContext = canvasFactory.create(viewport.width, viewport.height);\n\t\t\t\tconst renderContext = {\n\t\t\t\t\tcanvasContext: canvasAndContext.context,\n\t\t\t\t\tviewport,\n\t\t\t\t\tcanvas: canvasAndContext.canvas,\n\t\t\t\t};\n\n\t\t\t\tconst renderTask = page.render(renderContext);\n\t\t\t\tawait renderTask.promise;\n\t\t\t\t// Convert the canvas to an image buffer.\n\t\t\t\tlet data: Uint8Array = new Uint8Array();\n\t\t\t\tlet dataUrl: string = '';\n\n\t\t\t\tif (typeof canvasAndContext.canvas.toBuffer === 'function') {\n\t\t\t\t\t// Node.js environment (canvas package)\n\t\t\t\t\t// biome-ignore lint/suspicious/noExplicitAny: <underline lib not support>\n\t\t\t\t\tlet nodeBuffer: any;\n\n\t\t\t\t\tif (params.imageBuffer) {\n\t\t\t\t\t\tnodeBuffer = canvasAndContext.canvas.toBuffer('image/png');\n\t\t\t\t\t\tdata = new Uint8Array(nodeBuffer);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (params.imageDataUrl) {\n\t\t\t\t\t\tif (nodeBuffer) {\n\t\t\t\t\t\t\tdataUrl = `data:image/png;base64,${nodeBuffer.toString('base64')}`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnodeBuffer = canvasAndContext.canvas.toBuffer('image/png');\n\t\t\t\t\t\t\tdata = new Uint8Array(nodeBuffer);\n\t\t\t\t\t\t\tdataUrl = `data:image/png;base64,${nodeBuffer.toString('base64')}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Browser environment\n\t\t\t\t\tif (params.imageBuffer) {\n\t\t\t\t\t\tconst imageData = canvasAndContext.context.getImageData(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tcanvasAndContext.canvas.width,\n\t\t\t\t\t\t\tcanvasAndContext.canvas.height,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdata = new Uint8Array(imageData.data);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (params.imageDataUrl) {\n\t\t\t\t\t\tdataUrl = canvasAndContext.canvas.toDataURL('image/png');\n\t\t\t\t\t\t//const base64 = dataUrl.split(',')[1];\n\t\t\t\t\t\t//const binaryString = atob(base64);\n\t\t\t\t\t\t//data = new Uint8Array(binaryString.length);\n\t\t\t\t\t\t//for (let i = 0; i < binaryString.length; i++) {\n\t\t\t\t\t\t//\tdata[i] = binaryString.charCodeAt(i);\n\t\t\t\t\t\t//}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult.pages.push({\n\t\t\t\t\tdata,\n\t\t\t\t\tdataUrl,\n\t\t\t\t\tpageNumber: i,\n\t\t\t\t\twidth: viewport.width,\n\t\t\t\t\theight: viewport.height,\n\t\t\t\t\tscale: viewport.scale,\n\t\t\t\t});\n\n\t\t\t\tpage.cleanup();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Detect and extract tables from pages by analysing vector drawing operators, then populate cells with text.\n\t *\n\t * Behavior notes:\n\t * - Scans operator lists for rectangles/lines that form table grids (uses PathGeometry and LineStore).\n\t * - Normalizes detected geometry and matches positioned text to table cells.\n\t * - Honors ParseParameters for page selection.\n\t *\n\t * @param params - ParseParameters controlling which pages to analyse (partial/first/last).\n\t * @returns Promise<TableResult> containing discovered tables per page.\n\t */\n\tpublic async getTable(params: ParseParameters = {}): Promise<TableResult> {\n\t\tconst doc = await this.load();\n\t\tconst result = new TableResult(doc.numPages);\n\n\t\tif (this.doc === undefined) {\n\t\t\tthrow new Error('PDF document not loaded');\n\t\t}\n\n\t\tfor (let i: number = 1; i <= result.total; i++) {\n\t\t\tif (this.shouldParse(i, result.total, params)) {\n\t\t\t\tconst page = await this.doc.getPage(i);\n\t\t\t\t//const viewport = page.getViewport({ scale: 1 });\n\t\t\t\t//viewport.convertToViewportPoint(0, 0);\n\n\t\t\t\tconst store = await this.getPageTables(page);\n\t\t\t\t//const store = await this.getPageGeometry(page);\n\n\t\t\t\tstore.normalize();\n\n\t\t\t\tconst tableDataArr = store.getTableData();\n\t\t\t\tawait this.fillPageTables(page, tableDataArr);\n\n\t\t\t\tconst pageTableResult: PageTableResult = { num: i, tables: [] };\n\t\t\t\tfor (const table of tableDataArr) {\n\t\t\t\t\t//if (table.cellCount < 3) continue\n\t\t\t\t\tpageTableResult.tables.push(table.toArray());\n\t\t\t\t\t//const pageTableResult: PageTableResult = { num: i, tables: table.toArray() };\n\n\t\t\t\t\t//pageTableResult.tables.push(table.toData())\n\t\t\t\t}\n\t\t\t\tresult.pages.push(pageTableResult);\n\n\t\t\t\tpage.cleanup();\n\t\t\t}\n\t\t}\n\n\t\t// for (const table of Table.AllTables) {\n\t\t//     if (table.cellCount < 3) continue\n\t\t//     const str = table.toString()\n\t\t//     console.log(str)\n\t\t// }\n\t\treturn result;\n\t}\n\n\tprivate getPathGeometry(mm: MinMax): PathGeometry {\n\t\tconst width = mm[2] - mm[0];\n\t\tconst height = mm[3] - mm[1];\n\n\t\tif (mm[0] === Infinity) {\n\t\t\treturn PathGeometry.undefined;\n\t\t}\n\n\t\tif (width > 5 && height > 5) {\n\t\t\treturn PathGeometry.rectangle;\n\t\t} else if (width > 5 && height === 0) {\n\t\t\treturn PathGeometry.hline;\n\t\t} else if (width === 0 && height > 5) {\n\t\t\treturn PathGeometry.vline;\n\t\t}\n\n\t\treturn PathGeometry.undefined;\n\t}\n\n\tprivate async getPageTables(page: PDFPageProxy): Promise<LineStore> {\n\t\tconst lineStore: LineStore = new LineStore();\n\t\tconst viewport = page.getViewport({ scale: 1 });\n\t\tlet transformMatrix = [1, 0, 0, 1, 0, 0];\n\t\tconst transformStack: Array<Array<number>> = [];\n\n\t\tconst opList = await page.getOperatorList();\n\n\t\tfor (let i = 0; i < opList.fnArray.length; i++) {\n\t\t\tconst fn = opList.fnArray[i];\n\t\t\tconst args = opList.argsArray[i];\n\t\t\tconst op = args?.[0] ?? 0;\n\t\t\tconst mm = args?.[2] ?? [Infinity, Infinity, -Infinity, -Infinity];\n\t\t\t//const minMax = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n\n\t\t\tif (fn === pdfjs.OPS.constructPath) {\n\t\t\t\tif (op === pdfjs.OPS.fill) {\n\t\t\t\t\t//debugger;\n\t\t\t\t}\n\t\t\t\tif (op !== pdfjs.OPS.stroke) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst pg = this.getPathGeometry(mm);\n\t\t\t\tif (pg === PathGeometry.rectangle) {\n\t\t\t\t\tconst rect = new Rectangle(new Point(mm[0], mm[1]), mm[2] - mm[0], mm[3] - mm[1]);\n\t\t\t\t\trect.transform(transformMatrix);\n\t\t\t\t\trect.transform(viewport.transform);\n\t\t\t\t\tlineStore.addRectangle(rect);\n\t\t\t\t} else if (pg === PathGeometry.hline || pg === PathGeometry.vline) {\n\t\t\t\t\tconst from = new Point(mm[0], mm[1]);\n\t\t\t\t\tconst to = new Point(mm[2], mm[3]);\n\t\t\t\t\tconst line = new Line(from, to);\n\t\t\t\t\tline.transform(transformMatrix);\n\t\t\t\t\tline.transform(viewport.transform);\n\t\t\t\t\tlineStore.add(line);\n\t\t\t\t} else {\n\t\t\t\t\t//debugger;\n\t\t\t\t}\n\n\t\t\t\t// if (op === pdfjs.OPS.rectangle) {\n\t\t\t\t// \tdebugger;\n\t\t\t\t// } else if (op === pdfjs.OPS.moveTo) {\n\t\t\t\t// \tdebugger;\n\t\t\t\t// } else if (op === pdfjs.OPS.lineTo) {\n\t\t\t\t// \tdebugger;\n\t\t\t\t// } else if (op === pdfjs.OPS.endPath) {\n\t\t\t\t// \tconst combinedMatrix = pdfjs.Util.transform(viewport.transform, transformMatrix);\n\n\t\t\t\t// \t// while (args[1].length) {\n\t\t\t\t// \t// \tconst drawOp = args[1].shift();\n\t\t\t\t// \t// \tdebugger;\n\t\t\t\t// \t// }\n\t\t\t\t// } else {\n\t\t\t\t// \t//debugger;\n\t\t\t\t// }\n\t\t\t} else if (fn === pdfjs.OPS.setLineWidth) {\n\t\t\t\t//debugger;\n\t\t\t} else if (fn === pdfjs.OPS.save) {\n\t\t\t\ttransformStack.push(transformMatrix);\n\t\t\t} else if (fn === pdfjs.OPS.restore) {\n\t\t\t\tconst restoredMatrix = transformStack.pop();\n\t\t\t\tif (restoredMatrix) {\n\t\t\t\t\ttransformMatrix = restoredMatrix;\n\t\t\t\t}\n\t\t\t} else if (fn === pdfjs.OPS.transform) {\n\t\t\t\t//transformMatrix = this.transform_fn(transformMatrix, args);\n\t\t\t\ttransformMatrix = pdfjs.Util.transform(transformMatrix, args);\n\t\t\t}\n\t\t}\n\n\t\treturn lineStore;\n\t}\n\n\t// private async getPageGeometry(page: PDFPageProxy): Promise<LineStore> {\n\t// \tconst lineStore: LineStore = new LineStore();\n\t// \tconst opList = await page.getOperatorList();\n\n\t// \tconst viewport = page.getViewport({ scale: 1 });\n\n\t// \tlet transformMatrix = [1, 0, 0, 1, 0, 0];\n\t// \tconst transformStack: Array<Array<number>> = [];\n\n\t// \tlet current_x: number = 0;\n\t// \tlet current_y: number = 0;\n\n\t// \tfor (let j = 0; j < opList.fnArray.length; j++) {\n\t// \t\tconst fn = opList.fnArray[j];\n\t// \t\tconst args = opList.argsArray[j];\n\n\t// \t\tif (fn === pdfjs.OPS.constructPath) {\n\t// \t\t\twhile (args[0].length) {\n\t// \t\t\t\tconst op = args[0].shift();\n\n\t// \t\t\t\tconst combinedMatrix = pdfjs.Util.transform(viewport.transform, transformMatrix);\n\n\t// \t\t\t\tif (op === pdfjs.OPS.rectangle) {\n\t// \t\t\t\t\tconst x = args[1].shift();\n\t// \t\t\t\t\tconst y = args[1].shift();\n\t// \t\t\t\t\tconst width = args[1].shift();\n\t// \t\t\t\t\tconst height = args[1].shift();\n\n\t// \t\t\t\t\tif (Math.min(width, height) <= 2) {\n\t// \t\t\t\t\t\t// TODO remove\n\t// \t\t\t\t\t\tdebugger;\n\t// \t\t\t\t\t}\n\n\t// \t\t\t\t\tconst rect = new Rectangle(new Point(x, y), width, height);\n\t// \t\t\t\t\trect.transform(combinedMatrix);\n\t// \t\t\t\t\t//rect.transform(viewport.transform);\n\n\t// \t\t\t\t\tlineStore.addRectangle(rect);\n\t// \t\t\t\t} else if (op === pdfjs.OPS.moveTo) {\n\t// \t\t\t\t\tcurrent_x = args[1].shift();\n\t// \t\t\t\t\tcurrent_y = args[1].shift();\n\t// \t\t\t\t} else if (op === pdfjs.OPS.lineTo) {\n\t// \t\t\t\t\tconst x = args[1].shift();\n\t// \t\t\t\t\tconst y = args[1].shift();\n\n\t// \t\t\t\t\t//default trasform\n\t// \t\t\t\t\tconst from = new Point(current_x, current_y);\n\t// \t\t\t\t\tconst to = new Point(x, y);\n\t// \t\t\t\t\tconst line = new Line(from, to);\n\t// \t\t\t\t\tline.transform(combinedMatrix);\n\t// \t\t\t\t\t//line.transform(viewport.transform);\n\n\t// \t\t\t\t\t// // viewport transform\n\t// \t\t\t\t\t// const _from = viewport.convertToViewportPoint(line.from.x, line.from.y)\n\t// \t\t\t\t\t// const _to = viewport.convertToViewportPoint(line.to.x, line.to.y)\n\t// \t\t\t\t\t//\n\t// \t\t\t\t\t// const transformedLine = new Line(new Point(_from[0], _from[1]), new Point(_to[0], _to[1]))\n\t// \t\t\t\t\tlineStore.add(line);\n\n\t// \t\t\t\t\tcurrent_x = x;\n\t// \t\t\t\t\tcurrent_y = y;\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t} else if (fn === pdfjs.OPS.save) {\n\t// \t\t\ttransformStack.push(transformMatrix);\n\t// \t\t} else if (fn === pdfjs.OPS.restore) {\n\t// \t\t\tconst restoredMatrix = transformStack.pop();\n\t// \t\t\tif (restoredMatrix) {\n\t// \t\t\t\ttransformMatrix = restoredMatrix;\n\t// \t\t\t}\n\t// \t\t} else if (fn === pdfjs.OPS.transform) {\n\t// \t\t\t//transformMatrix = this.transform_fn(transformMatrix, args);\n\t// \t\t\ttransformMatrix = pdfjs.Util.transform(transformMatrix, args);\n\t// \t\t}\n\t// \t}\n\n\t// \treturn lineStore;\n\t// }\n\n\tprivate async fillPageTables(page: PDFPageProxy, pageTables: Array<TableData>): Promise<void> {\n\t\t//const resultTable: Array<Table> = []\n\n\t\tconst viewport = page.getViewport({ scale: 1 });\n\n\t\t// for (let i = 0; i < pageTables.length; i++) {\n\t\t//     const currentTable = pageTables[i]\n\t\t// }\n\n\t\t//pageTables = pageTables.filter((table) => table.cellCount > 3)\n\n\t\tconst textContent = await page.getTextContent({\n\t\t\tincludeMarkedContent: false,\n\t\t\tdisableNormalization: false,\n\t\t});\n\n\t\tfor (const textItem of textContent.items) {\n\t\t\tif (!('str' in textItem)) continue;\n\n\t\t\tconst tx = pdfjs.Util.transform(\n\t\t\t\tpdfjs.Util.transform(viewport.transform, textItem.transform),\n\t\t\t\t[1, 0, 0, -1, 0, 0],\n\t\t\t);\n\n\t\t\t//const resXY = viewport.convertToViewportPoint(tx[4], tx[5]);\n\t\t\t// textItem.transform = pdfjs.Util.transform(viewport.transform, textItem.transform)\n\t\t\t// textItem.transform[5] = viewport.height - textItem.transform[5] - textItem.height\n\n\t\t\tfor (const pageTable of pageTables) {\n\t\t\t\tconst cell = pageTable.findCell(tx[4], tx[5]);\n\t\t\t\tif (cell) {\n\t\t\t\t\tcell.text.push(textItem.str);\n\t\t\t\t\tif (textItem.hasEOL) {\n\t\t\t\t\t\tcell.text.push('\\n');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Table.tryAddText(pageTables, textItem)\n\t\t}\n\t}\n}\n\n//PDFParse.setWorker();\n", "// eslint-disable-next-line @typescript-eslint/no-require-imports\nconst pdf = require('pdf-parse')\n\n/**\n * Fetches and extracts text content from a PDF at the given URL\n * Returns null if extraction fails\n */\nexport async function extractTextFromPdfUrl(pdfUrl: string): Promise<string | null> {\n    try {\n        console.log(` Fetching PDF from: ${pdfUrl}`)\n\n        const response = await fetch(pdfUrl)\n        if (!response.ok) {\n            console.error(` Failed to fetch PDF: ${response.status} ${response.statusText}`)\n            return null\n        }\n\n        const arrayBuffer = await response.arrayBuffer()\n        const buffer = Buffer.from(arrayBuffer)\n\n        console.log(` PDF downloaded, size: ${buffer.length} bytes`)\n\n        const data = await pdf(buffer)\n\n        console.log(` Extracted ${data.text.length} characters from PDF`)\n        console.log(` PDF has ${data.numpages} pages`)\n\n        return data.text\n    } catch (error) {\n        console.error(' Error extracting PDF text:', error)\n        return null\n    }\n}\n"],
  "mappings": "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",
  "names": ["__webpack_modules__", "module", "__unused_webpack_exports", "__webpack_require__", "isCallable", "exports", "it", "call", "aCallable", "anObject", "tryToString", "getIteratorMethod", "$TypeError", "TypeError", "argument", "usingIterator", "iteratorMethod", "arguments", "length", "__unused_webpack_module", "$", "iterate", "getIteratorDirect", "iteratorClose", "findWithoutClosingOnEarlyError", "target", "proto", "real", "forced", "find", "predicate", "this", "error", "record", "counter", "value", "stop", "IS_RECORD", "INTERRUPTED", "result", "uncurryThis", "fails", "hasOwn", "DESCRIPTORS", "CONFIGURABLE_FUNCTION_NAME", "CONFIGURABLE", "inspectSource", "InternalStateModule", "enforceInternalState", "enforce", "getInternalState", "get", "$String", "String", "defineProperty", "Object", "stringSlice", "slice", "replace", "join", "CONFIGURABLE_LENGTH", "TEMPLATE", "split", "makeBuiltIn", "name", "options", "getter", "setter", "configurable", "t", "arity", "constructor", "writable", "prototype", "state", "source", "Function", "toString", "FunctionPrototype", "getDescriptor", "getOwnPropertyDescriptor", "EXISTS", "PROPER", "getBuiltIn", "globalThis", "anUint8Array", "notDetached", "numberToString", "Uint8Array", "INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS", "toHex", "buffer", "i", "hex", "fn", "ITERATOR_INSTEAD_OF_RECORD", "step", "iterator", "next", "done", "getIteratorFlattenable", "createIteratorProxy", "IS_PURE", "iteratorHelperThrowsOnInvalidIterator", "iteratorHelperWithoutClosingOnEarlyError", "FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR", "flatMapWithoutClosingOnEarlyError", "FORCED", "IteratorProxy", "inner", "mapper", "flatMap", "test", "bind", "hasOwnProperty", "classof", "isPrototypeOf", "Prototype", "methodName", "method", "Iterator", "ceil", "Math", "floor", "trunc", "x", "n", "USE_SYMBOL_AS_UID", "$Object", "$Symbol", "getMethod", "isNullOrUndefined", "Iterators", "ITERATOR", "alphabet", "internalObjectKeys", "enumBugKeys", "keys", "O", "exec", "klass", "everyWithoutClosingOnEarlyError", "every", "stopped", "set", "has", "NATIVE_WEAK_MAP", "isObject", "createNonEnumerableProperty", "shared", "sharedKey", "hiddenKeys", "OBJECT_ALREADY_INITIALIZED", "WeakMap", "store", "metadata", "facade", "STATE", "getterFor", "TYPE", "type", "number", "iters", "kind", "V8", "ENVIRONMENT", "structuredClone", "ArrayBuffer", "clone", "transfer", "byteLength", "apply", "newPromiseCapabilityModule", "perform", "Promise", "ACCEPT_ARGUMENTS", "stat", "try", "callbackfn", "args", "promiseCapability", "f", "reject", "resolve", "promise", "union", "setMethodGetKeysBeforeCloning", "callWithSafeIterationClosing", "MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR", "mapWithoutClosingOnEarlyError", "map", "obj", "toIndexedObject", "indexOf", "push", "object", "names", "key", "descriptor", "F", "getPrototypeOf", "SyntaxError", "parseInt", "min", "NOT_HEX", "string", "into", "stringLength", "maxLength", "bytes", "read", "written", "hexits", "activeXDocument", "definePropertiesModule", "html", "documentCreateElement", "PROTOTYPE", "SCRIPT", "IE_PROTO", "EmptyConstructor", "scriptTag", "content", "LT", "NullProtoObjectViaActiveX", "write", "close", "temp", "parentWindow", "NullProtoObject", "ActiveXObject", "iframeDocument", "iframe", "JS", "document", "domain", "style", "display", "appendChild", "src", "contentWindow", "open", "create", "Properties", "isSupersetOf", "FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR", "filterWithoutClosingOnEarlyError", "filter", "$default", "isArrayIteratorMethod", "lengthOfArrayLike", "getIterator", "Result", "ResultPrototype", "iterable", "unboundFunction", "iterFn", "index", "that", "AS_ENTRIES", "IS_ITERATOR", "condition", "callFn", "isSymbol", "ordinaryToPrimitive", "wellKnownSymbol", "TO_PRIMITIVE", "input", "pref", "exoticToPrim", "toObject", "CORRECT_PROTOTYPE_GETTER", "ObjectPrototype", "replacement", "isForced", "feature", "detection", "data", "normalize", "POLYFILL", "NATIVE", "toLowerCase", "commonAlphabet", "base64Alphabet", "base64UrlAlphabet", "inverse", "characters", "charAt", "i2c", "c2i", "i2cUrl", "c2iUrl", "passed", "required", "navigator", "userAgent", "uncurryThisAccessor", "requireObjectCoercible", "aPossiblePrototype", "setPrototypeOf", "CORRECT_SETTER", "Array", "__proto__", "$RangeError", "RangeError", "$Infinity", "Infinity", "abs", "pow", "POW_2_1023", "MAX_SAFE_INTEGER", "MAX_DOUBLE", "Number", "MAX_VALUE", "MAX_ULP", "NOT_A_NUMBER", "MINUS_INFINITY", "PLUS_INFINITY", "MINUS_ZERO", "FINITE", "twosum", "y", "hi", "lo", "sumPrecise", "items", "numbers", "count", "NaN", "sum", "tmp", "partials", "overflow", "actuallyUsedPartials", "j", "sign", "$this", "dummy", "Wrapper", "NewTarget", "NewTargetPrototype", "NATIVE_ARRAY_BUFFER", "arrayBufferByteLength", "DataView", "id", "postfix", "random", "aSet", "SetHelpers", "size", "getSetRecord", "iterateSet", "iterateSimple", "remove", "other", "otherRec", "e", "includes", "isPossiblePrototype", "someWithoutClosingOnEarlyError", "some", "add", "keysIter", "functionToString", "getOwnPropertySymbols", "toIntegerOrInfinity", "INVALID_SIZE", "max", "SetRecord", "intSize", "numSize", "isDisjointFrom", "createElement", "setArrayLength", "doesNotExceedSafeInteger", "properErrorOnNonWritableLength", "item", "len", "argCount", "ArrayPrototype", "userAgentStartsWith", "Bun", "version", "Deno", "process", "window", "aString", "$fromHex", "setFromHex", "val", "valueOf", "isArray", "SetPrototype", "Set", "WorkerThreads", "channel", "$detach", "getBuiltInNodeModule", "PROPER_STRUCTURED_CLONE_TRANSFER", "$ArrayBuffer", "$MessageChannel", "MessageChannel", "detach", "transferable", "u", "port1", "postMessage", "V8_VERSION", "symbol", "Symbol", "sham", "SILENT_ON_NON_WRITABLE_LENGTH_SET", "METHOD_NAME", "ExpectedError", "IteratorPrototype", "CLOSED", "return", "check", "self", "global", "defineBuiltIn", "validateArgumentsLength", "$URLSearchParams", "URLSearchParams", "URLSearchParamsPrototype", "append", "$delete", "forEach", "params", "$value", "entries", "v", "k", "entry", "dindex", "found", "entriesLength", "enumerable", "unsafe", "withResolvers", "NAME", "Constructor", "defineBuiltInAccessor", "uid", "Int8Array", "Int8ArrayPrototype", "Uint8ClampedArray", "Uint8ClampedArrayPrototype", "TypedArray", "TypedArrayPrototype", "TO_STRING_TAG", "TYPED_ARRAY_TAG", "TYPED_ARRAY_CONSTRUCTOR", "NATIVE_ARRAY_BUFFER_VIEWS", "opera", "TYPED_ARRAY_TAG_REQUIRED", "TypedArrayConstructorsList", "Int16Array", "Uint16Array", "Int32Array", "Uint32Array", "Float32Array", "Float64Array", "BigIntArrayConstructorsList", "BigInt64Array", "BigUint64Array", "getTypedArrayConstructor", "isTypedArray", "aTypedArray", "aTypedArrayConstructor", "C", "exportTypedArrayMethod", "KEY", "property", "ARRAY", "TypedArrayConstructor", "error2", "exportTypedArrayStaticMethod", "isView", "definePropertyModule", "createPropertyDescriptor", "documentAll", "all", "IE8_DOM_DEFINE", "V8_PROTOTYPE_DEFINE_BUG", "toPropertyKey", "$defineProperty", "$getOwnPropertyDescriptor", "ENUMERABLE", "WRITABLE", "P", "Attributes", "current", "createSetLike", "createSetLikeWithInfinitySize", "Error", "callback", "notANaN", "toPositiveInteger", "takeWithoutClosingOnEarlyError", "remaining", "take", "limit", "anInstance", "inheritIfRequired", "normalizeStringArgument", "DOMExceptionConstants", "clearErrorStack", "DOM_EXCEPTION", "NativeDOMException", "$DOMException", "DOMExceptionPrototype", "argumentsLength", "message", "stack", "ERROR_HAS_STACK", "DOM_EXCEPTION_HAS_STACK", "BUGGY_DESCRIPTOR", "FORCED_CONSTRUCTOR", "DOMException", "PolyfilledDOMException", "PolyfilledDOMExceptionPrototype", "constant", "constantName", "s", "c", "IndexSizeError", "m", "DOMStringSizeError", "HierarchyRequestError", "WrongDocumentError", "InvalidCharacterError", "NoDataAllowedError", "NoModificationAllowedError", "NotFoundError", "NotSupportedError", "InUseAttributeError", "InvalidStateError", "InvalidModificationError", "NamespaceError", "InvalidAccessError", "ValidationError", "TypeMismatchError", "SecurityError", "NetworkError", "AbortError", "URLMismatchError", "QuotaExceededError", "TimeoutError", "InvalidNodeTypeError", "DataCloneError", "symmetricDifference", "getOwnPropertyNamesModule", "getOwnPropertySymbolsModule", "concat", "isDetached", "arrayFromConstructorAndList", "$fromBase64", "fromBase64", "list", "$length", "IndexedObject", "integer", "toIndex", "detachTransferable", "ArrayBufferPrototype", "DataViewPrototype", "isResizable", "maxByteLength", "getInt8", "setInt8", "arrayBuffer", "newLength", "preserveResizability", "newBuffer", "newByteLength", "fixedLength", "a", "b", "copyLength", "USE_NATIVE_URL", "URL", "parse", "url", "urlString", "base", "toPrimitive", "prim", "BigInt", "isSubsetOf", "V", "func", "PromiseCapability", "$$resolve", "$$reject", "NATIVE_BIND", "toLength", "ENTRIES", "defineGlobalProperty", "copyConstructorProperties", "targetProperty", "sourceProperty", "TARGET", "GLOBAL", "STATIC", "dontCallGetSet", "setFromBase64", "objectKeys", "defineProperties", "props", "simple", "nonConfigurable", "nonWritable", "TO_STRING_TAG_SUPPORT", "classofRaw", "CORRECT_ARGUMENTS", "tag", "callee", "bitmap", "NATIVE_SYMBOL", "propertyIsEnumerable", "propertyIsEnumerableModule", "searchParams", "params2", "pathname", "toJSON", "sort", "href", "username", "host", "hash", "getAll", "$has", "values", "forEachWithoutClosingOnEarlyError", "SHARED", "versions", "mode", "copyright", "license", "difference", "setLike", "baseSet", "clear", "PrototypeOfArrayIteratorPrototype", "arrayIterator", "BUGGY_SAFARI_ITERATORS", "ownKeys", "getOwnPropertyDescriptorModule", "exceptions", "namespace", "$transfer", "transferToFixedLength", "intersection", "from", "createProperty", "CONSTRUCTOR", "NativeIterator", "IteratorConstructor", "defineIteratorPrototypeAccessor", "WellKnownSymbolsStore", "createWellKnownSymbol", "withoutSetter", "$SyntaxError", "$parseInt", "fromCharCode", "at", "codePoints", "IS_4_HEX_DIGITS", "IS_C0_CONTROL_CODE", "unterminated", "chr", "twoChars", "fourHexDigits", "end", "FAILS_ON_INITIAL_UNDEFINED", "reduce", "reduceWithoutClosingOnEarlyError", "reducer", "noInitial", "accumulator", "parseJSONString", "JSON", "nativeParse", "enumerableOwnProperties", "IS_DIGIT", "IS_NON_ZERO_DIGIT", "IS_NUMBER_START", "IS_WHITESPACE", "internalize", "holder", "reviver", "node", "elementRecordsLen", "unmodified", "context", "nodeIsArray", "nodes", "internalizeProperty", "Node", "Context", "fork", "nextIndex", "skip", "array", "keyword", "start", "expectKeypair", "until", "expectElement", "parsed", "startIndex", "endIndex", "regex", "NO_SOURCE_SUPPORT", "unsafeInt", "PROPER_BASE_PARSE", "text", "root", "interruptible", "getOwnPropertyNames", "$Error", "TEST", "V8_OR_CHAKRA_STACK_ENTRY", "IS_V8_OR_CHAKRA_STACK", "dropEntries", "prepareStackTrace", "stringHandling", "Reflect", "$propertyIsEnumerable", "NASHORN_BUG", "anObjectOrUndefined", "base64Map", "getAlphabetOption", "skipAsciiWhitespace", "decodeBase64Chunk", "chunk", "throwOnExtraBits", "chunkLength", "triplet", "chunkBytes", "writeBytes", "elements", "elementsLength", "lastChunkHandling", "remainingBytes", "DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR", "dropWithoutClosingOnEarlyError", "drop", "IS_NODE", "getBuiltinModule", "defineBuiltIns", "createIterResultObject", "iteratorCloseAll", "ITERATOR_HELPER", "WRAP_FOR_VALID_ITERATOR", "NORMAL", "THROW", "setInternalState", "createIteratorProxyPrototype", "nextHandler", "returnHandlerResult", "returnMethod", "openIters", "WrapForValidIteratorPrototype", "IteratorHelperPrototype", "RETURN_HANDLER_RESULT", "toBase64", "omitPadding", "shift", "uncurryThisWithBind", "match", "v8", "innerResult", "innerError", "arrayWith", "ArrayBufferViewCore", "isBigIntArray", "toBigInt", "PROPER_ORDER", "THROW_ON_NEGATIVE_FRACTIONAL_INDEX", "with", "relativeIndex", "actualValue", "toAbsoluteIndex", "createMethod", "IS_INCLUDES", "el", "fromIndex", "actualIndex", "A", "__webpack_module_cache__", "moduleId", "cachedModule", "d", "definition", "o", "prop", "isNodeJS", "nw", "electron", "FONT_IDENTITY_MATRIX", "LINE_FACTOR", "RenderingIntentFlag", "AnnotationMode", "DISABLE", "ENABLE", "ENABLE_FORMS", "ENABLE_STORAGE", "AnnotationEditorPrefix", "AnnotationEditorType", "NONE", "FREETEXT", "HIGHLIGHT", "STAMP", "INK", "POPUP", "SIGNATURE", "COMMENT", "AnnotationEditorParamsType", "RESIZE", "CREATE", "FREETEXT_SIZE", "FREETEXT_COLOR", "FREETEXT_OPACITY", "INK_COLOR", "INK_THICKNESS", "INK_OPACITY", "HIGHLIGHT_COLOR", "HIGHLIGHT_THICKNESS", "HIGHLIGHT_FREE", "HIGHLIGHT_SHOW_ALL", "DRAW_STEP", "PermissionFlag", "PRINT", "MODIFY_CONTENTS", "COPY", "MODIFY_ANNOTATIONS", "FILL_INTERACTIVE_FORMS", "COPY_FOR_ACCESSIBILITY", "ASSEMBLE", "PRINT_HIGH_QUALITY", "TextRenderingMode", "util_ImageKind", "GRAYSCALE_1BPP", "RGB_24BPP", "RGBA_32BPP", "AnnotationType", "TEXT", "LINK", "LINE", "SQUARE", "CIRCLE", "POLYGON", "POLYLINE", "UNDERLINE", "SQUIGGLY", "STRIKEOUT", "CARET", "FILEATTACHMENT", "SOUND", "MOVIE", "WIDGET", "SCREEN", "PRINTERMARK", "TRAPNET", "WATERMARK", "THREED", "REDACT", "AnnotationBorderStyleType", "VerbosityLevel", "ERRORS", "WARNINGS", "INFOS", "OPS", "dependency", "setLineWidth", "setLineCap", "setLineJoin", "setMiterLimit", "setDash", "setRenderingIntent", "setFlatness", "setGState", "save", "restore", "transform", "moveTo", "lineTo", "curveTo", "curveTo2", "curveTo3", "closePath", "rectangle", "stroke", "closeStroke", "fill", "eoFill", "fillStroke", "eoFillStroke", "closeFillStroke", "closeEOFillStroke", "endPath", "clip", "eoClip", "beginText", "endText", "setCharSpacing", "setWordSpacing", "setHScale", "setLeading", "setFont", "setTextRenderingMode", "setTextRise", "moveText", "setLeadingMoveText", "setTextMatrix", "nextLine", "showText", "showSpacedText", "nextLineShowText", "nextLineSetSpacingShowText", "setCharWidth", "setCharWidthAndBounds", "setStrokeColorSpace", "setFillColorSpace", "setStrokeColor", "setStrokeColorN", "setFillColor", "setFillColorN", "setStrokeGray", "setFillGray", "setStrokeRGBColor", "setFillRGBColor", "setStrokeCMYKColor", "setFillCMYKColor", "shadingFill", "beginInlineImage", "beginImageData", "endInlineImage", "paintXObject", "markPoint", "markPointProps", "beginMarkedContent", "beginMarkedContentProps", "endMarkedContent", "beginCompat", "endCompat", "paintFormXObjectBegin", "paintFormXObjectEnd", "beginGroup", "endGroup", "beginAnnotation", "endAnnotation", "paintImageMaskXObject", "paintImageMaskXObjectGroup", "paintImageXObject", "paintInlineImageXObject", "paintInlineImageXObjectGroup", "paintImageXObjectRepeat", "paintImageMaskXObjectRepeat", "paintSolidColorImageMask", "constructPath", "setStrokeTransparent", "setFillTransparent", "rawFillPath", "DrawOPS", "PasswordResponses", "NEED_PASSWORD", "INCORRECT_PASSWORD", "verbosity", "getVerbosityLevel", "info", "msg", "console", "warn", "unreachable", "assert", "cond", "createValidAbsoluteUrl", "baseUrl", "addDefaultProtocol", "startsWith", "dots", "tryConvertEncoding", "decodeURIComponent", "escape", "absoluteUrl", "protocol", "updateUrlHash", "allowRel", "res", "shadow", "nonSerializable", "BaseException", "code", "super", "details", "status", "missing", "bytesToString", "MAX_ARGUMENT_COUNT", "strBuf", "chunkEnd", "subarray", "stringToBytes", "str", "charCodeAt", "util_FeatureTest", "isLittleEndian", "buffer8", "isEvalSupported", "isOffscreenCanvasSupported", "OffscreenCanvas", "isImageDecoderSupported", "ImageDecoder", "platform", "isAndroid", "isLinux", "isMac", "isWindows", "isFirefox", "isCSSRoundSupported", "CSS", "supports", "hexNumbers", "padStart", "Util", "r", "g", "dm", "minMax", "m1", "m2", "md", "p", "pos", "p0", "p1", "m0", "m3", "m4", "m5", "pI", "pI1", "rect", "output", "r0", "r1", "r2", "r3", "a0", "a2", "a1", "a3", "b0", "b2", "b1", "b3", "m1r0", "m1r2", "m2r1", "m2r3", "matrix", "first", "second", "sqrt", "rect1", "rect2", "xLow", "xHigh", "yLow", "yHigh", "x0", "y0", "x1", "y1", "x2", "x3", "y2", "y3", "mt", "tt", "ttt", "delta", "sqrtDelta", "NormalizeRegex", "NormalizationMap", "normalizeUnicode", "Map", "replaceAll", "_", "p2", "getUuid", "crypto", "randomUUID", "buf", "getRandomValues", "AnnotationPrefix", "MathClamp", "toBase64Util", "arr", "btoa", "AbortSignal", "any", "ac", "AbortController", "signal", "aborted", "abort", "reason", "addEventListener", "XfaText", "xfa", "styles", "walk", "shouldBuildText", "attributes", "textContent", "children", "child", "XfaLayer", "element", "storage", "intent", "storedData", "getValue", "event", "setValue", "xfaOn", "setAttribute", "xfaOff", "removeAttribute", "checked", "getAttribute", "option", "selected", "selectedIndex", "setAttributes", "linkService", "isHTMLAnchorElement", "HTMLAnchorElement", "assign", "addLinkAttributes", "newWindow", "dataId", "setupStorage", "parameters", "annotationStorage", "xfaHtml", "rootHtml", "isNotForRichText", "rootDiv", "div", "viewport", "textDivs", "createTextNode", "parent", "pop", "childHtml", "xmlns", "createElementNS", "querySelectorAll", "hidden", "SVG_NS", "PixelsPerInch", "static", "PDF", "async", "fetchData", "isValidFetchUrl", "baseURI", "response", "fetch", "ok", "statusText", "blob", "json", "request", "XMLHttpRequest", "responseType", "onreadystatechange", "readyState", "DONE", "responseText", "send", "PageViewport", "viewBox", "userUnit", "scale", "rotation", "offsetX", "offsetY", "dontFlip", "centerX", "centerY", "rotateA", "rotateB", "rotateC", "rotateD", "offsetCanvasX", "offsetCanvasY", "width", "height", "rawDims", "dims", "pageWidth", "pageHeight", "pageX", "pageY", "applyTransform", "topLeft", "bottomRight", "applyInverseTransform", "RenderingCancelledException", "extraDelay", "isDataScheme", "ii", "trim", "substring", "isPdfFile", "filename", "getFilenameFromUrl", "lastIndexOf", "getPdfFilenameFromUrl", "defaultFilename", "newURL", "decode", "decoded", "pdfRegex", "reverse", "hashFilename", "StatTimer", "started", "times", "Date", "now", "outBuf", "longest", "padEnd", "noContextMenu", "preventDefault", "stopEvent", "stopPropagation", "PDFDateString", "RegExp", "matches", "year", "month", "day", "hour", "minute", "universalTimeRelation", "offsetHour", "offsetMinute", "UTC", "getXfaPageViewport", "xfaPage", "getRGB", "color", "colorRGB", "getCurrentTransform", "ctx", "getTransform", "getCurrentTransformInverse", "invertSelf", "setLayerDimensions", "mustFlip", "mustRotate", "useRound", "w", "h", "widthStr", "heightStr", "OutputScale", "pixelRatio", "sx", "sy", "scaled", "symmetric", "maxPixels", "maxDim", "capAreaFactor", "maxAreaScale", "maxWidthScale", "maxHeightScale", "capPixels", "maxScale", "devicePixelRatio", "winPixels", "screen", "availWidth", "availHeight", "SupportedImageMimeTypes", "ColorScheme", "isDarkMode", "matchMedia", "CSSConstants", "commentForegroundColor", "classList", "body", "getComputedStyle", "applyOpacity", "opacity", "white", "round", "RGBToHSL", "rgb", "l", "HSLToRGB", "hsl", "computeLuminance", "contrastRatio", "hsl1", "hsl2", "lum1", "lum2", "contrastCache", "findContrastColor", "baseColor", "fixedColor", "cachedValue", "baseHSL", "fixedHSL", "isFixedColorDark", "minContrast", "PRECISION", "mid", "makeHexColor", "renderRichText", "dir", "className", "container", "fragment", "createDocumentFragment", "lines", "line", "render", "firstChild", "EditorToolbar", "toolbar", "colorPicker", "editor", "buttons", "altText", "comment", "commentButtonDivider", "signatureDescriptionButton", "freeze", "freetext", "highlight", "ink", "stamp", "signature", "editToolbar", "_uiManager", "_signal", "position", "toolbarPosition", "direction", "insetInlineEnd", "top", "_focusEventsAllowed", "capture", "hide", "hideDropdown", "show", "shown", "addDeleteButton", "editorType", "button", "tabIndex", "delete", "divider", "beforeElement", "renderForToolbar", "insertBefore", "renderButton", "signatureManager", "renderEditButton", "removeToolbarCommentButton", "tool", "addColorPicker", "addAltText", "addEditSignatureButton", "addComment", "beforeSelector", "querySelector", "description", "title", "destroy", "FloatingToolbar", "uiManager", "hasCommentManager", "commentSelection", "highlightSelection", "boxes", "isLTR", "lastY", "lastX", "box", "buttonClass", "l10nId", "labelL10nId", "clickHandler", "span", "bindEvents", "IdManager", "ImageManager", "baseId", "cache", "_isSVGFittingCanvas", "getContext", "willReadFrequently", "image", "Image", "then", "drawImage", "getImageData", "rawData", "refCounter", "isSvg", "File", "file", "Blob", "mustRemoveAspectRatioPromise", "fileReader", "FileReader", "imageElement", "imagePromise", "onload", "svgUrl", "onerror", "readAsDataURL", "createImageBitmap", "lastModified", "blobPromise", "getFromFile", "getFromBlob", "getFromUrl", "canvas", "offscreen", "transferToImageBitmap", "transferFromImageBitmap", "convertToBlob", "CommandManager", "commands", "locked", "maxSize", "cmd", "undo", "post", "mustExec", "overwriteIfSameType", "keepUndo", "splice", "redo", "hasSomethingToUndo", "hasSomethingToRedo", "KeyboardManager", "callbacks", "allKeys", "isMacKey", "altKey", "ctrlKey", "metaKey", "shiftKey", "bubbles", "checker", "ColorManager", "_colors", "colors", "visibility", "colorScheme", "computedColor", "RGB", "_colorsMapping", "AnnotationEditorUIManager", "abortController", "activeEditor", "allEditableAnnotations", "allEditors", "allLayers", "altTextManager", "changedExistingAnnotations", "commandManager", "commentManager", "copyPasteAC", "currentDrawingSession", "currentPageIndex", "deletedAnnotationsElementIds", "draggingEditors", "editorTypes", "editorsToRescale", "_editorUndoBar", "enableHighlightFloatingButton", "enableUpdatedAddImage", "enableNewAltTextWhenAddingImage", "filterFactory", "focusMainContainerTimeoutId", "focusManagerAC", "highlightColors", "highlightWhenShiftUp", "floatingToolbar", "idManager", "isEnabled", "isPointerDown", "isWaiting", "keyboardManagerAC", "lastActiveElement", "mainHighlightColorPicker", "missingCanvases", "mlManager", "selectedEditors", "selectedTextNode", "pageColors", "showAllStates", "pdfDocument", "previousStates", "isEditing", "isEmpty", "hasSelectedEditor", "hasSelectedText", "translation", "translationTimeoutId", "viewer", "viewerAlert", "updateModeCapability", "_keyboardManager", "arrowChecker", "contains", "activeElement", "tagName", "hasSomethingToControl", "textInputChecker", "_self", "HTMLInputElement", "small", "TRANSLATE_SMALL", "big", "TRANSLATE_BIG", "selectAll", "addNewEditorFromKeyboard", "HTMLButtonElement", "isEnterHandled", "unselectAll", "translateSelectedEditors", "eventBus", "editorUndoBar", "supportsPinchToZoom", "_eventBus", "_on", "onEditingAction", "onPageChanging", "onScaleChanging", "onRotationChanging", "onSetPreference", "evt", "updateParams", "addSelectionListener", "addDragAndDropListeners", "addKeyboardManager", "viewParameters", "realScale", "PDF_TO_CSS_UNITS", "isShiftKeyDown", "_supportsPinchToZoom", "setSidebarUiManager", "layer", "clearTimeout", "useNewAltTextFlow", "useNewAltTextWhenAddingImage", "hcmFilter", "addHCMFilter", "foreground", "background", "_highlightColors", "pair", "toUpperCase", "hasHCM", "isNameForHCM", "endsWith", "highlightColorNames", "colorName", "disableUserSelect", "firstTime", "editAltText", "posX", "posY", "showDialog", "pageIndex", "getEditorByUID", "toggleComment", "updateComment", "getData", "updatePopupColor", "removeComments", "isSelected", "toggleCommentPopup", "makeCommentColor", "getCommentDialogElement", "dialogElement", "pageNumber", "onEditorsRendered", "_off", "on", "getSignature", "once", "dispatch", "focusMainContainer", "focus", "layerX", "layerY", "getBoundingClientRect", "toggle", "commitOrRemove", "pagesRotation", "getAnchorElementForSelection", "anchorNode", "nodeType", "TEXT_NODE", "parentElement", "textLayer", "currentLayer", "hasTextLayer", "methodOfCreation", "selection", "getSelection", "isCollapsed", "anchorOffset", "focusNode", "focusOffset", "closest", "getSelectionBoxes", "empty", "isNoneMode", "createAndAddNewEditor", "showAllEditors", "editComment", "switchToMode", "displayFloatingToolbar", "annotationId", "storedValue", "getRawValue", "messageId", "stringify", "selectionChange", "activeLayer", "toggleDrawing", "combinedSignal", "pointerup", "addFocusManager", "blur", "removeFocusManager", "hasSelection", "lastEditor", "keydown", "keyup", "removeKeyboardManager", "addCopyPasteListeners", "copy", "cut", "paste", "removeCopyPasteListeners", "dragOver", "addEditListeners", "removeEditListeners", "dataTransfer", "isHandlingMimeForPasting", "dropEffect", "editors", "serialized", "serialize", "clipboardData", "setData", "ex", "newEditors", "deserializedEditor", "deserialize", "addCommands", "isEditorHandlingKeyboard", "types", "defaultPropertiesToUpdate", "getId", "enable", "disable", "editId", "isFromKeyboard", "mustEnterInEditMode", "hideSidebar", "destroyPopup", "setEditingState", "disableAll", "hideStandaloneCommentButton", "addStandaloneCommentButton", "loadSignatures", "enableAll", "updateMode", "getAnnotationsByType", "editorClass", "_editorType", "elementIds", "allComments", "annotationElementId", "hasComment", "deleted", "annotation", "popupRef", "contentsObj", "showSidebar", "setSelected", "enterInEditMode", "unselect", "canCreateNewEmptyEditor", "addNewEditor", "action", "updateDefaultParams", "visible", "updateButton", "mustWait", "disableClick", "enableClick", "promises", "setTimeout", "addChangedExistingAnnotation", "removeChangedExistingAnnotation", "addOrRebuild", "addEditor", "addToAnnotationStorage", "propertiesToUpdate", "lastSelectedEditor", "ed", "select", "updateToolbar", "firstSelectedEditor", "cleanType", "drawingEditor", "endDrawingSession", "commit", "noCommit", "totalX", "totalY", "translateInPage", "translationDone", "setUpDragSession", "savedX", "savedY", "savedPageIndex", "newX", "newY", "newPageIndex", "endDragSession", "mustBeAddedInUndoStack", "move", "_setParentAndPosition", "tx", "ty", "drag", "getLayer", "changeParent", "rebuild", "getActive", "shouldGetKeyboardEvents", "getMode", "isEditingMode", "imageManager", "rangeCount", "getRangeAt", "commonAncestorContainer", "parentWidth", "parentHeight", "rotator", "range", "collapsed", "getClientRects", "editorId", "hasBeenModified", "renderAnnotationElement", "setCanvas", "AltText", "altTextDecorative", "altTextButton", "altTextButtonLabel", "altTextTooltip", "altTextTooltipTimeout", "altTextWasFromKeyBoard", "badge", "guessedText", "textWithDisclaimer", "added", "review", "l10n", "_l10n", "label", "onClick", "_reportTelemetry", "setState", "finish", "focusVisible", "hasData", "generatedAltText", "isForCopying", "decorative", "cancel", "enabled", "disabled", "tooltip", "DELAY_TO_SHOW_TOOLTIP", "parentNode", "getElementForAltText", "Comment", "commentStandaloneButton", "commentToolbarButton", "commentWasFromKeyBoard", "initialText", "richText", "date", "popupPosition", "renderForStandalone", "commentButtonPosition", "commentButtonColor", "backgroundColor", "focusButton", "onUpdatedColor", "commentButtonWidth", "boundingClientRect", "commentPopupPositionInLayer", "parentX", "parentY", "hasDefaultPopupPosition", "removeStandaloneCommentButton", "setCommentButtonStates", "hasPopup", "ariaExpanded", "isStandalone", "ariaHasPopup", "ariaControls", "ariaControlsElements", "edit", "parentDimensions", "isDeleted", "hasBeenEdited", "TouchManager", "isPinching", "isPinchingStopped", "isPinchingDisabled", "onPinchStart", "onPinching", "onPinchEnd", "pointerDownAC", "touchInfo", "touchManagerAC", "touchMoveAC", "passive", "MIN_TOUCH_DISTANCE_TO_PINCH", "touches", "opts", "cancelPointerDown", "pointerType", "opt", "onTouchEnd", "touch0", "touch1", "identifier", "touch0X", "screenX", "touch0Y", "screenY", "touch1X", "touch1Y", "screen0X", "screen0Y", "screen1X", "screen1Y", "pTouch0X", "pTouch0Y", "pTouch1X", "pTouch1Y", "prevGapX", "prevGapY", "currGapX", "currGapY", "distance", "hypot", "pDistance", "origin", "AnnotationEditor", "accessibilityData", "allResizerDivs", "dragPointerId", "dragPointerType", "resizersDiv", "lastPointerCoords", "savedDimensions", "fakeAnnotation", "focusAC", "focusedResizerName", "hasBeenClicked", "initialRect", "isInEditMode", "isResizerEnabledForKeyboard", "moveInDOMTimeout", "prevDragX", "prevDragY", "telemetryTimeouts", "touchManager", "_isCopy", "_editToolbar", "_initialOptions", "_initialData", "_isVisible", "isDraggable", "zIndex", "_zIndex", "_resizerKeyboardManager", "resize", "_resizeWithKeyboard", "_stopResizingWithKeyboard", "_willKeepAspectRatio", "isCentered", "_structTreeParentId", "creationDate", "modificationDate", "pageRotation", "pageDimensions", "pageTranslation", "isAttachedToDOM", "_type", "isDrawer", "_defaultLineColor", "_colorManager", "getHexCode", "fakeEditor", "FakeEditor", "getNextId", "_l10nResizer", "topMiddle", "topRight", "middleRight", "bottomMiddle", "bottomLeft", "middleLeft", "_borderLineWidth", "documentElement", "parseFloat", "getPropertyValue", "_value", "mime", "_isDraggable", "center", "parentRotation", "fixAndSetPosition", "setInBackground", "setInForeground", "stopResizing", "relatedTarget", "isMultipleSelection", "screenToPageTranslation", "baseX", "baseY", "setAt", "_onTranslated", "translate", "_onTranslating", "scrollIntoView", "block", "findNewParent", "bx", "by", "getBaseTranslation", "left", "toFixed", "_hasBeenMoved", "_hasBeenResized", "_mustFixPosition", "moveInDOM", "angle", "parentScale", "setDims", "getInitialTranslation", "createResizers", "classes", "prepend", "savedDraggable", "togglePointerEvents", "savedWidth", "savedHeight", "savedParentCursor", "cursor", "savedCursor", "pointerUpCallback", "addResizeToUndoStack", "_onResized", "newWidth", "newHeight", "minWidth", "MIN_SIZE", "minHeight", "rotationMatrix", "transf", "invRotationMatrix", "getPoint", "getOpposite", "isDiagonal", "isHorizontal", "point", "oppositePoint", "transfOppositePoint", "oppositeX", "_round", "oppositeY", "deltaX", "deltaY", "ratioX", "ratioY", "fromKeyboard", "lastScreenX", "lastScreenY", "oldDiag", "_onResizing", "altTextFinish", "toolbarButtons", "addEditToolbar", "addButton", "addCommentButton", "addCommentButtonInToolbar", "addButtonBefore", "removeCommentButtonFromToolbar", "removeButton", "removeEditToolbar", "editToolbarDiv", "before", "getClientDimensions", "createAltText", "initialize", "altTextData", "guessedAltText", "setGuessedText", "hasAltText", "hasAltTextData", "focusCommentButton", "getNonHCMColor", "removeComment", "setCommentData", "setInitialText", "getAndRemoveDataFromAnnotationStorage", "updateFromAnnotationLayer", "hasEditedComment", "hasDeletedComment", "setSelectedButton", "DEFAULT_POPUP_WIDTH", "DEFAULT_POPUP_HEIGHT", "trY", "blX", "blY", "trX", "popup", "contents", "parentBoundingClientRect", "defaultL10nId", "addFocusListeners", "maxWidth", "maxHeight", "touchPinchStartCallback", "_origin", "prevDistance", "factor", "transfCenterPoint", "newTransfCenterPoint", "touchPinchEndCallback", "toggleSelected", "hasDraggingStarted", "cancelDrag", "_onStopDragging", "clientX", "clientY", "pointerId", "_onStartDragging", "dragSelectedEditors", "isPrimary", "moveEditorInDOM", "shiftX", "shiftY", "getPDFRect", "getRect", "convert", "enableEditMode", "disableEditMode", "needsToBeRebuilt", "isOnScreen", "bottom", "right", "innerHeight", "innerWidth", "focusin", "focusout", "_angle", "serializeDeleted", "annotationType", "structTreeParentId", "isCopy", "getRectInCurrentCoords", "removeEditor", "timeout", "makeResizable", "commentButtonPositionInPage", "commentPopupPosition", "elementBeforePopup", "boundResizerKeydown", "boundResizerBlur", "firstPosition", "nextFirstPosition", "lastChild", "stopImmediatePropagation", "setResizerTabIndex", "toggleAltTextBadge", "preventScroll", "disableEditing", "enableEditing", "canChangeContent", "nodeName", "contentDiv", "setActiveEditor", "telemetryInitialData", "telemetryFinalData", "_telemetryTimeout", "annotationLayer", "updateEdited", "addFakeAnnotation", "SEED", "MASK_HIGH", "MASK_LOW", "MurmurHash3_64", "seed", "h1", "h2", "blockCounts", "tailLength", "dataUint32", "k1", "k2", "C1", "C2", "C1_LOW", "C2_LOW", "hexdigest", "SerializableEmpty", "AnnotationStorage", "modified", "modifiedIds", "editorsMap", "onSetModified", "onResetModified", "onAnnotationEditor", "defaultValue", "resetModified", "setModified", "print", "PrintAnnotationStorage", "serializable", "hasBitmap", "update", "editorStats", "stats", "typeToEditor", "numberOfEditedComments", "numberOfDeletedComments", "isCommentDeleted", "counters", "comments", "edited", "computeTelemetryFinalData", "resetModifiedIds", "ids", "FontLoader", "systemFonts", "ownerDocument", "styleElement", "_document", "nativeFontFaces", "loadingRequests", "loadTestFontId", "nativeFontFace", "fonts", "rule", "getElementsByTagName", "styleSheet", "sheet", "insertRule", "cssRules", "loadSystemFont", "systemFontInfo", "disableFontFace", "_inspectFont", "loadedName", "isFontLoadingAPISupported", "fontFace", "FontFace", "addNativeFontFace", "load", "baseFontName", "removeNativeFontFace", "font", "attached", "missingFile", "createNativeFontFace", "loaded", "family", "createFontFaceRule", "isSyncFontLoadingSupported", "_queueLoadingCallback", "_prepareFontLoadEvent", "complete", "otherRequest", "_loadTestFont", "atob", "int32", "offset", "spliceString", "insert", "called", "XXXX_VALUE", "checksum", "fontFamily", "isFontReady", "fillText", "FontFaceObject", "fontData", "translatedData", "inspectFont", "extra", "charProcOperatorList", "compiledGlyphs", "cssFontInfo", "css", "weight", "fontWeight", "italicAngle", "mimetype", "objs", "character", "objId", "cmds", "path", "Path2D", "fontExtraProperties", "black", "bold", "isInvalidPDFjsFont", "isType3Font", "italic", "remeasure", "vertical", "ascent", "defaultWidth", "descent", "bbox", "fontMatrix", "fallbackName", "clearData", "defaultVMetrics", "getFactoryUrlProp", "isRefProxy", "isInteger", "num", "gen", "isValidExplicitDest", "validRef", "validName", "dest", "page", "zoom", "argsLen", "allowNull", "arg", "LoopbackPort", "listeners", "deferred", "listener", "rmAbort", "onAbort", "removeEventListener", "terminate", "CallbackKind", "StreamKind", "onFn", "wrapReason", "AbortException", "InvalidPDFException", "PasswordException", "ResponseException", "UnknownErrorException", "MessageHandler", "messageAC", "sourceName", "targetName", "comObj", "callbackId", "streamId", "streamSinks", "streamControllers", "callbackCapabilities", "actionHandler", "onMessage", "stream", "capability", "actionName", "handler", "ah", "transfers", "queueingStrategy", "ReadableStream", "controller", "startCapability", "startCall", "pullCall", "cancelCall", "isClosed", "desiredSize", "pull", "pullCapability", "cancelCapability", "streamSink", "isCancelled", "lastDesiredSize", "sinkCapability", "ready", "onPull", "onCancel", "success", "streamController", "enqueue", "dataReason", "allSettled", "BaseCanvasFactory", "enableHWA", "_createCanvas", "canvasAndContext", "DOMCanvasFactory", "BaseCMapReaderFactory", "isCompressed", "_fetch", "cMapData", "catch", "DOMCMapReaderFactory", "BaseFilterFactory", "maps", "fgColor", "bgColor", "filterName", "newFgColor", "newBgColor", "keepHCM", "DOMFilterFactory", "_cache", "_defs", "docId", "_hcmCache", "hcmCache", "defs", "contain", "svg", "mapR", "table", "mapG", "mapB", "bufferR", "bufferG", "bufferB", "tableR", "tableG", "tableB", "fgRGB", "bgRGB", "getSteps", "tableA", "fgGray", "bgGray", "newFgRGB", "newBgRGB", "fg", "bg", "newStart", "newStep", "prev", "feColorMatrix", "feComponentTransfer", "feFunc", "rTable", "gTable", "bTable", "aTable", "BaseStandardFontDataFactory", "DOMStandardFontDataFactory", "BaseWasmFactory", "DOMWasmFactory", "require", "createRequire", "DOMMatrix", "ImageData", "language", "node_utils_fetchData", "fs", "readFile", "NodeFilterFactory", "NodeCanvasFactory", "createCanvas", "NodeCMapReaderFactory", "NodeStandardFontDataFactory", "NodeWasmFactory", "FORCED_DEPENDENCY_LABEL", "expandBBox", "minX", "minY", "maxX", "maxY", "EMPTY_BBOX", "BBoxReader", "bboxes", "coords", "ensureDebugMetadata", "dependencies", "isRenderingOperation", "CanvasDependencyTracker", "incremental", "sameLineText", "namedDependencies", "savesStack", "markedContentStack", "baseTransformStack", "clipBox", "pendingBBox", "pendingBBoxIdx", "pendingDependencies", "operations", "fontBBoxTrustworthy", "canvasWidth", "canvasHeight", "bboxesCoords", "debugMetadata", "operationsCount", "recordDebugMetadata", "oldBBoxes", "opIdx", "previous", "lastSave", "idx", "getOpenMarker", "multiplyByDOMMatrix", "popBaseTransform", "depName", "fallbackIdx", "recordIncrementalData", "recordFutureForcedDependency", "inheritPendingDependenciesAsFutureForcedDependencies", "dep", "axialAlignedBoundingBox", "intersect", "getMeasure", "fontBBox", "isBBoxTrustworthy", "computedBBox", "scaleMinMax", "recordBBox", "recordFullPageBBox", "measure", "actualBoundingBoxLeft", "actualBoundingBoxRight", "actualBoundingBoxAscent", "actualBoundingBoxDescent", "dependencyName", "dependencyNames", "preserve", "recordDependencies", "depIdx", "saveIdx", "deps", "recordOperation", "_takePendingDependencies", "operation", "takeDebugMetadata", "CanvasNestedDependencyTracker", "dependencyTracker", "ignoreBBoxes", "nestingLevel", "savesLevel", "growOperationsCount", "pushBaseTransform", "recordSimpleData", "resetIncrementalData", "recordSimpleDataFromNamed", "inheritSimpleDataAsFutureForcedDependencies", "resetBBox", "recordClipBox", "recordCharacterBBox", "getSimpleIndex", "recordNamedDependency", "recordShowTextOperation", "bboxToClipBoxDropOperation", "Dependencies", "PathType", "applyBoundingBox", "region", "BaseShadingPattern", "isModifyingCurrentTransform", "getPattern", "RadialAxialShadingPattern", "IR", "_bbox", "_colorStops", "_p0", "_p1", "_r0", "_r1", "grad", "createLinearGradient", "createRadialGradient", "colorStop", "addColorStop", "owner", "pathType", "pattern", "ownerBBox", "getClippedPathBoundingBox", "tmpCanvas", "cachedCanvases", "getCanvas", "tmpCtx", "clearRect", "beginPath", "baseTransform", "fillStyle", "_createGradient", "createPattern", "domMatrix", "setTransform", "drawTriangle", "p3", "c1", "c2", "c3", "rowSize", "scaleX", "scaleY", "c1r", "c1g", "c1b", "c2r", "c2g", "c2b", "c3r", "c3g", "c3b", "xa", "car", "cag", "cab", "xb", "cbr", "cbg", "cbb", "x1_", "x2_", "drawFigure", "figure", "ps", "cs", "verticesPerRow", "rows", "cols", "q", "MeshShadingPattern", "_coords", "_figures", "_bounds", "_background", "combinedScale", "boundsWidth", "boundsHeight", "paddedWidth", "BORDER_SIZE", "paddedHeight", "createImageData", "putImageData", "singularValueDecompose2dScale", "matrixScaleX", "matrixScaleY", "temporaryPatternCanvas", "_createMeshCanvas", "DummyShadingPattern", "PaintType", "TilingPattern", "canvasGraphicsFactory", "operatorList", "xstep", "ystep", "paintType", "tilingType", "combinedScaleX", "combinedScaleY", "redrawHorizontally", "redrawVertically", "xScaledStep", "yScaledStep", "dimx", "getSizeAndScale", "dimy", "graphics", "createCanvasGraphics", "groupLevel", "setFillAndStrokeStyleToContext", "clipBbox", "executeOperatorList", "endDrawing", "dimx2", "dimy2", "xSize", "ySize", "tmpCanvas2", "tmpCtx2", "jj", "realOutputSize", "MAX_PATTERN_SIZE", "bboxWidth", "bboxHeight", "strokeStyle", "fillColor", "strokeColor", "FormatError", "createPatternCanvas", "convertBlackAndWhiteToRGBA", "srcPos", "nonBlackColor", "inverseDecode", "zeroMapping", "oneMapping", "widthInSource", "widthRemainder", "srcLength", "destPos", "elem", "FULL_CHUNK_HEIGHT", "SCALE_MATRIX", "XY", "MIN_MAX_INIT", "CachedCanvases", "canvasFactory", "canvasEntry", "reset", "drawImageAtIntegerCoords", "srcImg", "srcX", "srcY", "srcW", "srcH", "destX", "destY", "destW", "destH", "tlX", "rTlX", "tlY", "rTlY", "brX", "rWidth", "brY", "rHeight", "CanvasExtraState", "alphaIsShape", "fontSize", "fontSizeScale", "textMatrix", "textMatrixScale", "leading", "lineX", "lineY", "charSpacing", "wordSpacing", "textHScale", "textRenderingMode", "textRise", "patternFill", "patternStroke", "fillAlpha", "strokeAlpha", "lineWidth", "activeSMask", "transferMaps", "preInit", "xStrokePad", "yStrokePad", "updateClipFromPath", "getPathBoundingBox", "startNewPathAndClipBox", "isEmptyClip", "putBinaryImageData", "imgData", "partialChunkHeight", "fullChunks", "totalChunks", "chunkImgData", "thisChunkHeight", "elemsInThisChunk", "dest32", "dest32DataLength", "fullSrcDiff", "srcDiff", "kEnd", "kEndUnrolled", "mask", "srcByte", "putBinaryImageMask", "copyCtxState", "sourceCtx", "destCtx", "properties", "setLineDash", "getLineDash", "lineDashOffset", "resetCtxToDefault", "fillRule", "globalAlpha", "lineCap", "lineJoin", "miterLimit", "globalCompositeOperation", "getImageSmoothingEnabled", "interpolate", "actualScale", "fround", "LINE_CAP_STYLES", "LINE_JOIN_STYLES", "NORMAL_CLIP", "EO_CLIP", "CanvasGraphics", "canvasCtx", "commonObjs", "optionalContentConfig", "annotationCanvasMap", "stateStack", "pendingClip", "pendingEOFill", "xobjs", "groupStack", "smaskStack", "smaskCounter", "tempSMask", "suspendedCtx", "contentVisible", "cachedPatterns", "viewportScale", "outputScaleX", "outputScaleY", "_cachedScaleForStroking", "_cachedGetSinglePixelWidth", "_cachedBitmapsMap", "fallback", "beginDrawing", "transparency", "savedFillStyle", "fillRect", "transparentCanvas", "compositeCtx", "executionStartIdx", "continueCallback", "stepper", "operationsFilter", "argsArray", "fnArray", "argsArrayLen", "chunkOperations", "endTime", "steps", "fnId", "fnArgs", "nextBreakPoint", "breakIt", "depObjId", "recordNamedData", "objsPool", "restoreInitialState", "inSMaskMode", "HTMLCanvasElement", "drawFilter", "hcmFilterId", "savedFilter", "img", "inverseTransform", "displayWidth", "displayHeight", "widthScale", "heightScale", "paintWidth", "paintHeight", "tmpCanvasId", "isPatternFill", "currentTransform", "cacheKey", "maskCanvas", "mainKey", "cachedImage", "maskToCanvas", "drawnWidth", "drawnHeight", "fillCanvas", "fillCtx", "_scaleImage", "imageSmoothingEnabled", "dashArray", "dashPhase", "flatness", "states", "checkSMaskState", "addFilter", "beginSMaskMode", "endSMaskMode", "cacheId", "scratchCanvas", "_removeMirroring", "__originalSave", "__originalRestore", "__originalRotate", "rotate", "__originalScale", "__originalTranslate", "__originalTransform", "__originalSetTransform", "__originalResetTransform", "resetTransform", "__originalClip", "__originalMoveTo", "__originalLineTo", "__originalBezierCurveTo", "bezierCurveTo", "__originalRect", "__originalClosePath", "__originalBeginPath", "cp1x", "cp1y", "cp2x", "cp2y", "dirtyBox", "smask", "composeSMask", "layerCtx", "layerBox", "layerOffsetX", "layerOffsetY", "layerWidth", "layerHeight", "genericComposeSMask", "subtype", "backdrop", "transferMap", "maskCtx", "maskOffsetX", "maskOffsetY", "maskX", "maskY", "addAlphaFilter", "addLuminosityFilter", "old", "op", "outerExtraSize", "path2d", "_pathStartIdx", "consumePath", "newPath", "addPath", "multiplySelf", "rescaleAndStroke", "needRestore", "recordOpenMarker", "paths", "pendingTextPaths", "recordCloseMarker", "invTransf", "preMultiplySelf", "spacing", "fontRefName", "fontObj", "fontDirection", "typeface", "browserFontSize", "rise", "patternFillTransform", "patternStrokeTransform", "fillStrokeMode", "isAddToPathSet", "getPathGenerator", "scaledPath", "invPatternTransform", "measureText", "strokeText", "isFontSubpixelAAEnabled", "glyphs", "showType3Text", "glyphsLength", "spacingDir", "widthAdvanceScale", "simpleFillText", "getSinglePixelWidth", "chars", "glyph", "unicode", "joinedChars", "compose", "restoreNeeded", "isSpace", "fontChar", "accent", "scaledX", "scaledY", "vmetric", "vx", "vy", "measuredWidth", "characterScaleX", "isInFont", "paintChar", "scaledAccentX", "scaledAccentY", "spacingLength", "operatorListId", "xWidth", "yWidth", "llx", "lly", "urx", "ury", "renderingOpIdx", "_getPattern", "getColorN_Pattern", "getObject", "inv", "group", "currentCtx", "isolated", "knockout", "bounds", "canvasBounds", "groupCtx", "startTransformInverse", "currentMtx", "hasOwnCanvas", "annotationCanvas", "savedCtx", "_createMaskCanvas", "skewX", "skewY", "positions", "trans", "images", "imgToPaint", "applyTransferMapsToBitmap", "HTMLElement", "applyTransferMapsToCanvas", "isVisible", "isContentVisible", "absDet", "normX", "normY", "getScaleForStroking", "scaledLineWidth", "scaledXLineWidth", "scaledYLineWidth", "baseArea", "saveRestore", "dashes", "CssFontInfo", "view", "decoder", "encoder", "TextEncoder", "encodedStrings", "stringsLength", "strings", "encoded", "encode", "setUint32", "TextDecoder", "getUint32", "SystemFontInfo", "encodedStyleStyle", "encodedStyleWeight", "lengthEstimate", "setUint8", "guessFallback", "getUint8", "styleLength", "weightLength", "FontInfo", "bools", "byteOffset", "bitOffset", "getFloat64", "getInt16", "stringData", "cssFontInfoLength", "cssFontInfoData", "systemFontInfoLength", "systemFontInfoData", "systemFontInfoBuffer", "cssFontInfoBuffer", "numBools", "boolByte", "boolBit", "setFloat64", "coord", "setInt16", "metric", "GlobalWorkerOptions", "workerPort", "Worker", "workerSrc", "Metadata", "parsedData", "getRaw", "INTERNAL", "OptionalContentGroup", "isDisplay", "isPrint", "userSet", "renderingIntent", "usage", "rbGroups", "viewState", "printState", "internal", "OptionalContentConfig", "cachedGetHash", "groups", "initialHash", "order", "creator", "baseState", "_setVisible", "off", "getHash", "operator", "expression", "policy", "preserveRB", "rbGroup", "otherId", "setOCGState", "setVisibility", "hasInitialVisibility", "getOrder", "PDFDataTransportStream", "pdfDataRangeTransport", "disableRange", "disableStream", "initialData", "progressiveDone", "contentDispositionFilename", "_queuedChunks", "_progressiveDone", "_contentDispositionFilename", "_pdfDataRangeTransport", "_isStreamingSupported", "_isRangeSupported", "_contentLength", "_fullRequestReader", "_rangeReaders", "addRangeListener", "begin", "_onReceiveData", "addProgressListener", "total", "_onProgress", "addProgressiveReadListener", "addProgressiveDoneListener", "_onProgressiveDone", "transportReady", "_enqueue", "rangeReader", "_begin", "_progressiveDataLength", "_loaded", "onProgress", "reader", "getFullReader", "queuedChunks", "PDFDataTransportStreamReader", "PDFDataTransportStreamRangeReader", "requestDataRange", "_stream", "_done", "_filename", "_requests", "_headersReady", "headersReady", "isRangeSupported", "isStreamingSupported", "contentLength", "requestCapability", "_end", "_queuedChunk", "_removeRangeReader", "createHeaders", "isHttp", "httpHeaders", "headers", "Headers", "getResponseOrigin", "validateRangeRequestCapabilities", "responseHeaders", "rangeChunkSize", "returnValues", "allowRangeRequests", "suggestedLength", "extractFilenameFromHeader", "contentDisposition", "needsEncodingFixup", "toParamRegExp", "rfc2616unquote", "unescape", "rfc5987decode", "rfc2047decode", "fixupEncoding", "contentDispositionStr", "iter", "quot", "part", "parts", "attributePattern", "flags", "textdecode", "encoding", "fatal", "quotindex", "extvalue", "encodingend", "charset", "createResponseError", "validateResponseStatus", "createFetchOptions", "withCredentials", "credentials", "redirect", "getArrayBuffer", "PDFFetchStream", "_responseOrigin", "_rangeRequestReaders", "PDFFetchStreamReader", "PDFFetchStreamRangeReader", "_reader", "_withCredentials", "_headersCapability", "_disableRange", "_rangeChunkSize", "_abortController", "getReader", "_readCapability", "responseOrigin", "NetworkManager", "currXhrId", "pendingRequests", "xhr", "xhrId", "pendingRequest", "setRequestHeader", "expectedStatus", "onError", "onStateChange", "onprogress", "onHeadersReceived", "onDone", "xhrStatus", "rangeHeader", "getResponseHeader", "PDFNetworkStream", "_source", "_manager", "PDFNetworkStreamFullRequestReader", "PDFNetworkStreamRangeRequestReader", "onClosed", "_onRangeRequestReaderClosed", "manager", "_url", "_fullRequestId", "_onHeadersReceived", "_onDone", "_onError", "_cachedChunks", "_storedError", "fullRequestXhrId", "fullRequestXhr", "getRequestXhr", "responseURL", "rawResponseHeaders", "getAllResponseHeaders", "trimStart", "abortRequest", "lengthComputable", "isPendingRequest", "_requestId", "_close", "urlRegex", "PDFNodeStream", "sourceUrl", "pathToFileURL", "PDFNodeStreamFsFullReader", "PDFNodeStreamFsRangeReader", "_readableStream", "lstat", "_setReadableStream", "createReadStream", "_error", "readableStream", "INITIAL_DATA", "PDFObjects", "TextLayer", "disableProcessItems", "fontInspectorEnabled", "FontInspector", "lang", "layoutTextParams", "rootContainer", "styleCache", "textContentItemsStr", "textContentSource", "textDivProperties", "ensureMinFontSizeComputed", "finally", "fontFamilyMap", "pump", "onBefore", "abortEx", "geom", "textDiv", "hasText", "hasEOL", "atan2", "fontName", "PI", "fontSubstitution", "fontHeight", "fontAscent", "sin", "cos", "scaleFactorStr", "divStyle", "dataset", "fontSubstitutionLoadedName", "shouldScaleText", "absScaleX", "absScaleY", "br", "minFontSize", "cleanup", "alpha", "cached", "lineHeight", "cachedAscent", "metrics", "fontBoundingBoxAscent", "fontBoundingBoxDescent", "ratio", "getDocument", "task", "PDFDocumentLoadingTask", "location", "Buffer", "isNaN", "password", "rangeTransport", "PDFDataRangeTransport", "worker", "PDFWorker", "docBaseUrl", "cMapUrl", "cMapPacked", "CMapReaderFactory", "iccUrl", "standardFontDataUrl", "StandardFontDataFactory", "wasmUrl", "WasmFactory", "ignoreErrors", "stopAtErrors", "maxImageSize", "chrome", "canvasMaxAreaInBytes", "enableXfa", "disableAutoFetch", "pdfBug", "CanvasFactory", "FilterFactory", "useWasm", "useSystemFonts", "useWorkerFetch", "level", "transportFactory", "cMapReaderFactory", "standardFontDataFactory", "wasmFactory", "port", "_worker", "docParams", "apiVersion", "evaluatorOptions", "transportParams", "loadingParams", "destroyed", "workerIdPromise", "messageHandler", "sendWithPromise", "networkStream", "NetworkStream", "workerId", "transport", "WorkerTransport", "_transport", "_capability", "onPassword", "_pendingDestroy", "progressiveDoneListeners", "progressiveReadListeners", "progressListeners", "rangeListeners", "onDataProgressiveDone", "PDFDocumentProxy", "pdfInfo", "_pdfInfo", "numPages", "fingerprints", "isPureXfa", "_htmlForXfa", "allXfaHtml", "getPage", "ref", "getPageIndex", "getDestinations", "getDestination", "getPageLabels", "getPageLayout", "getPageMode", "getViewerPreferences", "getOpenAction", "getAttachments", "pageIndexesToSkip", "getJSActions", "getDocJSActions", "getOutline", "getOptionalContentConfig", "getRenderingIntent", "getPermissions", "getMetadata", "getMarkInfo", "saveDocument", "getDownloadInfo", "downloadInfoCapability", "keepLoadedFonts", "startCleanup", "loadingTask", "cachedPageNumber", "getFieldObjects", "hasJSActions", "getCalculationOrderIds", "PDFPageProxy", "pendingCleanup", "pageInfo", "_pageIndex", "_pageInfo", "_stats", "_pdfBug", "_intentStates", "recordedBBoxes", "getViewport", "getAnnotations", "getPageJSActions", "getXfa", "canvasContext", "annotationMode", "optionalContentConfigPromise", "printAnnotationStorage", "recordOperations", "time", "intentArgs", "intentState", "streamReaderCancelTimeout", "intentPrint", "displayReadyCapability", "lastChunk", "separateAnnots", "_pumpOperatorList", "recordForDebugger", "Boolean", "StepperManager", "shouldRecordOperations", "renderTasks", "internalRenderTask", "gfx", "setOperatorBBoxes", "tryCleanup", "_abortOperatorList", "timeEnd", "Stats", "InternalRenderTask", "useRequestAnimationFrame", "renderTask", "initializeGraphics", "operatorListChanged", "getOperatorList", "opListTask", "opListReadCapability", "streamTextContent", "includeMarkedContent", "disableNormalization", "sendWithStream", "highWaterMark", "getStructTree", "_destroy", "waitOn", "force", "completed", "resetStats", "operatorListChunk", "annotationStorageSerializable", "streamReader", "_renderPageChunk", "delay", "curCacheKey", "curIntentState", "_PDFWorker", "__privateAdd", "_PDFWorker_instances", "_messageHandler", "_port", "_webWorker", "__privateGet", "_workerPorts", "__privateMethod", "initialize_fn", "__privateSet", "cachedPort", "_setupFakeWorkerGlobal", "_PDFWorker_static", "mainThreadWorkerMessageHandler_get", "import", "WorkerMessageHandler", "loader", "_fakeWorkerId", "_isWorkerDisabled", "WeakSet", "resolve_fn", "initializeFromPort_fn", "setupFakeWorker_fn", "_isSameOrigin", "_createCDNWrapper", "terminateEarly", "sendTest", "testObj", "workerHandler", "setup", "pdfjsWorker", "otherUrl", "wrapper", "createObjectURL", "fromPort", "log", "methodPromises", "pageCache", "pagePromises", "pageRefCache", "passwordCapability", "factory", "fontLoader", "_params", "destroyCapability", "_networkStream", "_fullReader", "_lastProgress", "setupMessageHandler", "cachedPromise", "isOpList", "modifiedIdsHash", "terminated", "cancelAllRequests", "sink", "readyReason", "getRangeReader", "_numPages", "htmlForXfa", "updatePassword", "err", "_startRenderPage", "exportedData", "exportedError", "fontAdded", "imageRef", "pageProxy", "dataLen", "imageData", "refStr", "results", "RenderTask", "onContinue", "form", "rAF", "operatorListIdx", "running", "graphicsReadyCallback", "graphicsReady", "_useRequestAnimationFrame", "cancelled", "_cancelBound", "_continueBound", "_continue", "_scheduleNextBound", "_scheduleNext", "_nextBound", "_next", "_canvas", "_canvasContext", "_enableHWA", "_dependencyTracker", "_operationsFilter", "init", "getNextBreakPoint", "cancelAnimationFrame", "updateOperatorList", "requestAnimationFrame", "build", "ColorPicker", "buttonSwatch", "defaultColor", "dropdown", "dropdownWasFromKeyboard", "isMainColorPicker", "openDropdownAC", "_hideDropdownFromKeyboard", "_colorSelectFromKeyboard", "_moveToNext", "_moveToPrevious", "_moveToBeginning", "_moveToEnd", "blue", "green", "pink", "red", "yellow", "swatch", "ariaHidden", "renderMainDropdown", "getDropdownRoot", "ariaOrientation", "ariaLabelledBy", "role", "ariaMultiSelectable", "ariaSelected", "updateColor", "nextSibling", "previousSibling", "detail", "isDropdownVisible", "BasicColorPicker", "colorType", "colorValue", "makeColorComp", "scaleAndClamp", "ColorConverters", "CMYK_G", "G_CMYK", "G_RGB", "G_rgb", "G_HTML", "G", "RGB_G", "T_HTML", "T_rgb", "CMYK_RGB", "CMYK_rgb", "components", "RGB_HTML", "RGB_CMYK", "BaseSVGFactory", "skipDimensions", "_createSVG", "DOMSVGFactory", "GetElementsByNameSet", "TIMEZONE_OFFSET", "getTimezoneOffset", "AnnotationElementFactory", "LinkAnnotationElement", "TextAnnotationElement", "fieldType", "TextWidgetAnnotationElement", "radioButton", "RadioButtonWidgetAnnotationElement", "checkBox", "CheckboxWidgetAnnotationElement", "PushButtonWidgetAnnotationElement", "ChoiceWidgetAnnotationElement", "SignatureWidgetAnnotationElement", "WidgetAnnotationElement", "PopupAnnotationElement", "FreeTextAnnotationElement", "LineAnnotationElement", "SquareAnnotationElement", "CircleAnnotationElement", "PolylineAnnotationElement", "CaretAnnotationElement", "InkAnnotationElement", "PolygonAnnotationElement", "HighlightAnnotationElement", "UnderlineAnnotationElement", "SquigglyAnnotationElement", "StrikeOutAnnotationElement", "StampAnnotationElement", "FileAttachmentAnnotationElement", "AnnotationElement", "updates", "hasBorder", "popupElement", "isRenderable", "ignoreBorder", "createQuadrilaterals", "downloadManager", "imageResourcesPath", "renderForms", "svgFactory", "enableComment", "enableScripting", "_fieldObjects", "fieldObjects", "_createContainer", "_createQuadrilaterals", "_hasPopupData", "_isEditable", "isEditable", "hasPopupData", "commentText", "commentData", "getEditor", "hasCommentButton", "hasPopupElement", "quadPoints", "inkLists", "inkList", "updateEditor", "removePopup", "newPopup", "_createPopup", "resetEdited", "currentRect", "setRotation", "alternativeText", "noRotate", "borderStyle", "borderWidth", "horizontalRadius", "horizontalCornerRadius", "verticalRadius", "verticalCornerRadius", "radius", "borderRadius", "borderBottomStyle", "borderColor", "normalizeRect", "_commonActions", "setColor", "jsName", "styleName", "colorArray", "noView", "noPrint", "userName", "readonly", "_setRequired", "textColor", "actions", "jsEvent", "commonActions", "rectBlX", "rectBlY", "rectTrX", "rectTrY", "svgBuffer", "clipPath", "rectWidth", "rectHeight", "backgroundImage", "popupData", "titleObj", "parentRect", "_commentManager", "extraPopupElement", "skipId", "fields", "fieldObj", "exportValues", "exportValue", "domElement", "getElementsByName", "maybeShow", "forceHide", "getElementsToTriggerPopup", "addHighlightArea", "triggers", "_editOnDoubleClick", "annotationEditorType", "EditorAnnotationElement", "createOrUpdatePopup", "renderCommentButton", "isTooltipOnly", "link", "isBound", "_bindNamedAction", "overlaidText", "attachment", "attachmentDest", "_bindLink", "Action", "_bindJSAction", "resetForm", "_bindResetFormAction", "setInternalLink", "destination", "getDestinationHash", "onclick", "goToDestination", "getAnchorUrl", "executeNamedAction", "openOrDownloadData", "executeSetOCGState", "otherClickAction", "resetFormFields", "refs", "resetFormRefs", "include", "allFields", "fieldIds", "fieldName", "field", "allIds", "dispatchEvent", "Event", "elementData", "baseName", "eventName", "valueGetter", "modifier", "_getKeyModifier", "focused", "_setEventListener", "Blur", "Focus", "TEXT_ALIGNMENT", "fontColor", "defaultAppearanceData", "computedFontSize", "roundToOneDecimal", "multiLine", "textAlignment", "textAlign", "isRequired", "hasAppearance", "fieldValue", "keyInStorage", "_getElementsByName", "maxLen", "charLimit", "fieldFormattedValues", "formattedValue", "comb", "userValue", "lastCommittedValue", "commitKey", "doNotScroll", "overflowY", "overflowX", "readOnly", "datetimeFormat", "datetimeType", "timeStep", "hasDateOrTime", "setPropertyOnSiblings", "defaultFieldValue", "blurListener", "scrollLeft", "getHours", "getMinutes", "getSeconds", "toISOString", "showElementAndHideCanvas", "setSelectionRange", "selRange", "willCommit", "selStart", "selectionStart", "selEnd", "selectionEnd", "_dispatchEventFromSandbox", "_blurListener", "Keystroke", "inputType", "change", "_setEventListeners", "combWidth", "letterSpacing", "verticalAlign", "_setTextStyle", "_setBackgroundColor", "_setDefaultPropertiesFromJS", "checkbox", "curChecked", "buttonValue", "radio", "pdfButtonValue", "linkElement", "selectElement", "addAnEmptyEntry", "combo", "multiSelect", "multiple", "optionElement", "displayValue", "removeEmptyEntry", "noneOptionElement", "isExport", "selectedValues", "getItems", "findIndex", "selectChild", "indices", "editable", "changeEx", "keyDown", "createPopup", "PopupElement", "boundKeyDown", "boundHide", "boundShow", "boundToggle", "dateObj", "pinned", "popupAbortController", "commentButton", "wasVisible", "firstElement", "toDateObject", "trigger", "addEventListeners", "setCommentButtonPosition", "_normalizePoint", "hasOwnButton", "togglePopup", "showPopup", "hidePopup", "parentContainer", "updateCommentButtonPosition", "after", "outlineColor", "header", "dateTime", "popupLines", "popupContent", "lineAttributes", "setPosition", "useParentRect", "normalizedRect", "popupLeft", "popupTop", "textPosition", "lineSpan", "lineCoordinates", "square", "circle", "polyline", "containerClassName", "svgElementName", "vertices", "points", "polylinesGroupElement", "polylines", "thickness", "mark", "underline", "strikeout", "download", "AnnotationLayer", "accessibilityManager", "editableAnnotations", "structTreeLayer", "annotationEditorUIManager", "_annotationEditorUIManager", "hasEditableAnnotations", "popupElements", "contentElement", "ariaAttributes", "getAriaAttributes", "moveElementInDOM", "annotations", "popupToElements", "elementParams", "noHTML", "isPopupAnnotation", "rendered", "setAnnotationCanvasMap", "_defaultBorderStyle", "replaceWith", "editableAnnotation", "_hasNoCanvas", "setMissingCanvas", "getEditableAnnotations", "htmlElement", "rawWidth", "EOL_PATTERN", "FreeTextEditor", "editorDivId", "editModeAC", "_colorPicker", "_translateEmpty", "_defaultColor", "_defaultFontSize", "a11yAlert", "_internalPadding", "setFontsize", "editorDiv", "setEditorDimensions", "savedFontsize", "updateUI", "col", "savedColor", "overlayDiv", "contentEditable", "editorDivKeydown", "editorDivFocus", "editorDivBlur", "editorDivInput", "editorDivPaste", "innerText", "extractText", "prevChild", "childNodes", "savedDisplay", "savedVisibility", "savedText", "newText", "trimEnd", "setText", "setContent", "pageTranslationToScreen", "_moveAfterPaste", "nodeValue", "deleteFromDocument", "insertNode", "collapseToStart", "startContainer", "startOffset", "bufferBefore", "bufferAfter", "newRange", "Range", "beforeLength", "setStart", "setEnd", "removeAllRanges", "addRange", "replaceChildren", "serializeContent", "padding", "resetAnnotationElement", "Outline", "toSVGPath", "_rotation", "FreeDrawOutliner", "innerMargin", "last", "min_dist", "scaleFactor", "getLastCoords", "lastTop", "lastBottom", "diffX", "diffY", "diffD", "K", "nY", "thX", "thY", "toSVGPathTwoPoints", "lastTopX", "lastTopY", "lastBottomX", "lastBottomY", "outline", "FreeDrawOutline", "getOutlines", "N", "newFreeDrawOutline", "firstPoint", "lastPoint", "_rescale", "_rescaleAndSwap", "firstPointX", "firstPointY", "lastPointX", "lastPointY", "ltrCallback", "bezierBbox", "pointBoundingBox", "bezierBoundingBox", "rectBoundingBox", "outliner", "newOutliner", "HighlightOutliner", "verticalEdges", "intervals", "EPSILON", "shiftedMinX", "shiftedMinY", "lastEdge", "edge", "outlineVerticalEdges", "edges", "allEdges", "edge1", "edge2", "outlines", "HighlightOutline", "middle", "y4", "polygon", "prevX", "prevY", "classNamesForOutlining", "FreeHighlightOutliner", "FreeHighlightOutline", "HighlightEditor", "clipPathId", "focusOutlines", "highlightDiv", "highlightOutlines", "isFreeHighlight", "outlineId", "_moveCaret", "_defaultThickness", "_defaultOpacity", "highlightId", "addToDrawLayer", "createOutlines", "getNonHCMColorName", "numberOfColors", "outlinerForOutline", "createFreeOutlines", "getNewOutline", "drawLayer", "finalizeDraw", "drawOutline", "rootClass", "highlightOutline", "free", "updateProperties", "setColorAndOpacity", "opa", "savedOpacity", "savedThickness", "setThickness", "th", "getRotation", "addUndoableEditor", "cleanDrawLayer", "mustBeSelected", "setParent", "draw", "rotateBbox", "pointerover", "hovered", "pointerleave", "setCaret", "serializeBoxes", "_freeHighlight", "_freeHighlightId", "_freeHighlightClipId", "DrawingOptions", "svgProperties", "updateSVGProperty", "updateProperty", "toSVGProperties", "DrawingEditor", "drawOutlines", "mustBeCommitted", "_drawId", "_addOutlines", "createDrawOutlines", "drawId", "drawingOptions", "_drawingOptions", "defaultProperties", "_mergeSVGProperties", "defaultSVGProperties", "p1Keys", "_options", "typesMap", "supportMultipleDrawings", "propertyName", "_defaultDrawingOptions", "_currentParent", "_currentDrawId", "_updateProperty", "savedValue", "getPathResizingSVGProperties", "convertToDrawSpace", "rotateBox", "getPathResizedSVGProperties", "_x", "_y", "getPathTranslatedSVGProperties", "moving", "removeShouldRescale", "addShouldRescale", "updateAll", "updateParent", "convertToParentSpace", "pW", "pH", "updateRotation", "updateParentDimensions", "onScaleChangingWhenDrawing", "drawDiv", "_parentWidth", "_parentHeight", "_isLTR", "_endDraw", "isCancellable", "removeLastElement", "_drawMove", "timeStamp", "startNew", "updateUIForDefaultProperties", "createDrawerInstance", "getDefaultDrawingOptions", "currentMoveTimestamp", "_cleanup", "lastElement", "getLastElement", "setLastElement", "isAborted", "cleanUndoStack", "_INNER_MARGIN", "_data", "_pageX", "_pageY", "_pageWidth", "_pageHeight", "_innerWidth", "deserializeDraw", "createDrawingOptions", "InkDrawOutliner", "lastSVGPath", "lastIndex", "InkDrawOutline", "createBezierPoints", "firstX", "svgRound", "firstY", "secondX", "secondY", "c1x", "c1y", "c2x", "c2y", "currentRotation", "computeBbox", "serializedLines", "serializedPoints", "getBBoxWithNoMargin", "rescaleFn", "newLines", "margin", "marginX", "marginY", "getMarginComponents", "oldMarginX", "oldMarginY", "newMarginX", "newMarginY", "diffMarginX", "diffMarginY", "rotationTransform", "s1x", "s1y", "s2x", "s2y", "_translate", "newParentWidth", "newParentHeight", "InkDrawingOptions", "viewerParameters", "_viewParameters", "InkEditor", "serializeDraw", "ContourDrawOutline", "SignatureExtractor", "sigmaSFactor", "sigmaR", "kernelSize", "i0", "j0", "kk", "threshold", "lnbd", "nbd", "contours", "ij", "pix", "i2", "j2", "isHole", "contour", "contour0", "shiftI", "shiftJ", "i1", "j1", "i3", "j3", "i4", "j4", "ij3", "ax", "ay", "abx", "aby", "dist", "nabx", "naby", "aa", "invS", "phi", "atan", "cosPhi", "sinPhi", "tmax", "poly", "partialPhi", "dmax", "sigmaS", "kernel", "sigmaS2", "halfSize", "exp", "rangeValues", "sigmaR2", "out", "histogram", "norm", "neighbour", "M", "L", "spos", "originalBitmap", "prevWidth", "prevHeight", "log2", "isteps", "grayImage", "fontStyle", "SCALE", "uint8Buf", "contourList", "processDrawnLines", "curves", "mustSmooth", "areContours", "linesAndPoints", "xScale", "yScale", "newCurves", "reducedPoints", "newPoints", "compressSignature", "bufferType", "minDiff", "maxDiff", "outlinesLength", "dx", "headerLength", "BYTES_PER_ELEMENT", "CompressionStream", "writer", "getWriter", "BufferCtor", "diffs", "Response", "readable", "signatureData", "DecompressionStream", "numberOfDrawings", "diffsOffset", "POINTS_PROPERTIES_NUMBER", "SignatureOptions", "DrawnSignatureOptions", "SignatureEditor", "isExtracted", "signatureUUID", "_defaultDrawnSignatureOptions", "hasDescription", "hasDescriptionStats", "hasNoAltText", "uuid", "heightInPage", "addSignature", "updateEditSignatureButton", "getSignaturePreview", "setUuid", "hasBeenSaved", "fontInfo", "extractContoursFromText", "isSignature", "alt", "StampEditor", "bitmapId", "bitmapPromise", "bitmapUrl", "bitmapFile", "bitmapFileName", "missingCanvas", "resizeTimeoutId", "hasBeenAddedInUndoStack", "pasteEditor", "getAsFile", "hasAltTextStats", "fromId", "getBitmapDone", "enableWaiting", "alt_text_modal", "alt_text_type", "mlGuessAltText", "updateAltTextData", "isEnabledFor", "copyCanvas", "guess", "channels", "setGuessedAltText", "getBitmap", "getFromId", "accept", "files", "click", "deleteId", "getFromCanvas", "isValidId", "drawBitmap", "MAX_RATIO", "addContainer", "maxDataDimension", "maxPreviewDimension", "bitmapWidth", "bitmapHeight", "outputScale", "scaledWidth", "scaledHeight", "boxDim", "boxDimWidth", "boxDimHeight", "patternCtx", "dataWidth", "dataHeight", "offscreenCtx", "toUrl", "getSvgUrl", "toDataURL", "structParent", "_structTree", "addMissingCanvas", "serializeBitmap", "serializeAltText", "changes", "isSame", "isSameAltText", "stamps", "area", "prevData", "isSamePageIndex", "AnnotationEditorLayer", "allowClick", "clickAC", "editorFocusTimeoutId", "hadPointerDown", "isDisabling", "isEnabling", "drawingAC", "focusedElement", "textSelectionAC", "textLayerDblClickAC", "lastPointerDownTimestamp", "_initialized", "registerEditorTypes", "addLayer", "isInvisible", "disableTextSelection", "toggleAnnotationLayerPointerEvents", "enableTextSelection", "allEditorsIterator", "getEditors", "annotationElementIds", "isDeletedAnnotationElement", "elementsFromPoint", "dblclick", "changedAnnotations", "resetAnnotations", "getEditableAnnotation", "updateFakeAnnotationElement", "editables", "startHighlighting", "pointerdown", "removeDeletedAnnotationElement", "removePointerInTextLayer", "addDeletedAnnotationElement", "deleteAnnotationElement", "attach", "onceAdded", "currentEditorType", "getCenterPoint", "currentMode", "startDrawingSession", "startDrawing", "setCurrentDrawingSession", "findParent", "removeLayer", "oldRotation", "DrawLayer", "mapping", "toUpdate", "_svgFactory", "createSVG", "pathId", "clipPathUse", "isPathUpdatable", "hasClip", "use", "mustRemoveSelfIntersections", "maskId", "use1", "use2", "cloneNode", "elementOrId", "pathElement", "_pdfjsTestingUtils", "pdfjsLib", "FeatureTest", "ImageKind", "cause", "captureStackTrace", "getException", "Shape", "Point", "LineDirection", "Line", "to", "intersections", "gaps", "tolerance", "_valid", "valid", "normalized", "intPoint", "equal", "thisNormalized", "lineNormalized", "addIntersectionPoint", "TableData", "minXY", "maxXY", "rowPivots", "colPivots", "row", "cell", "cellCount", "acc", "rowCount", "virtualCellCount", "allCellCount", "colspan", "rowspan", "toArray", "tableArr", "rowArr", "Table", "hLines", "vLines", "Horizontal", "Vertical", "isValid", "rowSet", "colSet", "flag", "vLine", "hLine", "same", "l1", "l2", "resultLine", "prevLine", "currLine", "gapLine", "addGap", "newHLines", "getSameHorizontal", "merged", "mergeHorizontalLines", "newVLines", "getSameVertical", "mergeVerticalLines", "gap", "h2Index", "xMiddle", "topHLine", "yMiddle", "h1Index", "tableRow", "vLineIndexes", "findVerticalLineIndexs", "leftVLine", "rightVLine", "bottomHLineIndex", "findBottomLineIndex", "bottomHLine", "tableCell", "colSpan", "rowSpan", "toData", "prevHLine", "currHLine", "YMiddle", "rowData", "getRow", "LineStore", "getLines", "getTableData", "tables", "getTables", "tryFill", "fillTable", "validTables", "normalizeHorizontal", "normalizeVertical", "sameY", "margeHorizontalLines", "sameX", "margeVerticalLines", "sameYLines", "MIN_SAFE_INTEGER", "sameXLines", "Rectangle", "ImageResult", "pages", "pageData", "XMP_DATE_PROPERTIES", "InfoResult", "permission", "getDateNode", "CreationDate", "pdfjs.PDFDateString", "ModDate", "parseISODateString", "XmpCreateDate", "XmpModifyDate", "XmpMetadataDate", "XapCreateDate", "XapModifyDate", "XapMetadataDate", "isoDateString", "parsedDate", "setDefaultParseParameters", "lineThreshold", "cellThreshold", "cellSeparator", "lineEnforce", "pageJoiner", "imageThreshold", "imageDataUrl", "imageBuffer", "PathGeometry", "ScreenshotResult", "TableResult", "mergedTables", "TextResult", "doc", "progress", "pdfjs.VerbosityLevel", "pdfjs", "pdfjs?.GlobalWorkerOptions", "pdfjs.GlobalWorkerOptions", "pageLabels", "parsePageInfo", "shouldParse", "pageLinkResult", "getPageLinks", "pageLabel", "links", "unsafeUrl", "getPageText", "pdfjs.getDocument", "currentPage", "totalPage", "partial", "parseParams", "getTextContent", "parseHyperlinks", "getHyperlinks", "tm", "convertToViewportPoint", "hit", "lastItem", "isCurrentItemHasNewLine", "itemJoiner", "rectVp", "convertToViewportRectangle", "used", "ops", "pageImages", "pdfjs.OPS", "imgPromise", "resolveEmbeddedImage", "pdfjs.ImageKind", "convertToRGBA", "dataUrl", "toBuffer", "nodeBuffer", "pixelIndex", "byte", "bit", "gray", "bytesPerPixel", "pdfObjects", "dataBuff", "desiredWidth", "renderContext", "getPageTables", "tableDataArr", "fillPageTables", "pageTableResult", "mm", "undefined", "hline", "vline", "lineStore", "transformMatrix", "transformStack", "opList", "pg", "getPathGeometry", "addRectangle", "restoredMatrix", "pdfjs.Util", "pageTables", "textItem", "pageTable", "findCell"]
}
