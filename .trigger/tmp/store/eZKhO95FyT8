{
  "version": 3,
  "sources": ["../../../src/lib/pdf-parser.ts"],
  "sourcesContent": ["/**\n * Fetches and extracts text content from a PDF at the given URL\n * Returns null if extraction fails\n */\nexport async function extractTextFromPdfUrl(pdfUrl: string): Promise<string | null> {\n    try {\n        console.log(`üìÑ Fetching PDF from: ${pdfUrl}`)\n\n        const response = await fetch(pdfUrl)\n        if (!response.ok) {\n            console.error(`‚ùå Failed to fetch PDF: ${response.status} ${response.statusText}`)\n            return null\n        }\n\n        const arrayBuffer = await response.arrayBuffer()\n        const buffer = Buffer.from(arrayBuffer)\n\n        console.log(`üìÑ PDF downloaded, size: ${buffer.length} bytes`)\n\n        // Try multiple import patterns for pdf-parse compatibility\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const pdfParseModule = await import('pdf-parse') as any\n\n        // Log what we got for debugging\n        console.log(`üìÑ pdf-parse module type: ${typeof pdfParseModule}`)\n        console.log(`üìÑ pdf-parse keys: ${Object.keys(pdfParseModule).join(', ')}`)\n\n        // Try different ways to call the function\n        let pdf: (buffer: Buffer) => Promise<{ text: string; numpages: number }>\n\n        if (typeof pdfParseModule === 'function') {\n            pdf = pdfParseModule\n        } else if (typeof pdfParseModule.default === 'function') {\n            pdf = pdfParseModule.default\n        } else if (typeof pdfParseModule.default?.default === 'function') {\n            pdf = pdfParseModule.default.default\n        } else {\n            // Last resort - maybe it's the module itself\n            console.error(`‚ùå Could not find pdf-parse function. Module structure:`, JSON.stringify(pdfParseModule, null, 2))\n            return null\n        }\n\n        const data = await pdf(buffer)\n\n        console.log(`‚úÖ Extracted ${data.text.length} characters from PDF`)\n        console.log(`üìÑ PDF has ${data.numpages} pages`)\n\n        return data.text\n    } catch (error) {\n        console.error('‚ùå Error extracting PDF text:', error)\n        return null\n    }\n}\n"],
  "mappings": ";;;;;;AAAA;AAIA,eAAsB,sBAAsB,QAAwC;AAChF,MAAI;AACA,YAAQ,IAAI,yBAAyB,MAAM,EAAE;AAE7C,UAAM,WAAW,MAAM,MAAM,MAAM;AACnC,QAAI,CAAC,SAAS,IAAI;AACd,cAAQ,MAAM,0BAA0B,SAAS,MAAM,IAAI,SAAS,UAAU,EAAE;AAChF,aAAO;AAAA,IACX;AAEA,UAAM,cAAc,MAAM,SAAS,YAAY;AAC/C,UAAM,SAAS,OAAO,KAAK,WAAW;AAEtC,YAAQ,IAAI,4BAA4B,OAAO,MAAM,QAAQ;AAI7D,UAAM,iBAAiB,MAAM,OAAO,oBAAW;AAG/C,YAAQ,IAAI,6BAA6B,OAAO,cAAc,EAAE;AAChE,YAAQ,IAAI,sBAAsB,OAAO,KAAK,cAAc,EAAE,KAAK,IAAI,CAAC,EAAE;AAG1E,QAAI;AAEJ,QAAI,OAAO,mBAAmB,YAAY;AACtC,YAAM;AAAA,IACV,WAAW,OAAO,eAAe,YAAY,YAAY;AACrD,YAAM,eAAe;AAAA,IACzB,WAAW,OAAO,eAAe,SAAS,YAAY,YAAY;AAC9D,YAAM,eAAe,QAAQ;AAAA,IACjC,OAAO;AAEH,cAAQ,MAAM,0DAA0D,KAAK,UAAU,gBAAgB,MAAM,CAAC,CAAC;AAC/G,aAAO;AAAA,IACX;AAEA,UAAM,OAAO,MAAM,IAAI,MAAM;AAE7B,YAAQ,IAAI,eAAe,KAAK,KAAK,MAAM,sBAAsB;AACjE,YAAQ,IAAI,cAAc,KAAK,QAAQ,QAAQ;AAE/C,WAAO,KAAK;AAAA,EAChB,SAAS,OAAO;AACZ,YAAQ,MAAM,gCAAgC,KAAK;AACnD,WAAO;AAAA,EACX;AACJ;AAhDsB;",
  "names": []
}
